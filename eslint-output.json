[{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\__tests__\\credit-note-integration.test.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\components\\commission\\index.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\components\\credit\\index.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\components\\dashboard\\__tests__\\BaseWidget.test.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\components\\dashboard\\__tests__\\DashboardConfig.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\components\\dashboard\\__tests__\\charts.test.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\components\\dashboard\\__tests__\\useDashboardPermissions.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\components\\dashboard\\__tests__\\widgets.test.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\components\\dashboard\\charts\\index.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\components\\dashboard\\config\\DashboardConfig.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\components\\dashboard\\index.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\components\\dashboard\\preloadWidgets.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\components\\dashboard\\widgets\\customer\\index.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\components\\dashboard\\widgets\\financial\\index.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\components\\dashboard\\widgets\\index.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\components\\dashboard\\widgets\\inventory\\index.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\components\\dashboard\\widgets\\product\\index.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\components\\dashboard\\widgets\\sales-agent\\index.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\components\\dashboard\\widgets\\vat\\index.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\components\\shared\\index.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\components\\stock-movement\\index.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\components\\warehouses\\index.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\config\\features.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\constants\\defaultTemplateSettings.js","messages":[{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":311,"column":3,"nodeType":"MemberExpression","messageId":"unexpected","endLine":311,"endColumn":14,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[11493,11578],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":312,"column":3,"nodeType":"MemberExpression","messageId":"unexpected","endLine":312,"endColumn":14,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[11582,11669],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":313,"column":3,"nodeType":"MemberExpression","messageId":"unexpected","endLine":313,"endColumn":14,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[11673,11746],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":314,"column":3,"nodeType":"MemberExpression","messageId":"unexpected","endLine":314,"endColumn":14,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[11750,11824],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":315,"column":3,"nodeType":"MemberExpression","messageId":"unexpected","endLine":315,"endColumn":14,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[11828,11952],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":316,"column":3,"nodeType":"MemberExpression","messageId":"unexpected","endLine":316,"endColumn":14,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[11956,12082],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":324,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":324,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[12439,12569],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":333,"column":3,"nodeType":"MemberExpression","messageId":"unexpected","endLine":333,"endColumn":14,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[12865,12936],"text":""},"desc":"Remove the console.log()."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":8,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * Default Invoice Template Settings\r\n *\r\n * These are the default settings for the invoice template.\r\n * Users can customize these in Company Settings > Document Templates\r\n * and reset to these defaults at any time.\r\n */\r\n\r\n/**\r\n * Default document template colors\r\n * Each document type has its own primary color that can be customized.\r\n * When useInvoiceSettings is true, the document uses the invoice template color instead.\r\n */\r\nexport const DEFAULT_DOCUMENT_TEMPLATE_COLORS = {\r\n  quotation: { primaryColor: '#009999', useInvoiceSettings: false },      // Teal\r\n  purchaseOrder: { primaryColor: '#2563eb', useInvoiceSettings: false },  // Blue\r\n  deliveryNote: { primaryColor: '#0d9488', useInvoiceSettings: false },   // Teal-600\r\n  creditNote: { primaryColor: '#dc2626', useInvoiceSettings: false },     // Red\r\n  statement: { primaryColor: '#4f46e5', useInvoiceSettings: false },      // Indigo\r\n};\r\n\r\nexport const DEFAULT_TEMPLATE_SETTINGS = {\r\n  // === VERSION ===\r\n  version: '1.0.0', // Used to track template migrations\r\n\r\n  // === COLORS ===\r\n  colors: {\r\n    primary: '#008080',        // Main teal color for headers, lines (rgb: 0, 128, 128)\r\n    secondary: '#0d9488',      // Lighter teal for accents (teal-600: rgb: 13, 148, 136)\r\n    textPrimary: '#000000',    // Black for main text\r\n    textSecondary: '#404040',  // Dark gray for secondary text (rgb: 64, 64, 64)\r\n    textLight: '#808080',      // Light gray for labels (rgb: 128, 128, 128)\r\n    tableBgEven: '#FAFAFA',    // Very light gray for alternating rows (rgb: 250, 250, 250)\r\n    tableBgOdd: '#FFFFFF',     // White for alternating rows\r\n    borderColor: '#C8C8C8',    // Light gray for borders (rgb: 200, 200, 200)\r\n  },\r\n\r\n  // === LAYOUT ===\r\n  layout: {\r\n    pageWidth: 210,            // A4 width in mm\r\n    pageHeight: 297,           // A4 height in mm\r\n    marginTop: 15,             // Top margin in mm\r\n    marginBottom: 15,          // Bottom margin in mm\r\n    marginLeft: 15,            // Left margin in mm\r\n    marginRight: 15,           // Right margin in mm\r\n    headerHeight: 50,          // Header section height in mm\r\n    footerHeight: 30,          // Footer section height in mm\r\n    lineSpacing: 4,            // Default line spacing in mm\r\n    sectionSpacing: 8,         // Spacing between sections in mm\r\n  },\r\n\r\n  // === TYPOGRAPHY ===\r\n  // Industry Gold Standard for A4 Professional Invoices\r\n  typography: {\r\n    fontFamily: 'helvetica',   // Base font: helvetica, times, courier\r\n    fontSize: {\r\n      base: 8,                 // Body text (addresses, dates): 8-9pt\r\n      small: 7,                // Footer, small labels: 7pt\r\n      medium: 8,               // Table content: 8pt\r\n      large: 9,                // Section headers (Invoice To, Invoice No): 9-10pt\r\n      xlarge: 12,              // Company name: 12-14pt (bold)\r\n      title: 10,               // Document title (TAX INVOICE): 10-11pt (bold, white on banner)\r\n      tableHeader: 7,          // Table header: 7-8pt (bold, white)\r\n    },\r\n    lineHeight: 1.2,           // Line height multiplier\r\n  },\r\n\r\n  // === BRANDING ===\r\n  branding: {\r\n    showLogo: true,            // Show company logo\r\n    logoMaxWidth: 50,          // Maximum logo width in mm\r\n    logoMaxHeight: 15,         // Maximum logo height in mm\r\n    logoPosition: 'right',     // Logo position: left, right, center\r\n    showSeal: true,            // Show company seal/stamp\r\n    sealSize: 20,              // Seal size in mm (square)\r\n    companyNameInHeader: true, // Show company name in header\r\n    showVATNumber: true,       // Show VAT registration number\r\n  },\r\n\r\n  // === CONTENT VISIBILITY ===\r\n  visibility: {\r\n    // Header section\r\n    showCompanyAddress: true,\r\n    showCompanyPhone: true,\r\n    showCompanyEmail: true,\r\n    showCompanyWebsite: true,\r\n\r\n    // Invoice info\r\n    showInvoiceDate: true,\r\n    showDueDate: true,\r\n    showCustomerPO: true,\r\n    showCustomerPODate: true,\r\n\r\n    // Table columns\r\n    showItemNumber: true,      // Sr. column\r\n    showDescription: true,\r\n    showQuantity: true,\r\n    showUnitPrice: true,\r\n    showVAT: true,\r\n    showPrice: true,\r\n\r\n    // Summary section\r\n    showSubtotal: true,\r\n    showDiscount: true,\r\n    showVATAmount: true,\r\n    showTotal: true,\r\n\r\n    // Optional sections\r\n    showNotes: true,           // Show notes section\r\n    showTerms: true,           // Show payment terms section\r\n    showWarehouse: true,       // Show warehouse information\r\n\r\n    // Footer\r\n    showSignature: true,       // Show authorized signatory section\r\n    showCompanySeal: true,     // Show company seal in footer\r\n    showContactInfo: true,     // Show phone/email/website in footer\r\n    showPageNumbers: true,     // Show page numbers\r\n  },\r\n\r\n  // === TABLE CONFIGURATION ===\r\n  table: {\r\n    headerBgColor: '#008080',  // Table header background (matches primary color)\r\n    headerTextColor: '#FFFFFF', // Table header text color (white)\r\n    showAlternatingRows: true,  // Alternate row colors\r\n    rowHeight: 7,              // Default row height in mm\r\n    borderWidth: 0.3,          // Table border width in mm\r\n    columnWidths: {            // Column widths as percentages (should total 100)\r\n      sno: 7,                  // Serial number: 7%\r\n      description: 51,         // Description: 51%\r\n      quantity: 10,            // Quantity: 10%\r\n      unitPrice: 15,           // Unit Price: 15%\r\n      vat: 10,                 // VAT: 10%\r\n      price: 17,               // Price: 17%\r\n    },\r\n  },\r\n\r\n  // === FORMATTING ===\r\n  formatting: {\r\n    currencySymbol: 'AED',     // Currency symbol\r\n    currencyPosition: 'before', // before or after number\r\n    decimalPlaces: 2,          // Number of decimal places\r\n    thousandsSeparator: ',',   // Thousands separator\r\n    decimalSeparator: '.',     // Decimal separator\r\n    dateFormat: 'DD-MM-YYYY',  // Date format: DD-MM-YYYY, MM-DD-YYYY, YYYY-MM-DD\r\n    showCurrencySymbol: true,  // Show currency symbol in amounts\r\n  },\r\n\r\n  // === TEXT LABELS ===\r\n  labels: {\r\n    // Can be used for multi-language support in the future\r\n    invoiceTo: 'Invoice To:',\r\n    invoiceNo: 'Invoice No:',\r\n    invoiceDate: 'Invoice Date:',\r\n    dueDate: 'Due Date:',\r\n    salesOrder: 'SO:',\r\n    orderDate: 'Order Date:',\r\n\r\n    // Table headers\r\n    serialNo: 'Sr.',\r\n    description: 'Description',\r\n    quantity: 'Quantity',\r\n    unitPrice: 'Unit Price',\r\n    vat: 'VAT',\r\n    price: 'Price',\r\n\r\n    // Summary\r\n    subtotal: 'SubTotal',\r\n    discount: 'Discount',\r\n    vatAmount: 'VAT',\r\n    total: 'TOTAL',\r\n\r\n    // Footer\r\n    paymentTerm: 'Payment Term:',\r\n    comment: 'Comment:',\r\n    warehouse: 'Warehouse:',\r\n    authorizedSignatory: 'Authorized Signatory',\r\n    companySeal: 'Company Seal',\r\n    page: 'Page:',\r\n  },\r\n\r\n  // === CUSTOM FOOTER TEXT ===\r\n  footer: {\r\n    showCustomText: false,\r\n    customText: '',            // Custom footer text (if enabled)\r\n  },\r\n\r\n  // === ADVANCED OPTIONS ===\r\n  advanced: {\r\n    pdfQuality: 'high',        // high, medium, low\r\n    compression: true,         // Enable PDF compression\r\n    embedFonts: false,         // Embed fonts in PDF (larger file size)\r\n    allowPrinting: true,       // PDF printing permission\r\n    allowCopying: true,        // PDF copying permission\r\n  },\r\n};\r\n\r\n/**\r\n * Get default template settings\r\n * @returns {Object} Copy of default template settings\r\n */\r\nexport const getDefaultTemplateSettings = () => {\r\n  return JSON.parse(JSON.stringify(DEFAULT_TEMPLATE_SETTINGS));\r\n};\r\n\r\n/**\r\n * Merge user settings with defaults (for backward compatibility)\r\n * @param {Object} userSettings - User's custom settings\r\n * @returns {Object} Merged settings\r\n */\r\nexport const mergeTemplateSettings = (userSettings) => {\r\n  if (!userSettings || Object.keys(userSettings).length === 0) {\r\n    return getDefaultTemplateSettings();\r\n  }\r\n\r\n  // Deep merge user settings with defaults\r\n  const merged = JSON.parse(JSON.stringify(DEFAULT_TEMPLATE_SETTINGS));\r\n\r\n  const deepMerge = (target, source) => {\r\n    for (const key in source) {\r\n      if (source[key] && typeof source[key] === 'object' && !Array.isArray(source[key])) {\r\n        if (!target[key]) target[key] = {};\r\n        deepMerge(target[key], source[key]);\r\n      } else {\r\n        target[key] = source[key];\r\n      }\r\n    }\r\n    return target;\r\n  };\r\n\r\n  const result = deepMerge(merged, userSettings);\r\n\r\n  // Auto-sync: Ensure table header background matches primary color\r\n  // This handles backward compatibility for old settings with mismatched colors\r\n  if (result.colors?.primary && result.table) {\r\n    result.table.headerBgColor = result.colors.primary;\r\n  }\r\n\r\n  return result;\r\n};\r\n\r\n/**\r\n * Validate template settings\r\n * @param {Object} settings - Settings to validate\r\n * @returns {Object} { valid: boolean, errors: string[] }\r\n */\r\nexport const validateTemplateSettings = (settings) => {\r\n  const errors = [];\r\n\r\n  // Validate colors (must be valid hex colors)\r\n  const hexColorPattern = /^#[0-9A-F]{6}$/i;\r\n  if (settings.colors) {\r\n    Object.entries(settings.colors).forEach(([key, value]) => {\r\n      if (typeof value === 'string' && !hexColorPattern.test(value)) {\r\n        errors.push(`Invalid color for ${key}: ${value}`);\r\n      }\r\n    });\r\n  }\r\n\r\n  // Validate margins (must be positive numbers)\r\n  if (settings.layout) {\r\n    ['marginTop', 'marginBottom', 'marginLeft', 'marginRight'].forEach(margin => {\r\n      if (settings.layout[margin] && (settings.layout[margin] < 0 || settings.layout[margin] > 50)) {\r\n        errors.push(`Invalid ${margin}: must be between 0 and 50mm`);\r\n      }\r\n    });\r\n  }\r\n\r\n  // Validate font sizes (must be positive numbers)\r\n  if (settings.typography?.fontSize) {\r\n    Object.entries(settings.typography.fontSize).forEach(([key, value]) => {\r\n      if (value < 6 || value > 24) {\r\n        errors.push(`Invalid font size for ${key}: must be between 6 and 24pt`);\r\n      }\r\n    });\r\n  }\r\n\r\n  return {\r\n    valid: errors.length === 0,\r\n    errors,\r\n  };\r\n};\r\n\r\n/**\r\n * Get the template color for a specific document type.\r\n * Falls back to invoice template color if useInvoiceSettings is true or if no settings exist.\r\n *\r\n * @param {string} documentType - One of: quotation, purchaseOrder, deliveryNote, creditNote, statement\r\n * @param {Object} companySettings - The company settings object\r\n * @returns {string} Hex color code for the document template\r\n */\r\nexport const getDocumentTemplateColor = (documentType, companySettings) => {\r\n  // Convert camelCase to snake_case for database lookup\r\n  // e.g., 'purchaseOrder' -> 'purchase_order'\r\n  const snakeCaseType = documentType.replace(/([A-Z])/g, '_$1').toLowerCase();\r\n\r\n  // Get the invoice/main template color as fallback\r\n  const invoiceColor = companySettings?.settings?.invoiceTemplate?.colors?.primary\r\n    || companySettings?.settings?.invoice_template?.colors?.primary\r\n    || companySettings?.settings?.templateCustomColors?.primary\r\n    || DEFAULT_TEMPLATE_SETTINGS.colors.primary\r\n    || '#0d9488';\r\n\r\n  // Get document-specific settings (handle both camelCase and snake_case)\r\n  // Frontend uses camelCase, backend/database uses snake_case\r\n  // Try camelCase first (for preview/temp company objects), then snake_case (for database)\r\n  const docSettings = companySettings?.settings?.documentTemplates?.[documentType]\r\n    || companySettings?.settings?.document_templates?.[snakeCaseType]\r\n    || companySettings?.settings?.document_templates?.[documentType];\r\n\r\n  // Debug logging\r\n  console.log(`[getDocumentTemplateColor] Document Type (camelCase): ${documentType}`);\r\n  console.log(`[getDocumentTemplateColor] Document Type (snake_case): ${snakeCaseType}`);\r\n  console.log(`[getDocumentTemplateColor] Invoice Color: ${invoiceColor}`);\r\n  console.log(`[getDocumentTemplateColor] Document Settings:`, docSettings);\r\n  console.log(`[getDocumentTemplateColor] All Document Templates (camelCase):`, companySettings?.settings?.documentTemplates);\r\n  console.log(`[getDocumentTemplateColor] All Document Templates (snake_case):`, companySettings?.settings?.document_templates);\r\n\r\n  // Check useInvoiceSettings flag (handle both camelCase and snake_case)\r\n  const useInvoiceSettings = docSettings?.useInvoiceSettings ?? docSettings?.use_invoice_settings ?? false;\r\n\r\n  // If no document settings exist or useInvoiceSettings is true, use invoice color\r\n  if (!docSettings || useInvoiceSettings) {\r\n    const color = invoiceColor;\r\n    console.log(`[getDocumentTemplateColor] Using invoice color (${useInvoiceSettings ? 'synced' : 'no custom settings'}): ${color}`);\r\n    return color;\r\n  }\r\n\r\n  // Return document-specific color (handle both camelCase and snake_case), or default if not set\r\n  const color = docSettings.primaryColor\r\n    || docSettings.primary_color\r\n    || DEFAULT_DOCUMENT_TEMPLATE_COLORS[documentType]?.primaryColor\r\n    || invoiceColor;\r\n  console.log(`[getDocumentTemplateColor] Using custom color: ${color}`);\r\n  return color;\r\n};\r\n\r\n/**\r\n * Get default document template settings, merged with any existing settings\r\n *\r\n * @param {Object} existingSettings - Existing document template settings from company\r\n * @returns {Object} Merged document template settings\r\n */\r\nexport const mergeDocumentTemplateSettings = (existingSettings) => {\r\n  if (!existingSettings || Object.keys(existingSettings).length === 0) {\r\n    return JSON.parse(JSON.stringify(DEFAULT_DOCUMENT_TEMPLATE_COLORS));\r\n  }\r\n\r\n  // Merge with defaults\r\n  const merged = JSON.parse(JSON.stringify(DEFAULT_DOCUMENT_TEMPLATE_COLORS));\r\n  Object.keys(merged).forEach(docType => {\r\n    if (existingSettings[docType]) {\r\n      merged[docType] = {\r\n        ...merged[docType],\r\n        ...existingSettings[docType],\r\n      };\r\n    }\r\n  });\r\n\r\n  return merged;\r\n};\r\n","usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\constants\\pdfAlignedStyles.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\hooks\\__tests__\\useCreditNoteDrafts.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\hooks\\index.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\hooks\\useApi.js","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'dependencies' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":3,"column":37,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":49}],"suppressedMessages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useCallback has a missing dependency: 'apiFunction'. Either include it or remove the dependency array. If 'apiFunction' changes too often, find the parent component that defines it and wrap that definition in useCallback.","line":24,"column":6,"nodeType":"ArrayExpression","endLine":24,"endColumn":8,"suggestions":[{"desc":"Update the dependencies array to be: [apiFunction]","fix":{"range":[845,847],"text":"[apiFunction]"}}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useCallback has a missing dependency: 'data'. Either include it or remove the dependency array.","line":87,"column":6,"nodeType":"ArrayExpression","endLine":87,"endColumn":39,"suggestions":[{"desc":"Update the dependencies array to be: [apiFunction, data, skipInitialLoading]","fix":{"range":[3038,3071],"text":"[apiFunction, data, skipInitialLoading]"}}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'execute' and 'immediate'. Either include them or remove the dependency array.","line":96,"column":6,"nodeType":"ArrayExpression","endLine":96,"endColumn":8,"suggestions":[{"desc":"Update the dependencies array to be: [execute, immediate]","fix":{"range":[3396,3398],"text":"[execute, immediate]"}}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect was passed a dependency list that is not an array literal. This means we can't statically verify whether you've passed the correct dependencies.","line":112,"column":6,"nodeType":"Identifier","endLine":112,"endColumn":18,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'execute' and 'immediate'. Either include them or remove the dependency array.","line":112,"column":6,"nodeType":"Identifier","endLine":112,"endColumn":18,"suggestions":[{"desc":"Update the dependencies array to be: [execute, immediate]","fix":{"range":[3885,3897],"text":"[execute, immediate]"}}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect, useCallback, useRef } from 'react';\r\n\r\nexport const useApi = (apiFunction, dependencies = [], options = {}) => {\r\n  const { initialData = null } = options;\r\n  const [data, setData] = useState(initialData);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n\r\n  // Use apiFunction directly without dependencies to avoid recreating execute on every render\r\n  const execute = useCallback(async (...args) => {\r\n    try {\r\n      setLoading(true);\r\n      setError(null);\r\n      const result = await apiFunction(...args);\r\n      setData(result);\r\n      return result;\r\n    } catch (err) {\r\n      setError(err.message || 'An error occurred');\r\n      throw err;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []); // Empty deps - apiFunction should be stable (wrapped in useCallback by caller if needed)\r\n\r\n  const reset = useCallback(() => {\r\n    setData(initialData);\r\n    setError(null);\r\n    setLoading(false);\r\n  }, [initialData]);\r\n\r\n  return {\r\n    data,\r\n    loading,\r\n    error,\r\n    execute,\r\n    reset,\r\n  };\r\n};\r\n\r\n/**\r\n * useApiData - Auto-fetching hook with stale-while-revalidate support\r\n * @param {Function} apiFunction - Function to call for fetching data\r\n * @param {Array} dependencies - Dependencies that trigger refetch\r\n * @param {Object|boolean} options - Options object or boolean for backward compatibility (immediate)\r\n *   - immediate: boolean - Whether to fetch immediately on mount (default: true)\r\n *   - initialData: any - Initial data to use before fetch completes (for stale-while-revalidate)\r\n *   - skipInitialLoading: boolean - Skip showing loading state if initialData is provided\r\n */\r\nexport const useApiData = (apiFunction, dependencies = [], options = true) => {\r\n  // Support backward compatibility: options can be boolean (immediate) or object\r\n  const normalizedOptions = typeof options === 'boolean'\r\n    ? { immediate: options }\r\n    : options;\r\n\r\n  const {\r\n    immediate = true,\r\n    initialData = null,\r\n    skipInitialLoading = false,\r\n  } = normalizedOptions;\r\n\r\n  const [data, setData] = useState(initialData);\r\n  const [loading, setLoading] = useState(!skipInitialLoading);\r\n  const [error, setError] = useState(null);\r\n\r\n  // Track if initial fetch has been done to prevent double-fetch in React Strict Mode\r\n  const hasFetchedRef = useRef(false);\r\n\r\n  // Execute function that updates state\r\n  const execute = useCallback(async (...args) => {\r\n    try {\r\n      // Only show loading if we don't have data yet or skipInitialLoading is false\r\n      if (!data || !skipInitialLoading) {\r\n        setLoading(true);\r\n      }\r\n      setError(null);\r\n      const result = await apiFunction(...args);\r\n      setData(result);\r\n      return result;\r\n    } catch (err) {\r\n      setError(err.message || 'An error occurred');\r\n      throw err;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [apiFunction, skipInitialLoading]); // Include apiFunction to update when it changes\r\n\r\n  useEffect(() => {\r\n    // Only fetch on mount if immediate is true and haven't fetched yet\r\n    if (immediate && !hasFetchedRef.current) {\r\n      hasFetchedRef.current = true;\r\n      execute();\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []); // Run once on mount only\r\n\r\n  // Separate effect for dependency changes (after initial mount)\r\n  const isFirstRenderRef = useRef(true);\r\n  useEffect(() => {\r\n    // Skip first render (already handled above)\r\n    if (isFirstRenderRef.current) {\r\n      isFirstRenderRef.current = false;\r\n      return;\r\n    }\r\n\r\n    // On dependency changes, refetch if immediate is true\r\n    if (immediate) {\r\n      execute();\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, dependencies);\r\n\r\n  const reset = useCallback(() => {\r\n    setData(initialData);\r\n    setError(null);\r\n    setLoading(false);\r\n  }, [initialData]);\r\n\r\n  return {\r\n    data,\r\n    loading,\r\n    error,\r\n    refetch: execute,\r\n    reset,\r\n  };\r\n};\r\n","usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\hooks\\useApiHealth.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\hooks\\useAutoSave.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\hooks\\useConfirm.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\hooks\\useCreditNoteDrafts.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\hooks\\useCustomerTabPermissions.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\hooks\\useDashboardPermissions.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\hooks\\useInvoicePresence.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\hooks\\useKeyboardShortcuts.js","messages":[],"suppressedMessages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a complex expression in the dependency array. Extract it to a separate variable so it can be statically checked.","line":114,"column":7,"nodeType":"CallExpression","endLine":114,"endColumn":39,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\mock\\config\\mockConfig.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\mock\\generateAllMockData.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\mock\\generateMockData.js","messages":[{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":131,"column":1,"nodeType":"MemberExpression","messageId":"unexpected","endLine":131,"endColumn":12,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[5022,5105],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":132,"column":1,"nodeType":"MemberExpression","messageId":"unexpected","endLine":132,"endColumn":12,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[5106,5193],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":133,"column":1,"nodeType":"MemberExpression","messageId":"unexpected","endLine":133,"endColumn":12,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[5194,5283],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'statuses' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":149,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":149,"endColumn":17},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":246,"column":1,"nodeType":"MemberExpression","messageId":"unexpected","endLine":246,"endColumn":12,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[10120,10203],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":247,"column":1,"nodeType":"MemberExpression","messageId":"unexpected","endLine":247,"endColumn":12,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[10204,10285],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":248,"column":1,"nodeType":"MemberExpression","messageId":"unexpected","endLine":248,"endColumn":12,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[10286,10367],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":249,"column":1,"nodeType":"MemberExpression","messageId":"unexpected","endLine":249,"endColumn":12,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[10368,10447],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":250,"column":1,"nodeType":"MemberExpression","messageId":"unexpected","endLine":250,"endColumn":12,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[10448,10529],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":251,"column":1,"nodeType":"MemberExpression","messageId":"unexpected","endLine":251,"endColumn":12,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[10530,10627],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":252,"column":1,"nodeType":"MemberExpression","messageId":"unexpected","endLine":252,"endColumn":12,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[10628,10752],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":253,"column":1,"nodeType":"MemberExpression","messageId":"unexpected","endLine":253,"endColumn":12,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[10753,10843],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":400,"column":1,"nodeType":"MemberExpression","messageId":"unexpected","endLine":400,"endColumn":12,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[16267,16347],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":401,"column":1,"nodeType":"MemberExpression","messageId":"unexpected","endLine":401,"endColumn":12,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[16348,16434],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":402,"column":1,"nodeType":"MemberExpression","messageId":"unexpected","endLine":402,"endColumn":12,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[16435,16513],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":403,"column":1,"nodeType":"MemberExpression","messageId":"unexpected","endLine":403,"endColumn":12,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[16514,16596],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":404,"column":1,"nodeType":"MemberExpression","messageId":"unexpected","endLine":404,"endColumn":12,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[16597,16681],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":405,"column":1,"nodeType":"MemberExpression","messageId":"unexpected","endLine":405,"endColumn":12,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[16682,16770],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":406,"column":1,"nodeType":"MemberExpression","messageId":"unexpected","endLine":406,"endColumn":12,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[16771,16860],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":407,"column":1,"nodeType":"MemberExpression","messageId":"unexpected","endLine":407,"endColumn":12,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[16861,16966],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":408,"column":1,"nodeType":"MemberExpression","messageId":"unexpected","endLine":408,"endColumn":12,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[16967,17064],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":410,"column":1,"nodeType":"MemberExpression","messageId":"unexpected","endLine":410,"endColumn":12,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[17066,17167],"text":""},"desc":"Remove the console.log()."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":22,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Mock Data Generator for Ultimate Steel ERP\n * Generates realistic mock data for all entities\n * Run: node src/mock/generateMockData.js\n */\n\nimport fs from 'fs';\nimport path from 'path';\nimport { fileURLToPath } from 'url';\n\nconst __filename = fileURLToPath(import.meta.url);\nconst __dirname = path.dirname(__filename);\n\n// ============================================\n// HELPER FUNCTIONS\n// ============================================\n\nconst randomInt = (min, max) => Math.floor(Math.random() * (max - min + 1)) + min;\nconst randomFloat = (min, max, decimals = 2) => \n  parseFloat((Math.random() * (max - min) + min).toFixed(decimals));\nconst randomChoice = (arr) => arr[randomInt(0, arr.length - 1)];\nconst randomDate = (startDays, endDays) => {\n  const now = new Date();\n  const start = new Date(now.getTime() - startDays * 24 * 60 * 60 * 1000);\n  const end = new Date(now.getTime() - endDays * 24 * 60 * 60 * 1000);\n  return new Date(start.getTime() + Math.random() * (end.getTime() - start.getTime()));\n};\nconst formatDate = (date) => date.toISOString().split('T')[0];\nconst formatDateTime = (date) => date.toISOString();\n\n// UAE-specific data\nconst uaeCities = ['Dubai', 'Abu Dhabi', 'Sharjah', 'Ajman', 'Ras Al Khaimah', 'Fujairah'];\nconst streets = [\n  'Sheikh Zayed Road', 'Al Maktoum Road', 'Khalifa Street', 'Airport Road',\n  'Emirates Road', 'Al Wahda Street', 'Corniche Road', 'Industrial Area',\n];\nconst companyTypes = ['LLC', 'FZE', 'FZCO', 'PLC', 'Est'];\nconst arabicNames = [\n  'Ahmed', 'Mohammed', 'Ali', 'Omar', 'Hassan', 'Khalid', 'Rashid', 'Salem',\n  'Abdullah', 'Hamad', 'Saeed', 'Sultan', 'Majid', 'Tariq', 'Youssef',\n];\nconst businessNames = [\n  'Emirates', 'Gulf', 'Al Noor', 'United', 'International', 'National',\n  'Modern', 'Advanced', 'Premier', 'Royal', 'Elite', 'Global',\n];\nconst industries = [\n  'Trading', 'Steel', 'Construction', 'Manufacturing', 'Industrial',\n  'Engineering', 'Metals', 'Building Materials', 'Fabrication',\n];\n\n// ============================================\n// PHASE 1: CUSTOMERS (50 records)\n// ============================================\n\nfunction generateCustomers(count = 50) {\n  const customers = [];\n  const statuses = ['active', 'inactive', 'suspended'];\n  const statusWeights = [35, 10, 5]; // active, inactive, suspended\n  const categories = ['wholesaler', 'retailer', 'contractor', 'manufacturer'];\n  const categoryWeights = [20, 15, 10, 5];\n  const paymentTerms = ['NET_7', 'NET_15', 'NET_30', 'NET_60'];\n  const paymentWeights = [15, 20, 10, 5];\n\n  for (let i = 1; i <= count; i++) {\n    const companyName = `${randomChoice(businessNames)} ${randomChoice(industries)} ${randomChoice(companyTypes)}`;\n    const city = randomChoice(uaeCities);\n    const status = weightedChoice(statuses, statusWeights);\n    const category = weightedChoice(categories, categoryWeights);\n    const paymentTerm = weightedChoice(paymentTerms, paymentWeights);\n    const creditLimit = randomFloat(100000, 1000000, 2);\n    const currentCredit = randomFloat(0, creditLimit * 0.5, 2);\n    const outstandingBalance = randomFloat(0, currentCredit, 2);\n    const totalOrders = randomInt(5, 100);\n    const createdAt = randomDate(730, 365); // 1-2 years ago\n    const updatedAt = randomDate(30, 0); // last 30 days\n    const lastOrderDate = status === 'active' ? randomDate(60, 0) : randomDate(180, 60);\n\n    customers.push({\n      id: i,\n      name: companyName,\n      email: `contact@${companyName.toLowerCase().replace(/\\s+/g, '').replace(/[^a-z0-9]/g, '')}.ae`,\n      phone: `+971-${randomInt(2, 7)}-${randomInt(1000000, 9999999)}`,\n      trn: `100${randomInt(100000000000, 999999999999)}`,\n      address: {\n        street: `${randomChoice(streets)}, Building ${randomInt(1, 50)}`,\n        city,\n        state: city,\n        postalCode: `${randomInt(10000, 99999)}`,\n        country: 'UAE',\n      },\n      creditLimit,\n      currentCredit,\n      paymentTerms: paymentTerm,\n      status,\n      contactPerson: `${randomChoice(arabicNames)} Al ${randomChoice(['Maktoum', 'Nahyan', 'Sharqi', 'Qasimi', 'Nuaimi'])}`,\n      category,\n      createdAt: formatDateTime(createdAt),\n      updatedAt: formatDateTime(updatedAt),\n      companyId: 1,\n      lastOrderDate: formatDateTime(lastOrderDate),\n      totalOrders,\n      outstandingBalance,\n      notes: status === 'active' && creditLimit > 500000 ? 'VIP customer - monthly credit review required' : '',\n    });\n  }\n\n  return customers;\n}\n\nfunction weightedChoice(items, weights) {\n  const totalWeight = weights.reduce((a, b) => a + b, 0);\n  let random = Math.random() * totalWeight;\n  for (let i = 0; i < items.length; i++) {\n    if (random < weights[i]) return items[i];\n    random -= weights[i];\n  }\n  return items[items.length - 1];\n}\n\n// Save customers to file\nconst customers = generateCustomers(50);\nconst dataDir = path.join(__dirname, 'data');\nif (!fs.existsSync(dataDir)) {\n  fs.mkdirSync(dataDir, { recursive: true });\n}\nfs.writeFileSync(\n  path.join(dataDir, 'customers.json'),\n  JSON.stringify(customers, null, 2),\n);\n\nconsole.log(`   - Active: ${customers.filter(c => c.status === 'active').length}`);\nconsole.log(`   - Inactive: ${customers.filter(c => c.status === 'inactive').length}`);\nconsole.log(`   - Suspended: ${customers.filter(c => c.status === 'suspended').length}`);\n\n\n// ============================================\n// PHASE 1: PRODUCTS (100 records)\n// ============================================\n\nfunction generateProducts(count = 100) {\n  const products = [];\n  const categories = ['sheet', 'pipe', 'tube', 'bar', 'coil'];\n  const categoryWeights = [40, 25, 20, 10, 5];\n  const grades = ['304', '316', '201', '430', '410'];\n  const gradeWeights = [35, 30, 15, 10, 10];\n  const gradeVariants = ['', 'L', 'H', 'N'];\n  const finishes = ['HL', 'BA', '2B', 'No.4', 'Mirror'];\n  const finishWeights = [40, 25, 20, 10, 5];\n  const statuses = ['active', 'inactive'];\n\n  for (let i = 1; i <= count; i++) {\n    const category = weightedChoice(categories, categoryWeights);\n    const grade = weightedChoice(grades, gradeWeights);\n    const gradeVariant = randomChoice(gradeVariants);\n    const finish = weightedChoice(finishes, finishWeights);\n    \n    let dimensions, fullName, sku, weight;\n    \n    // Category-specific attributes\n    if (category === 'sheet') {\n      const width = randomChoice([1000, 1219, 1500, 2000]);\n      const length = randomChoice([2000, 2438, 3000, 4000]);\n      const thickness = randomChoice([0.5, 0.8, 1.0, 1.2, 1.5, 2.0, 3.0]);\n      dimensions = `${width}x${length}x${thickness}mm`;\n      fullName = `SS ${grade}${gradeVariant} Sheet ${finish} ${width}x${length} ${thickness}mm`;\n      sku = `SS${grade}${gradeVariant}-SHT-${finish}-${width}X${length}-${thickness.toString().replace('.', '')}`;\n      weight = (width / 1000) * (length / 1000) * thickness * 7.93; // kg, density of SS\n    } else if (category === 'pipe') {\n      const nbSize = randomChoice(['1/2\"', '3/4\"', '1\"', '1.5\"', '2\"', '3\"', '4\"']);\n      const schedule = randomChoice(['SCH40', 'SCH80', 'STD', 'XS']);\n      const lengthM = randomChoice([3, 6]);\n      dimensions = `${nbSize} ${schedule} ${lengthM}m`;\n      fullName = `SS ${grade}${gradeVariant} Pipe ${nbSize} ${schedule}`;\n      sku = `SS${grade}${gradeVariant}-PIPE-${nbSize.replace(/[/\"]/g, '')}-${schedule}`;\n      weight = randomFloat(5, 50, 2);\n    } else if (category === 'tube') {\n      const od = randomChoice([12.7, 19.05, 25.4, 31.75, 38.1, 50.8]);\n      const thickness = randomChoice([1.0, 1.2, 1.5, 2.0]);\n      dimensions = `${od}mm OD x ${thickness}mm WT`;\n      fullName = `SS ${grade}${gradeVariant} Tube ${od}mm x ${thickness}mm`;\n      sku = `SS${grade}${gradeVariant}-TUBE-${od}X${thickness}`;\n      weight = randomFloat(2, 20, 2);\n    } else if (category === 'bar') {\n      const diameter = randomChoice([6, 8, 10, 12, 16, 20, 25]);\n      dimensions = `${diameter}mm diameter`;\n      fullName = `SS ${grade}${gradeVariant} Bar ${diameter}mm`;\n      sku = `SS${grade}${gradeVariant}-BAR-${diameter}`;\n      weight = randomFloat(1, 10, 2);\n    } else { // coil\n      const width = randomChoice([1000, 1219, 1500]);\n      const thickness = randomChoice([0.3, 0.5, 0.8, 1.0, 1.2]);\n      dimensions = `${width}mm x ${thickness}mm`;\n      fullName = `SS ${grade}${gradeVariant} Coil ${finish} ${width}x${thickness}mm`;\n      sku = `SS${grade}${gradeVariant}-COIL-${finish}-${width}X${thickness.toString().replace('.', '')}`;\n      weight = randomFloat(500, 2000, 2);\n    }\n\n    const unitPrice = randomFloat(50, 500, 2);\n    const quantityInStock = randomInt(0, 300);\n    const reorderLevel = randomInt(20, 100);\n    const status = quantityInStock > 0 ? 'active' : randomChoice(['active', 'inactive']);\n\n    products.push({\n      id: i,\n      name: fullName,\n      category,\n      commodity: 'stainless_steel',\n      grade,\n      gradeVariant: gradeVariant || null,\n      finish,\n      formType: category === 'sheet' ? 'cold_rolled' : category === 'pipe' ? 'seamless' : null,\n      shape: category === 'bar' ? 'round' : null,\n      standard: 'ASTM_A240',\n      condition: 'annealed',\n      width: category === 'sheet' || category === 'coil' ? parseInt(dimensions.split('x')[0]) : null,\n      length: category === 'sheet' ? parseInt(dimensions.split('x')[1]) : null,\n      thickness: null,\n      od: category === 'pipe' || category === 'tube' ? null : null,\n      nbSize: category === 'pipe' ? dimensions.split(' ')[0] : null,\n      schedule: category === 'pipe' ? dimensions.split(' ')[1] : null,\n      diameter: category === 'bar' ? parseInt(dimensions.split('mm')[0]) : null,\n      size: dimensions,\n      weight,\n      unit: category === 'coil' ? 'coil' : category === 'sheet' ? 'sheet' : category === 'bar' ? 'kg' : 'length',\n      fullName,\n      sku,\n      quantityInStock,\n      reorderLevel,\n      unitPrice,\n      status,\n      companyId: 1,\n      createdAt: formatDateTime(randomDate(730, 365)),\n      updatedAt: formatDateTime(randomDate(30, 0)),\n    });\n  }\n\n  return products;\n}\n\nconst products = generateProducts(100);\nfs.writeFileSync(\n  path.join(dataDir, 'products.json'),\n  JSON.stringify(products, null, 2),\n);\n\nconsole.log(`   - Sheets: ${products.filter(p => p.category === 'sheet').length}`);\nconsole.log(`   - Pipes: ${products.filter(p => p.category === 'pipe').length}`);\nconsole.log(`   - Tubes: ${products.filter(p => p.category === 'tube').length}`);\nconsole.log(`   - Bars: ${products.filter(p => p.category === 'bar').length}`);\nconsole.log(`   - Coils: ${products.filter(p => p.category === 'coil').length}`);\nconsole.log(`   - In stock: ${products.filter(p => p.quantityInStock > p.reorderLevel).length}`);\nconsole.log(`   - Low stock: ${products.filter(p => p.quantityInStock > 0 && p.quantityInStock <= p.reorderLevel).length}`);\nconsole.log(`   - Out of stock: ${products.filter(p => p.quantityInStock === 0).length}`);\n\n\n// ============================================\n// PHASE 1: INVOICES (200 records)\n// ============================================\n\nfunction generateInvoices(count = 200, customerList, productList) {\n  const invoices = [];\n  const statuses = ['draft', 'proforma', 'sent', 'issued', 'overdue', 'cancelled'];\n  const statusWeights = [40, 30, 40, 50, 30, 10];\n  const paymentStatuses = ['unpaid', 'partially_paid', 'fully_paid'];\n  const paymentWeights = [80, 70, 50];\n\n  for (let i = 1; i <= count; i++) {\n    const customer = randomChoice(customerList.filter(c => c.status === 'active'));\n    const invoiceDate = randomDate(365, 0);\n    const dueDate = new Date(invoiceDate);\n    dueDate.setDate(dueDate.getDate() + (customer.paymentTerms === 'NET_7' ? 7 : \n      customer.paymentTerms === 'NET_15' ? 15 :\n        customer.paymentTerms === 'NET_30' ? 30 : 60));\n    \n    const status = weightedChoice(statuses, statusWeights);\n    const paymentStatus = weightedChoice(paymentStatuses, paymentWeights);\n    \n    // Generate invoice items (1-15 products)\n    const itemCount = randomInt(1, Math.min(15, productList.length));\n    const items = [];\n    let subtotal = 0;\n    \n    for (let j = 0; j < itemCount; j++) {\n      const product = randomChoice(productList.filter(p => p.status === 'active'));\n      const quantity = randomInt(1, 100);\n      const unitPrice = product.unitPrice;\n      const discount = randomFloat(0, unitPrice * quantity * 0.1, 2);\n      const taxRate = 5.0;\n      const amount = (quantity * unitPrice) - discount;\n      \n      items.push({\n        id: j + 1,\n        productId: product.id,\n        productName: product.fullName,\n        description: `${product.commodity.replace('_', ' ')} - ${product.grade}${product.gradeVariant || ''} ${product.finish || ''}`,\n        quantity,\n        unitPrice,\n        discount,\n        taxRate,\n        amount,\n      });\n      \n      subtotal += amount;\n    }\n    \n    const taxAmount = subtotal * 0.05;\n    const globalDiscount = randomFloat(0, subtotal * 0.05, 2);\n    const totalAmount = subtotal + taxAmount - globalDiscount;\n    \n    // Payment amounts based on status\n    let amountPaid = 0;\n    if (paymentStatus === 'fully_paid') {\n      amountPaid = totalAmount;\n    } else if (paymentStatus === 'partially_paid') {\n      amountPaid = randomFloat(totalAmount * 0.2, totalAmount * 0.8, 2);\n    }\n    \n    const balanceDue = totalAmount - amountPaid;\n    \n    // Generate payments if amount paid\n    const payments = [];\n    if (amountPaid > 0) {\n      const paymentMethods = ['bank_transfer', 'cheque', 'cash', 'credit_card'];\n      const paymentCount = paymentStatus === 'fully_paid' ? randomInt(1, 2) : 1;\n      let remainingAmount = amountPaid;\n      \n      for (let k = 0; k < paymentCount && remainingAmount > 0; k++) {\n        const paymentAmount = k === paymentCount - 1 ? remainingAmount : \n          randomFloat(remainingAmount * 0.3, remainingAmount * 0.7, 2);\n        remainingAmount -= paymentAmount;\n        \n        payments.push({\n          id: k + 1,\n          paymentDate: formatDate(randomDate(Math.floor((Date.now() - invoiceDate.getTime()) / (1000 * 60 * 60 * 24)), 0)),\n          amount: paymentAmount,\n          method: randomChoice(paymentMethods),\n          reference: `TXN-UAE-2024-${randomInt(100000, 999999)}`,\n          notes: k === 0 ? 'Payment received' : 'Additional payment',\n        });\n      }\n    }\n\n    invoices.push({\n      id: i,\n      invoiceNumber: `INV-${invoiceDate.getFullYear()}-${String(i).padStart(4, '0')}`,\n      customerId: customer.id,\n      customerDetails: {\n        name: customer.name,\n        email: customer.email,\n        phone: customer.phone,\n        trn: customer.trn,\n        address: customer.address,\n      },\n      invoiceDate: formatDate(invoiceDate),\n      dueDate: formatDate(dueDate),\n      status,\n      paymentStatus,\n      currency: 'AED',\n      subtotal,\n      taxRate: 5.0,\n      taxAmount,\n      discount: globalDiscount,\n      totalAmount,\n      amountPaid,\n      balanceDue,\n      paymentTerms: customer.paymentTerms,\n      items,\n      payments,\n      notes: randomChoice(['', '', 'Please make payment within terms', 'Priority delivery requested']),\n      internalNotes: randomChoice(['', '', 'VIP customer', 'Rush order']),\n      purchaseOrderNumber: `PO-${customer.name.substring(0, 3).toUpperCase()}-2024-${randomInt(100, 999)}`,\n      purchaseOrderDate: formatDate(new Date(invoiceDate.getTime() - 7 * 24 * 60 * 60 * 1000)),\n      deliveryDate: formatDate(new Date(invoiceDate.getTime() + randomInt(3, 14) * 24 * 60 * 60 * 1000)),\n      deliveryAddress: 'Same as billing',\n      salesPerson: randomChoice(arabicNames),\n      commissionRate: 2.5,\n      commissionAmount: totalAmount * 0.025,\n      commissionNotes: 'Standard 2.5% commission',\n      pricelistId: 1,\n      pricelistName: 'Standard Retail Pricing',\n      companyId: 1,\n      createdBy: 1,\n      updatedBy: 1,\n      createdAt: formatDateTime(invoiceDate),\n      updatedAt: formatDateTime(randomDate(Math.max(0, Math.floor((Date.now() - invoiceDate.getTime()) / (1000 * 60 * 60 * 24)) - 7), 0)),\n      pdfGenerated: status !== 'draft',\n      pdfGeneratedAt: status !== 'draft' ? formatDateTime(invoiceDate) : null,\n    });\n  }\n\n  return invoices;\n}\n\nconst invoices = generateInvoices(200, customers, products);\nfs.writeFileSync(\n  path.join(dataDir, 'invoices.json'),\n  JSON.stringify(invoices, null, 2),\n);\n\nconsole.log(`   - Draft: ${invoices.filter(i => i.status === 'draft').length}`);\nconsole.log(`   - Proforma: ${invoices.filter(i => i.status === 'proforma').length}`);\nconsole.log(`   - Sent: ${invoices.filter(i => i.status === 'sent').length}`);\nconsole.log(`   - Issued: ${invoices.filter(i => i.status === 'issued').length}`);\nconsole.log(`   - Overdue: ${invoices.filter(i => i.status === 'overdue').length}`);\nconsole.log(`   - Cancelled: ${invoices.filter(i => i.status === 'cancelled').length}`);\nconsole.log(`   - Unpaid: ${invoices.filter(i => i.paymentStatus === 'unpaid').length}`);\nconsole.log(`   - Partially Paid: ${invoices.filter(i => i.paymentStatus === 'partially_paid').length}`);\nconsole.log(`   - Fully Paid: ${invoices.filter(i => i.paymentStatus === 'fully_paid').length}`);\n\nconsole.log('\\n≡ƒÄë Phase 1 Complete: Customers (50) + Products (100) + Invoices (200) = 350 records');\n","usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\mock\\services\\mockCompanyService.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\mock\\services\\mockCustomerService.js","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'config' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":76,"column":28,"nodeType":"Identifier","messageId":"unusedVar","endLine":76,"endColumn":34}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Mock Customer Service\n */\n\nimport customersData from '../data/customers.json';\n\nconst customers = [...customersData];\nconst delay = (ms = 400) => new Promise(resolve => setTimeout(resolve, ms));\n\nexport const customerService = {\n  async getCustomers(params = {}) {\n    await delay();\n    const { page = 1, limit = 20, search, status } = params;\n    \n    let filtered = [...customers];\n    \n    if (status && status !== 'all') {\n      filtered = filtered.filter(c => c.status === status);\n    }\n    \n    if (search) {\n      const s = search.toLowerCase();\n      filtered = filtered.filter(c =>\n        c.name?.toLowerCase().includes(s) ||\n        c.email?.toLowerCase().includes(s) ||\n        c.phone?.includes(s),\n      );\n    }\n    \n    const total = filtered.length;\n    const totalPages = Math.ceil(total / limit);\n    const start = (page - 1) * limit;\n    const paginatedData = filtered.slice(start, start + limit);\n    \n    return {\n      customers: paginatedData,\n      pagination: { total, page: parseInt(page), limit: parseInt(limit), totalPages },\n    };\n  },\n\n  async getCustomer(id) {\n    await delay();\n    const customer = customers.find(c => c.id === parseInt(id));\n    if (!customer) {\n      throw { response: { status: 404, data: { error: 'Customer not found' } } };\n    }\n    return customer;\n  },\n\n  async createCustomer(customerData) {\n    await delay();\n    const newCustomer = {\n      id: Math.max(...customers.map(c => c.id), 0) + 1,\n      ...customerData,\n      createdAt: new Date().toISOString(),\n      updatedAt: new Date().toISOString(),\n    };\n    customers.push(newCustomer);\n    return newCustomer;\n  },\n\n  async updateCustomer(id, customerData) {\n    await delay();\n    const index = customers.findIndex(c => c.id === parseInt(id));\n    if (index === -1) {\n      throw { response: { status: 404, data: { error: 'Customer not found' } } };\n    }\n    customers[index] = {\n      ...customers[index],\n      ...customerData,\n      updatedAt: new Date().toISOString(),\n    };\n    return customers[index];\n  },\n\n  async deleteCustomer(id, config = {}) {\n    await delay();\n    const index = customers.findIndex(c => c.id === parseInt(id));\n    if (index === -1) {\n      throw { response: { status: 404, data: { error: 'Customer not found' } } };\n    }\n    customers.splice(index, 1);\n    return { message: 'Customer deleted successfully' };\n  },\n\n  async archiveCustomer(id) {\n    await delay();\n    const index = customers.findIndex(c => c.id === parseInt(id));\n    if (index === -1) {\n      throw { response: { status: 404, data: { error: 'Customer not found' } } };\n    }\n    customers[index].status = 'archived';\n    customers[index].updatedAt = new Date().toISOString();\n    return customers[index];\n  },\n\n  async restoreCustomer(id) {\n    await delay();\n    const index = customers.findIndex(c => c.id === parseInt(id));\n    if (index === -1) {\n      throw { response: { status: 404, data: { error: 'Customer not found' } } };\n    }\n    customers[index].status = 'active';\n    customers[index].updatedAt = new Date().toISOString();\n    return customers[index];\n  },\n};\n\nexport default customerService;\n","usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\mock\\services\\mockInvoiceService.js","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'customersData' is defined but never used. Allowed unused vars must match /^_/u.","line":8,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":21},{"ruleId":"no-unused-vars","severity":1,"message":"'productsData' is defined but never used. Allowed unused vars must match /^_/u.","line":9,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":20}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Mock Invoice Service\n * Simulates API calls for invoices without backend/database\n * Supports filtering, pagination, search, sorting, CRUD operations\n */\n\nimport invoicesData from '../data/invoices.json';\nimport customersData from '../data/customers.json';\nimport productsData from '../data/products.json';\n\n// In-memory copy of invoices (allows create/update/delete without affecting JSON file)\nlet invoices = [...invoicesData];\n\n// Simulate network delay\nconst delay = (ms = 500) => new Promise(resolve => setTimeout(resolve, ms));\n\n/**\n * Get list of invoices with filtering, pagination, search, sorting\n */\nexport const getInvoices = async (params = {}) => {\n  await delay();\n  \n  const {\n    page = 1,\n    limit = 20,\n    status,\n    paymentStatus,\n    customerId,\n    search,\n    sortBy = 'createdAt',\n    sortOrder = 'desc',\n    startDate,\n    endDate,\n  } = params;\n  \n  let filtered = [...invoices];\n  \n  // Apply filters\n  if (status && status !== 'all' && status !== '') {\n    filtered = filtered.filter(inv => inv.status === status);\n  }\n  \n  if (paymentStatus && paymentStatus !== 'all' && paymentStatus !== '') {\n    filtered = filtered.filter(inv => inv.paymentStatus === paymentStatus);\n  }\n  \n  if (customerId && customerId !== '0' && customerId !== 0) {\n    filtered = filtered.filter(inv => inv.customerId === parseInt(customerId));\n  }\n  \n  // Apply date range filter\n  if (startDate) {\n    filtered = filtered.filter(inv => new Date(inv.invoiceDate) >= new Date(startDate));\n  }\n  \n  if (endDate) {\n    filtered = filtered.filter(inv => new Date(inv.invoiceDate) <= new Date(endDate));\n  }\n  \n  // Apply search\n  if (search) {\n    const searchLower = search.toLowerCase();\n    filtered = filtered.filter(inv =>\n      inv.invoiceNumber.toLowerCase().includes(searchLower) ||\n      inv.customerDetails.name.toLowerCase().includes(searchLower) ||\n      inv.notes?.toLowerCase().includes(searchLower),\n    );\n  }\n  \n  // Apply sorting\n  filtered.sort((a, b) => {\n    let aVal = a[sortBy];\n    let bVal = b[sortBy];\n    \n    if (sortBy === 'createdAt' || sortBy === 'invoiceDate' || sortBy === 'dueDate') {\n      aVal = new Date(aVal).getTime();\n      bVal = new Date(bVal).getTime();\n    }\n    \n    if (sortOrder === 'asc') {\n      return aVal > bVal ? 1 : -1;\n    } else {\n      return aVal < bVal ? 1 : -1;\n    }\n  });\n  \n  // Calculate pagination\n  const total = filtered.length;\n  const totalPages = Math.ceil(total / limit);\n  const start = (page - 1) * limit;\n  const paginatedData = filtered.slice(start, start + limit);\n  \n  const result = {\n    invoices: paginatedData,\n    pagination: {\n      total,\n      page: parseInt(page),\n      limit: parseInt(limit),\n      totalPages,\n    },\n  };\n  \n  return result;\n};\n\n/**\n * Get single invoice by ID\n */\nexport const getInvoice = async (id) => {\n  await delay();\n  \n  const invoice = invoices.find(inv => inv.id === parseInt(id));\n  if (!invoice) {\n    throw {\n      response: {\n        status: 404,\n        data: { error: 'Invoice not found' },\n      },\n    };\n  }\n  \n  return invoice;\n};\n\n/**\n * Create new invoice\n */\nexport const createInvoice = async (data) => {\n  await delay();\n  \n  const newInvoice = {\n    id: Math.max(...invoices.map(i => i.id), 0) + 1,\n    ...data,\n    createdAt: new Date().toISOString(),\n    updatedAt: new Date().toISOString(),\n    pdfGenerated: false,\n    pdfGeneratedAt: null,\n  };\n  \n  invoices.push(newInvoice);\n  return newInvoice;\n};\n\n/**\n * Update existing invoice\n */\nexport const updateInvoice = async (id, data) => {\n  await delay();\n  \n  const index = invoices.findIndex(inv => inv.id === parseInt(id));\n  if (index === -1) {\n    throw {\n      response: {\n        status: 404,\n        data: { error: 'Invoice not found' },\n      },\n    };\n  }\n  \n  invoices[index] = {\n    ...invoices[index],\n    ...data,\n    updatedAt: new Date().toISOString(),\n  };\n  \n  return invoices[index];\n};\n\n/**\n * Delete invoice\n */\nexport const deleteInvoice = async (id) => {\n  await delay();\n  \n  const index = invoices.findIndex(inv => inv.id === parseInt(id));\n  if (index === -1) {\n    throw {\n      response: {\n        status: 404,\n        data: { error: 'Invoice not found' },\n      },\n    };\n  }\n  \n  invoices.splice(index, 1);\n  return { message: 'Invoice deleted successfully' };\n};\n\n/**\n * Add payment to invoice\n */\nexport const addPayment = async (invoiceId, paymentData) => {\n  await delay();\n  \n  const index = invoices.findIndex(inv => inv.id === parseInt(invoiceId));\n  if (index === -1) {\n    throw {\n      response: {\n        status: 404,\n        data: { error: 'Invoice not found' },\n      },\n    };\n  }\n  \n  const payment = {\n    id: (invoices[index].payments?.length || 0) + 1,\n    ...paymentData,\n    paymentDate: paymentData.paymentDate || new Date().toISOString().split('T')[0],\n  };\n  \n  if (!invoices[index].payments) {\n    invoices[index].payments = [];\n  }\n  \n  invoices[index].payments.push(payment);\n  \n  // Update payment status and amounts\n  const totalPaid = invoices[index].payments.reduce((sum, p) => sum + p.amount, 0);\n  invoices[index].amountPaid = totalPaid;\n  invoices[index].balanceDue = invoices[index].totalAmount - totalPaid;\n  \n  if (totalPaid >= invoices[index].totalAmount) {\n    invoices[index].paymentStatus = 'fully_paid';\n  } else if (totalPaid > 0) {\n    invoices[index].paymentStatus = 'partially_paid';\n  } else {\n    invoices[index].paymentStatus = 'unpaid';\n  }\n  \n  invoices[index].updatedAt = new Date().toISOString();\n  \n  return invoices[index];\n};\n\n/**\n * Get invoice statistics for dashboard\n */\nexport const getInvoiceStats = async () => {\n  await delay(300);\n  \n  const now = new Date();\n  const sevenDaysFromNow = new Date(now.getTime() + 7 * 24 * 60 * 60 * 1000);\n  \n  const stats = {\n    outstanding: invoices\n      .filter(inv => inv.paymentStatus !== 'fully_paid' && inv.status !== 'cancelled')\n      .reduce((sum, inv) => sum + inv.balanceDue, 0),\n    \n    overdue: {\n      amount: invoices\n        .filter(inv => new Date(inv.dueDate) < now && inv.balanceDue > 0)\n        .reduce((sum, inv) => sum + inv.balanceDue, 0),\n      count: invoices.filter(inv => new Date(inv.dueDate) < now && inv.balanceDue > 0).length,\n    },\n    \n    dueIn7Days: {\n      amount: invoices\n        .filter(inv => {\n          const dueDate = new Date(inv.dueDate);\n          return dueDate >= now && dueDate <= sevenDaysFromNow && inv.balanceDue > 0;\n        })\n        .reduce((sum, inv) => sum + inv.balanceDue, 0),\n      count: invoices.filter(inv => {\n        const dueDate = new Date(inv.dueDate);\n        return dueDate >= now && dueDate <= sevenDaysFromNow && inv.balanceDue > 0;\n      }).length,\n    },\n    \n    paid: invoices\n      .filter(inv => inv.paymentStatus === 'fully_paid')\n      .reduce((sum, inv) => sum + inv.totalAmount, 0),\n    \n    total: invoices.length,\n    totalAmount: invoices.reduce((sum, inv) => sum + inv.totalAmount, 0),\n  };\n  \n  return stats;\n};\n\n/**\n * Reset mock data to original state (useful for testing)\n */\nexport const resetMockData = () => {\n  invoices = [...invoicesData];\n};\n\n// Default export\nexport default {\n  getInvoices,\n  getInvoice,\n  createInvoice,\n  updateInvoice,\n  deleteInvoice,\n  addPayment,\n  getInvoiceStats,\n  resetMockData,\n};\n","usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\mock\\services\\mockPayablesService.js","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'dateType' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":12,"column":35,"nodeType":"Identifier","messageId":"unusedVar","endLine":12,"endColumn":43},{"ruleId":"no-unused-vars","severity":1,"message":"'invoiceId' is defined but never used. Allowed unused args must match /^_/u.","line":28,"column":23,"nodeType":"Identifier","messageId":"unusedVar","endLine":28,"endColumn":32},{"ruleId":"no-unused-vars","severity":1,"message":"'paymentData' is defined but never used. Allowed unused args must match /^_/u.","line":28,"column":34,"nodeType":"Identifier","messageId":"unusedVar","endLine":28,"endColumn":45},{"ruleId":"no-unused-vars","severity":1,"message":"'invoiceId' is defined but never used. Allowed unused args must match /^_/u.","line":33,"column":27,"nodeType":"Identifier","messageId":"unusedVar","endLine":33,"endColumn":36}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Mock Payables/Receivables Service\n */\n\nimport invoicesData from '../data/invoices.json';\n\nconst delay = (ms = 300) => new Promise(resolve => setTimeout(resolve, ms));\n\nexport const payablesService = {\n  async getInvoices(params = {}) {\n    await delay();\n    const { page = 1, limit = 20, dateType } = params;\n    \n    // Use invoice data\n    const filtered = [...invoicesData];\n    \n    const total = filtered.length;\n    const totalPages = Math.ceil(total / limit);\n    const start = (page - 1) * limit;\n    const paginatedData = filtered.slice(start, start + limit);\n    \n    return {\n      invoices: paginatedData,\n      pagination: { total, page: parseInt(page), limit: parseInt(limit), totalPages },\n    };\n  },\n\n  async recordPayment(invoiceId, paymentData) {\n    await delay();\n    return { message: 'Payment recorded successfully' };\n  },\n\n  async getPaymentHistory(invoiceId) {\n    await delay();\n    return { payments: [] };\n  },\n};\n\nexport const PAYMENT_MODES = [\n  { value: 'cash', label: 'Cash' },\n  { value: 'cheque', label: 'Cheque' },\n  { value: 'bank_transfer', label: 'Bank Transfer' },\n  { value: 'upi', label: 'UPI' },\n  { value: 'card', label: 'Card' },\n];\n\nexport default payablesService;\n","usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\mock\\services\\mockProductService.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\mock\\services\\mockQuotationService.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\pages\\__tests__\\CreditNoteForm.smoke.test.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\pages\\__tests__\\CreditNoteForm.test.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\pages\\__tests__\\CreditNoteList.smoke.test.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\pages\\__tests__\\InvoiceList.actions.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\pages\\__tests__\\InvoiceList.pagination.contract.test.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\pages\\inventory\\index.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\pages\\invoiceActionsConfig.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\pages\\payments\\index.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\pages\\purchases\\index.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\pages\\warehouses\\index.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\services\\advancePaymentService.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\services\\analyticsService.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\services\\api.js","messages":[{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":190,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":190,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[5267,5342],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":199,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":199,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[5548,5701],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":225,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":225,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[6608,6684],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":230,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":230,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[6846,6913],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":242,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":242,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[7218,7277],"text":""},"desc":"Remove the console.log()."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { apiService } from './axiosApi';\r\n\r\nconst API_BASE_URL = import.meta.env.VITE_API_BASE_URL;\r\n\r\nclass ApiClient {\r\n  constructor() {\r\n    this.baseURL = API_BASE_URL;\r\n    this.defaultHeaders = {\r\n      'Content-Type': 'application/json',\r\n    };\r\n  }\r\n\r\n  setAuthHeader(token) {\r\n    this.defaultHeaders['Authorization'] = `Bearer ${token}`;\r\n    // Also set on axios-based service so interceptors use it\r\n    apiService.setAuthToken(token);\r\n  }\r\n\r\n  removeAuthHeader() {\r\n    delete this.defaultHeaders['Authorization'];\r\n    apiService.removeAuthToken();\r\n  }\r\n\r\n  // Deprecated fetch-based request kept for backward compatibility if needed\r\n  // New code should use the axios-based methods below which benefit from interceptors\r\n  async request(endpoint, options = {}) {\r\n    // Delegate to axios-based apiService\r\n    const method = (options.method || 'GET').toUpperCase();\r\n    const data =\r\n      options.body instanceof FormData\r\n        ? options.body\r\n        : typeof options.body === 'string'\r\n          ? JSON.parse(options.body)\r\n          : options.body;\r\n    switch (method) {\r\n      case 'GET':\r\n        return apiService.get(endpoint);\r\n      case 'POST':\r\n        return apiService.post(endpoint, data);\r\n      case 'PUT':\r\n        return apiService.put(endpoint, data);\r\n      case 'PATCH':\r\n        return apiService.patch(endpoint, data);\r\n      case 'DELETE':\r\n        return apiService.delete(endpoint);\r\n      default:\r\n        return apiService.request({ method, url: endpoint, data });\r\n    }\r\n  }\r\n\r\n  async get(endpoint, params = {}) {\r\n    return apiService.get(endpoint, params);\r\n  }\r\n\r\n  async post(endpoint, data) {\r\n    return apiService.post(endpoint, data);\r\n  }\r\n\r\n  async put(endpoint, data) {\r\n    return apiService.put(endpoint, data);\r\n  }\r\n\r\n  async patch(endpoint, data) {\r\n    return apiService.patch(endpoint, data);\r\n  }\r\n\r\n  async delete(endpoint, config = {}) {\r\n    return apiService.delete(endpoint, config);\r\n  }\r\n}\r\n\r\nexport const apiClient = new ApiClient();\r\n\r\n// Delivery Notes API methods\r\nexport const deliveryNotesAPI = {\r\n  // Get all delivery notes with pagination and filters\r\n  getAll: (params = {}) => {\r\n    return apiClient.get('/delivery-notes', params);\r\n  },\r\n\r\n  // Get delivery note by ID\r\n  getById: (id) => {\r\n    return apiClient.get(`/delivery-notes/${id}`);\r\n  },\r\n\r\n  // Create delivery note from invoice\r\n  create: (deliveryNoteData) => {\r\n    return apiClient.post('/delivery-notes', deliveryNoteData);\r\n  },\r\n\r\n  // Update delivery note (full update)\r\n  update: (id, deliveryNoteData) => {\r\n    return apiClient.put(`/delivery-notes/${id}`, deliveryNoteData);\r\n  },\r\n\r\n  // Update delivery quantities (partial delivery)\r\n  updateDelivery: (deliveryNoteId, itemId, deliveryData) => {\r\n    return apiClient.patch(\r\n      `/delivery-notes/${deliveryNoteId}/items/${itemId}/deliver`,\r\n      deliveryData,\r\n    );\r\n  },\r\n\r\n  // Update delivery note status\r\n  updateStatus: (id, status, notes = '') => {\r\n    return apiClient.patch(`/delivery-notes/${id}/status`, { status, notes });\r\n  },\r\n\r\n  // Delete delivery note\r\n  delete: (id) => {\r\n    return apiClient.delete(`/delivery-notes/${id}`);\r\n  },\r\n\r\n  // Get next delivery note number\r\n  getNextNumber: () => {\r\n    return apiClient.get('/delivery-notes/number/next');\r\n  },\r\n\r\n  // Generate and download PDF\r\n  downloadPDF: async (id) => {\r\n    // Use axios-based service to leverage interceptors and auth headers\r\n    const blob = await apiService.request({\r\n      method: 'GET',\r\n      url: `/delivery-notes/${id}/pdf`,\r\n      responseType: 'blob',\r\n    });\r\n    const downloadUrl = window.URL.createObjectURL(blob);\r\n\r\n    // Get delivery note number for filename\r\n    const deliveryNote = await deliveryNotesAPI.getById(id);\r\n    const filename = `DN-${deliveryNote.deliveryNoteNumber || deliveryNote.delivery_note_number || id}.pdf`;\r\n\r\n    // Create download link\r\n    const link = document.createElement('a');\r\n    link.href = downloadUrl;\r\n    link.download = filename;\r\n    document.body.appendChild(link);\r\n    link.click();\r\n    document.body.removeChild(link);\r\n\r\n    // Clean up\r\n    window.URL.revokeObjectURL(downloadUrl);\r\n  },\r\n};\r\n\r\n// Enhanced Invoices API methods\r\nexport const invoicesAPI = {\r\n  // Get all invoices with pagination and filters\r\n  getAll: (params = {}) => {\r\n    return apiClient.get('/invoices', params);\r\n  },\r\n\r\n  // Get invoice by ID\r\n  getById: (id) => {\r\n    return apiClient.get(`/invoices/${id}`);\r\n  },\r\n\r\n  // Create invoice\r\n  create: (invoiceData) => {\r\n    return apiClient.post('/invoices', invoiceData);\r\n  },\r\n\r\n  // Update invoice\r\n  update: (id, invoiceData) => {\r\n    return apiClient.put(`/invoices/${id}`, invoiceData);\r\n  },\r\n\r\n  // Update invoice status\r\n  updateStatus: (id, status) => {\r\n    return apiClient.patch(`/invoices/${id}/status`, { status });\r\n  },\r\n\r\n  // Delete invoice\r\n  delete: (id) => {\r\n    return apiClient.delete(`/invoices/${id}`);\r\n  },\r\n\r\n  // Get next invoice number\r\n  getNextNumber: () => {\r\n    return apiClient.get('/invoices/number/next');\r\n  },\r\n\r\n  // Get analytics\r\n  getAnalytics: (params = {}) => {\r\n    return apiClient.get('/invoices/analytics', params);\r\n  },\r\n\r\n  // Generate and download PDF\r\n  downloadPDF: async (id) => {\r\n    console.log('[invoicesAPI.downloadPDF] Starting PDF download for id:', id);\r\n\r\n    const blob = await apiService.request({\r\n      method: 'GET',\r\n      url: `/invoices/${id}/pdf`,\r\n      responseType: 'blob',\r\n      timeout: 60000, // 60 seconds for PDF generation\r\n    });\r\n\r\n    console.log('[invoicesAPI.downloadPDF] Received blob:', {\r\n      type: blob?.type,\r\n      size: blob?.size,\r\n      isBlob: blob instanceof Blob,\r\n    });\r\n\r\n    // Check if the response is actually a PDF or an error\r\n    if (!blob || !(blob instanceof Blob)) {\r\n      console.error('[invoicesAPI.downloadPDF] Response is not a blob:', blob);\r\n      throw new Error('Invalid response from server - expected PDF blob');\r\n    }\r\n\r\n    // If the blob is JSON (error response), parse and throw\r\n    if (blob.type === 'application/json') {\r\n      const errorText = await blob.text();\r\n      console.error('[invoicesAPI.downloadPDF] Server returned error JSON:', errorText);\r\n      const errorData = JSON.parse(errorText);\r\n      throw new Error(errorData.message || errorData.error || 'PDF generation failed');\r\n    }\r\n\r\n    // Verify it's a PDF\r\n    if (blob.type !== 'application/pdf' && blob.size < 1000) {\r\n      console.warn('[invoicesAPI.downloadPDF] Unexpected blob type:', blob.type);\r\n    }\r\n\r\n    const downloadUrl = window.URL.createObjectURL(blob);\r\n    console.log('[invoicesAPI.downloadPDF] Created download URL:', downloadUrl);\r\n\r\n    // Get invoice number for filename\r\n    const invoice = await invoicesAPI.getById(id);\r\n    const filename = `invoice-${invoice.invoiceNumber}.pdf`;\r\n    console.log('[invoicesAPI.downloadPDF] Downloading as:', filename);\r\n\r\n    // Create download link\r\n    const link = document.createElement('a');\r\n    link.href = downloadUrl;\r\n    link.download = filename;\r\n    document.body.appendChild(link);\r\n    link.click();\r\n    document.body.removeChild(link);\r\n\r\n    // Clean up\r\n    window.URL.revokeObjectURL(downloadUrl);\r\n    console.log('[invoicesAPI.downloadPDF] Download complete');\r\n  },\r\n};\r\n\r\n// Purchase Orders API methods\r\nexport const purchaseOrdersAPI = {\r\n  // Get all purchase orders with pagination and filters\r\n  getAll: (params = {}) => {\r\n    return apiClient.get('/purchase-orders', params);\r\n  },\r\n\r\n  // Get purchase order by ID\r\n  getById: (id) => {\r\n    return apiClient.get(`/purchase-orders/${id}`);\r\n  },\r\n\r\n  // Create purchase order\r\n  create: (poData) => {\r\n    return apiClient.post('/purchase-orders', poData);\r\n  },\r\n\r\n  // Update purchase order\r\n  update: (id, poData) => {\r\n    return apiClient.put(`/purchase-orders/${id}`, poData);\r\n  },\r\n  // Update only transit status (if backend supports it)\r\n  updateTransitStatus: (id, transit_status) => {\r\n    return apiClient.patch(`/purchase-orders/${id}/transit-status`, {\r\n      transit_status,\r\n    });\r\n  },\r\n\r\n  // Update purchase order status\r\n  updateStatus: (id, status) => {\r\n    return apiClient.patch(`/purchase-orders/${id}/status`, { status });\r\n  },\r\n\r\n  // Update purchase order stock status\r\n  updateStockStatus: (id, stock_status) => {\r\n    return apiClient.patch(`/purchase-orders/${id}/stock-status`, {\r\n      stock_status,\r\n    });\r\n  },\r\n\r\n  // Delete purchase order\r\n  delete: (id) => {\r\n    return apiClient.delete(`/purchase-orders/${id}`);\r\n  },\r\n\r\n  // Get next PO number\r\n  getNextNumber: () => {\r\n    return apiClient.get('/purchase-orders/number/next');\r\n  },\r\n\r\n  // Get warehouses\r\n  getWarehouses: () => {\r\n    return apiClient.get('/warehouses');\r\n  },\r\n\r\n  // Seed warehouses\r\n  seedWarehouses: () => {\r\n    return apiClient.post('/warehouses/seed');\r\n  },\r\n\r\n  // Generate and download PDF\r\n  downloadPDF: async (id) => {\r\n    // Use the already-imported apiService instead of dynamic import\r\n    // This avoids the Vite warning about mixed static/dynamic imports\r\n    const blob = await apiService.request({\r\n      method: 'GET',\r\n      url: `/purchase-orders/${id}/pdf`,\r\n      responseType: 'blob',\r\n    });\r\n    const blobUrl = window.URL.createObjectURL(blob);\r\n    const a = document.createElement('a');\r\n    a.style.display = 'none';\r\n    a.href = blobUrl;\r\n    a.download = `PurchaseOrder-${id}.pdf`;\r\n    document.body.appendChild(a);\r\n    a.click();\r\n    window.URL.revokeObjectURL(blobUrl);\r\n    document.body.removeChild(a);\r\n  },\r\n};\r\n\r\n// Account Statements API methods\r\nexport const accountStatementsAPI = {\r\n  // Get all account statements with pagination and filters\r\n  getAll: (params = {}) => {\r\n    return apiClient.get('/account-statements', params);\r\n  },\r\n\r\n  // Get account statement by ID\r\n  getById: (id) => {\r\n    return apiClient.get(`/account-statements/${id}`);\r\n  },\r\n\r\n  // Create account statement\r\n  create: (data) => {\r\n    return apiClient.post('/account-statements', data);\r\n  },\r\n\r\n  // Update account statement\r\n  update: (id, data) => {\r\n    return apiClient.put(`/account-statements/${id}`, data);\r\n  },\r\n\r\n  // Delete account statement\r\n  delete: (id) => {\r\n    return apiClient.delete(`/account-statements/${id}`);\r\n  },\r\n\r\n  // Generate and download PDF\r\n  downloadPDF: async (id) => {\r\n    // Use the already-imported apiService instead of dynamic import\r\n    const blob = await apiService.request({\r\n      method: 'GET',\r\n      url: `/account-statements/${id}/pdf`,\r\n      responseType: 'blob',\r\n    });\r\n    const blobUrl = window.URL.createObjectURL(blob);\r\n    const a = document.createElement('a');\r\n    a.style.display = 'none';\r\n    a.href = blobUrl;\r\n    a.download = `AccountStatement-${id}.pdf`;\r\n    document.body.appendChild(a);\r\n    a.click();\r\n    window.URL.revokeObjectURL(blobUrl);\r\n    document.body.removeChild(a);\r\n  },\r\n\r\n  // Generate statement on-the-fly without saving\r\n  generateOnTheFly: async (data) => {\r\n    // Use the already-imported apiService instead of dynamic import\r\n    const blob = await apiService.request({\r\n      method: 'POST',\r\n      url: '/account-statements/generate',\r\n      data,\r\n      responseType: 'blob',\r\n    });\r\n    const blobUrl = window.URL.createObjectURL(blob);\r\n    const a = document.createElement('a');\r\n    a.style.display = 'none';\r\n    a.href = blobUrl;\r\n    const fileName = `Statement-${data.customerId || 'Customer'}-${data.startDate}-to-${data.endDate}.pdf`;\r\n    a.download = fileName;\r\n    document.body.appendChild(a);\r\n    a.click();\r\n    window.URL.revokeObjectURL(blobUrl);\r\n    document.body.removeChild(a);\r\n  },\r\n};\r\n\r\n// Transit API methods\r\nexport const transitAPI = {\r\n  // Get all items in transit\r\n  getAll: (params = {}) => {\r\n    // This combines data from invoices and purchase orders that are in transit\r\n    return apiClient.get('/transit', params);\r\n  },\r\n\r\n  // Get transit tracking for specific item\r\n  getTracking: (type, id) => {\r\n    return apiClient.get(`/transit/${type}/${id}`);\r\n  },\r\n\r\n  // Update transit status\r\n  updateStatus: (type, id, status) => {\r\n    return apiClient.patch(`/transit/${type}/${id}/status`, { status });\r\n  },\r\n};\r\n\r\n// Customers API methods\r\nexport const customersAPI = {\r\n  // Get all customers with pagination and filters\r\n  getAll: (params = {}) => {\r\n    return apiClient.get('/customers', params);\r\n  },\r\n\r\n  // Get customer by ID\r\n  getById: (id) => {\r\n    return apiClient.get(`/customers/${id}`);\r\n  },\r\n\r\n  // Create customer\r\n  create: (customerData) => {\r\n    return apiClient.post('/customers', customerData);\r\n  },\r\n\r\n  // Update customer\r\n  update: (id, customerData) => {\r\n    return apiClient.put(`/customers/${id}`, customerData);\r\n  },\r\n\r\n  // Delete customer\r\n  delete: (id) => {\r\n    return apiClient.delete(`/customers/${id}`);\r\n  },\r\n\r\n  // Search customers\r\n  search: (query) => {\r\n    return apiClient.get('/customers/search', { query });\r\n  },\r\n};\r\n\r\n// Products API methods\r\nexport const productsAPI = {\r\n  // Get all products with pagination and filters\r\n  getAll: (params = {}) => {\r\n    return apiClient.get('/products', params);\r\n  },\r\n\r\n  // Get product by ID\r\n  getById: (id) => {\r\n    return apiClient.get(`/products/${id}`);\r\n  },\r\n\r\n  // Create product\r\n  create: (productData) => {\r\n    return apiClient.post('/products', productData);\r\n  },\r\n\r\n  // Update product\r\n  update: (id, productData) => {\r\n    return apiClient.put(`/products/${id}`, productData);\r\n  },\r\n\r\n  // Delete product\r\n  delete: (id) => {\r\n    return apiClient.delete(`/products/${id}`);\r\n  },\r\n\r\n  // Search products\r\n  search: (query) => {\r\n    return apiClient.get('/products/search', { query });\r\n  },\r\n\r\n  // Get product categories\r\n  getCategories: () => {\r\n    return apiClient.get('/products/categories');\r\n  },\r\n\r\n  // Get products by category\r\n  getByCategory: (category) => {\r\n    return apiClient.get(`/products/category/${category}`);\r\n  },\r\n};\r\n\r\n// Quotations API methods\r\nexport const quotationsAPI = {\r\n  // Get all quotations with pagination and filters\r\n  getAll: (params = {}) => {\r\n    return apiClient.get('/quotations', params);\r\n  },\r\n\r\n  // Get quotation by ID\r\n  getById: (id) => {\r\n    return apiClient.get(`/quotations/${id}`);\r\n  },\r\n\r\n  // Create quotation\r\n  create: (data) => {\r\n    return apiClient.post('/quotations', data);\r\n  },\r\n\r\n  // Update quotation\r\n  update: (id, data) => {\r\n    return apiClient.put(`/quotations/${id}`, data);\r\n  },\r\n\r\n  // Delete quotation\r\n  delete: (id) => {\r\n    return apiClient.delete(`/quotations/${id}`);\r\n  },\r\n\r\n  // Update quotation status\r\n  updateStatus: (id, status) => {\r\n    return apiClient.patch(`/quotations/${id}/status`, { status });\r\n  },\r\n\r\n  // Convert quotation to invoice\r\n  convertToInvoice: (id) => {\r\n    return apiClient.post(`/quotations/${id}/convert-to-invoice`);\r\n  },\r\n\r\n  // Get next quotation number\r\n  getNextNumber: () => {\r\n    return apiClient.get('/quotations/number/next');\r\n  },\r\n\r\n  // Generate and download PDF\r\n  downloadPDF: async (id) => {\r\n    // Use the already-imported apiService instead of dynamic import\r\n    const blob = await apiService.request({\r\n      method: 'GET',\r\n      url: `/quotations/${id}/pdf`,\r\n      responseType: 'blob',\r\n    });\r\n    const blobUrl = window.URL.createObjectURL(blob);\r\n    const a = document.createElement('a');\r\n    a.style.display = 'none';\r\n    a.href = blobUrl;\r\n    a.download = `Quotation-${id}.pdf`;\r\n    document.body.appendChild(a);\r\n    a.click();\r\n    window.URL.revokeObjectURL(blobUrl);\r\n    document.body.removeChild(a);\r\n  },\r\n};\r\n\r\n// Suppliers API methods\r\n// Export apiClient as api for import/export services\r\nexport const api = apiClient;\r\n\r\nexport const suppliersAPI = {\r\n  // Get all suppliers with pagination and filters\r\n  getAll: (params = {}) => {\r\n    return apiClient.get('/suppliers', params);\r\n  },\r\n\r\n  // Get supplier by ID\r\n  getById: (id) => {\r\n    return apiClient.get(`/suppliers/${id}`);\r\n  },\r\n\r\n  // Create supplier\r\n  create: (supplierData) => {\r\n    return apiClient.post('/suppliers', supplierData);\r\n  },\r\n\r\n  // Update supplier\r\n  update: (id, supplierData) => {\r\n    return apiClient.put(`/suppliers/${id}`, supplierData);\r\n  },\r\n\r\n  // Delete supplier\r\n  delete: (id) => {\r\n    return apiClient.delete(`/suppliers/${id}`);\r\n  },\r\n\r\n  // Search suppliers\r\n  search: (query) => {\r\n    return apiClient.get('/suppliers/search', { query });\r\n  },\r\n\r\n  // Get suppliers by category\r\n  getByCategory: (category) => {\r\n    return apiClient.get(`/suppliers/category/${category}`);\r\n  },\r\n\r\n  // Update supplier status\r\n  updateStatus: (id, status) => {\r\n    return apiClient.patch(`/suppliers/${id}/status`, { status });\r\n  },\r\n\r\n  // Get supplier analytics\r\n  getAnalytics: (id) => {\r\n    return apiClient.get(`/suppliers/${id}/analytics`);\r\n  },\r\n\r\n  // Get trade license status\r\n  getTradeLicenseStatus: (id) => {\r\n    return apiClient.get(`/suppliers/${id}/trade-license-status`);\r\n  },\r\n\r\n  // Get expiring trade licenses\r\n  getExpiringTradeLicenses: (days = 30) => {\r\n    return apiClient.get(`/suppliers/trade-license/expiring?days=${days}`);\r\n  },\r\n\r\n  // Add contact history\r\n  addContactHistory: (id, historyData) => {\r\n    return apiClient.post(`/suppliers/${id}/contact-history`, historyData);\r\n  },\r\n\r\n  // Upload suppliers from file\r\n  uploadFile: (file) => {\r\n    const formData = new FormData();\r\n    formData.append('file', file);\r\n    return apiClient.post('/suppliers/upload', formData, {\r\n      headers: {\r\n        'Content-Type': 'multipart/form-data',\r\n      },\r\n    });\r\n  },\r\n\r\n  // Download upload template\r\n  downloadTemplate: () => {\r\n    return apiClient.get('/suppliers/upload/template', {\r\n      responseType: 'blob',\r\n    });\r\n  },\r\n};\r\n\r\n// Payments API methods\r\nexport const paymentsAPI = {\r\n  // Get all payments with pagination and filters\r\n  getAll: (params = {}) => {\r\n    return apiClient.get('/payments', params);\r\n  },\r\n\r\n  // Get payment by ID\r\n  getById: (id) => {\r\n    return apiClient.get(`/payments/${id}`);\r\n  },\r\n\r\n  // Get payments by invoice ID\r\n  getByInvoice: (invoiceId) => {\r\n    return apiClient.get(`/payments/invoice/${invoiceId}`);\r\n  },\r\n\r\n  // Create payment\r\n  create: (paymentData) => {\r\n    return apiClient.post('/payments', paymentData);\r\n  },\r\n\r\n  // Void payment\r\n  void: (id, voidReason) => {\r\n    return apiClient.post(`/payments/${id}/void`, { voidReason });\r\n  },\r\n\r\n  // Restore payment\r\n  restore: (id) => {\r\n    return apiClient.post(`/payments/${id}/restore`);\r\n  },\r\n};\r\n\r\n// Export apiClient as default for backward compatibility\r\nexport default apiClient;\r\n","usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\services\\authService.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\services\\axiosApi.js","messages":[{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":64,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":64,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[2158,2241],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":65,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":65,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[2247,2307],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":66,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":66,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[2313,2389],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":68,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":68,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[2439,2514],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":93,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":93,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[3263,3317],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":100,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":100,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[3509,3562],"text":""},"desc":"Remove the console.log()."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import axios from 'axios';\r\n\r\n// Resolve API base URL with a LAN-safe fallback.\r\n// If the env points to localhost but the app is accessed via a LAN IP/hostname,\r\n// use relative \"/api\" so the Vite proxy handles requests correctly.\r\nlet API_BASE_URL = import.meta.env.VITE_API_BASE_URL || '/api';\r\ntry {\r\n  const host = typeof window !== 'undefined' ? window.location.hostname : '';\r\n  if (\r\n    API_BASE_URL && /localhost|127\\.0\\.0\\.1/.test(API_BASE_URL) &&\r\n    host && !/^(localhost|127\\.0\\.0\\.1)$/.test(host)\r\n  ) {\r\n    API_BASE_URL = '/api';\r\n  }\r\n} catch (_) {\r\n  // no-op; keep configured base URL\r\n}\r\n\r\nconst REFRESH_ENDPOINT = import.meta.env.VITE_REFRESH_ENDPOINT || '/auth/refresh-token';\r\n\r\n// Simple cookie helper (matching GigLabz approach)\r\nconst Cookies = {\r\n  get(name) {\r\n    if (typeof document === 'undefined') return null;\r\n    const match = document.cookie.match(\r\n      new RegExp(`(?:^|; )${  name.replace(/([.$?*|{}()[\\]/+^])/g, '\\\\$1')  }=([^;]*)`),\r\n    );\r\n    return match ? decodeURIComponent(match[1]) : null;\r\n  },\r\n  \r\n  set(name, value, options = {}) {\r\n    if (typeof document === 'undefined') return;\r\n    const { expires = 7, path = '/' } = options;\r\n    const expiresDate = new Date(Date.now() + expires * 864e5).toUTCString();\r\n    document.cookie = `${name}=${encodeURIComponent(value)}; expires=${expiresDate}; path=${path}`;\r\n  },\r\n  \r\n  remove(name, options = {}) {\r\n    if (typeof document === 'undefined') return;\r\n    const { path = '/' } = options;\r\n    document.cookie = `${name}=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=${path}`;\r\n  },\r\n};\r\n\r\n// Create axios instance\r\nconst api = axios.create({\r\n  baseURL: API_BASE_URL,\r\n  timeout: 10000,\r\n  withCredentials: true,\r\n  headers: {\r\n    'Content-Type': 'application/json',\r\n  },\r\n});\r\n\r\n// Request interceptor - adds Bearer token and handles FormData\r\napi.interceptors.request.use((config) => {\r\n  const accessToken = Cookies.get('accessToken');\r\n  if (accessToken) {\r\n    config.headers.Authorization = `Bearer ${accessToken}`;\r\n  }\r\n\r\n  // For FormData, let the browser set the Content-Type with boundary\r\n  if (config.data instanceof FormData) {\r\n    console.log('[axios interceptor] Detected FormData, deleting Content-Type header');\r\n    console.log('[axios interceptor] Request URL:', config.url);\r\n    console.log('[axios interceptor] Headers before deletion:', config.headers);\r\n    delete config.headers['Content-Type'];\r\n    console.log('[axios interceptor] Headers after deletion:', config.headers);\r\n  }\r\n\r\n  return config;\r\n});\r\n\r\n// Response interceptor - handles 403 and refreshes (matching GigLabz logic)\r\napi.interceptors.response.use(\r\n  (response) => response,\r\n  async (error) => {\r\n    const originalRequest = error.config;\r\n    \r\n    // Trigger refresh on 401/403 if not already retried\r\n    if ((error.response?.status === 401 || error.response?.status === 403) && !originalRequest._retry) {\r\n      originalRequest._retry = true;\r\n      const refreshToken = Cookies.get('refreshToken');\r\n      \r\n      if (!refreshToken) {\r\n        // No refresh token, clear tokens and reject\r\n        Cookies.remove('accessToken');\r\n        Cookies.remove('refreshToken');\r\n        return Promise.reject(error);\r\n      }\r\n      \r\n      try {\r\n        console.log('[Interceptor] Attempting token refresh');\r\n        const { data } = await axios.post(\r\n          `${API_BASE_URL}${REFRESH_ENDPOINT}`,\r\n          { refreshToken },\r\n          { withCredentials: true },\r\n        );\r\n        \r\n        console.log('[Interceptor] Refresh response:', data); // Debug log\r\n\r\n        // Backend already sends camelCase\r\n        const newAccessToken = data.accessToken || data.token;\r\n        const newRefreshToken = data.refreshToken || data.refreshToken;\r\n        \r\n        if (newAccessToken) {\r\n          // Store new tokens\r\n          Cookies.set('accessToken', newAccessToken);\r\n          if (newRefreshToken) {\r\n            Cookies.set('refreshToken', newRefreshToken, { expires: 7 });\r\n          }\r\n          \r\n          // Retry original request with new token\r\n          originalRequest.headers.Authorization = `Bearer ${newAccessToken}`;\r\n          return api(originalRequest);\r\n        } else {\r\n          throw new Error('No tokens in refresh response');\r\n        }\r\n      } catch (refreshError) {\r\n        console.error('[Interceptor] Token refresh failed:', refreshError);\r\n        // Clear tokens on refresh failure\r\n        Cookies.remove('accessToken');\r\n        Cookies.remove('refreshToken');\r\n        \r\n        // Optional: Redirect to login (commented out like GigLabz)\r\n        // window.location.href = '/login';\r\n        \r\n        return Promise.reject(refreshError);\r\n      }\r\n    }\r\n    \r\n    return Promise.reject(error);\r\n  },\r\n);\r\n\r\n// Simple API service\r\nexport const apiService = {\r\n  // For compatibility with older callers that try to push tokens directly\r\n  // Interceptors handle tokens, so these are intentional no-ops\r\n  setAuthToken: (_token) => {\r\n    // no-op; Authorization header is set by the request interceptor\r\n  },\r\n\r\n  removeAuthToken: () => {\r\n    // no-op; clearing cookies/session is handled via tokenUtils.clearSession\r\n  },\r\n\r\n  get: async (url, config = {}) => {\r\n    // If config has params property, use it as-is (it may also have signal, etc.)\r\n    // Otherwise, treat the config object itself as params and wrap it\r\n    const axiosConfig =\r\n      config && !('params' in config) && !('signal' in config) && typeof config === 'object'\r\n        ? { params: apiService.cleanParams(config) }\r\n        : config;\r\n    const response = await api.get(url, axiosConfig);\r\n    return response.data;\r\n  },\r\n\r\n  post: async (url, data = {}, config = {}) => {\r\n    const response = await api.post(url, data, config);\r\n    return response.data;\r\n  },\r\n\r\n  put: async (url, data = {}, config = {}) => {\r\n    const response = await api.put(url, data, config);\r\n    return response.data;\r\n  },\r\n\r\n  patch: async (url, data = {}, config = {}) => {\r\n    const response = await api.patch(url, data, config);\r\n    return response.data;\r\n  },\r\n\r\n  delete: async (url, config = {}) => {\r\n    const response = await api.delete(url, config);\r\n    return response.data;\r\n  },\r\n\r\n  upload: async (url, formData, config = {}) => {\r\n    // Don't set Content-Type header - let the request interceptor handle it\r\n    // The interceptor will detect FormData and delete the header so the browser\r\n    // can set it automatically with the correct boundary\r\n    const response = await api.post(url, formData, config);\r\n    return response.data;\r\n  },\r\n\r\n  // Additional utility methods for compatibility\r\n  cleanParams: (params = {}) => {\r\n    try {\r\n      return Object.fromEntries(\r\n        Object.entries(params).filter(([, v]) => v !== undefined && v !== null && v !== ''),\r\n      );\r\n    } catch {\r\n      return params || {};\r\n    }\r\n  },\r\n\r\n  request: async (config = {}) => {\r\n    try {\r\n      const response = await api.request(config);\r\n      return response.data;\r\n    } catch (error) {\r\n      const label = `${config.method || 'GET'} ${config.url}`;\r\n      console.error(`${label} error:`, error.response?.data || error.message);\r\n      throw error;\r\n    }\r\n  },\r\n};\r\n\r\n// Token utilities (simplified)\r\nexport const tokenUtils = {\r\n  getToken: () => Cookies.get('accessToken'),\r\n  getRefreshToken: () => Cookies.get('refreshToken'),\r\n  \r\n  setToken: (token) => {\r\n    if (token) Cookies.set('accessToken', token);\r\n  },\r\n  \r\n  setRefreshToken: (refreshToken) => {\r\n    if (refreshToken) Cookies.set('refreshToken', refreshToken, { expires: 7 });\r\n  },\r\n  \r\n  removeTokens: () => {\r\n    Cookies.remove('accessToken');\r\n    Cookies.remove('refreshToken');\r\n  },\r\n  \r\n  // Store user data in sessionStorage (matching GigLabz approach)\r\n  setUser: (user) => {\r\n    if (user) {\r\n      sessionStorage.setItem('userId', user.id || '');\r\n      sessionStorage.setItem('userEmail', user.email || '');\r\n      sessionStorage.setItem('userRole', user.role || '');\r\n      sessionStorage.setItem('userName', user.name || '');\r\n      sessionStorage.setItem('userPermissions', JSON.stringify(user.permissions || {}));\r\n    }\r\n  },\r\n  \r\n  getUser: () => {\r\n    const userId = sessionStorage.getItem('userId');\r\n    if (!userId) return null;\r\n    \r\n    return {\r\n      id: userId,\r\n      email: sessionStorage.getItem('userEmail'),\r\n      role: sessionStorage.getItem('userRole'),\r\n      name: sessionStorage.getItem('userName'),\r\n      permissions: JSON.parse(sessionStorage.getItem('userPermissions') || '{}'),\r\n    };\r\n  },\r\n  \r\n  removeUser: () => {\r\n    sessionStorage.removeItem('userId');\r\n    sessionStorage.removeItem('userEmail');\r\n    sessionStorage.removeItem('userRole');\r\n    sessionStorage.removeItem('userName');\r\n    sessionStorage.removeItem('userPermissions');\r\n  },\r\n  \r\n  clearSession: () => {\r\n    tokenUtils.removeTokens();\r\n    tokenUtils.removeUser();\r\n    \r\n    // Comprehensive cookie cleanup (matching GigLabz approach)\r\n    document.cookie.split(';').forEach((cookie) => {\r\n      const name = cookie.substr(0, cookie.indexOf('=')).trim();\r\n      document.cookie = `${name}=;expires=Thu, 01 Jan 1970 00:00:00 GMT;path=/;domain=${window.location.hostname}`;\r\n      document.cookie = `${name}=;expires=Thu, 01 Jan 1970 00:00:00 GMT;path=/`;\r\n    });\r\n  },\r\n};\r\n\r\nexport default api;\r\n","usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\services\\axiosAuthService.js","messages":[{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":22,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":22,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[474,515],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":127,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":127,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[3677,3720],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":168,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":168,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[4965,5030],"text":""},"desc":"Remove the console.log()."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { apiService, tokenUtils } from './axiosApi';\r\n\r\nclass AuthService {\r\n  constructor() {\r\n    this.isInitialized = false;\r\n  }\r\n\r\n  // Initialize auth service\r\n  initialize() {\r\n    if (this.isInitialized) return;\r\n    this.isInitialized = true;\r\n  }\r\n\r\n  // Login user (supporting both response formats)\r\n  async login(email, password) {\r\n    try {\r\n      const response = await apiService.post('/auth/login', {\r\n        email,\r\n        password,\r\n      });\r\n\r\n      console.log('Login response:', response); // Debug log\r\n\r\n      // Support both response formats: SteelApp (token) and GigLabz (accessToken)\r\n      const accessToken = response.accessToken || response.token;\r\n      const refreshToken = response.refreshToken || response.refreshToken;\r\n      const user = response.user;\r\n\r\n      if (accessToken && user) {\r\n        // Store tokens in cookies\r\n        tokenUtils.setToken(accessToken);\r\n        if (refreshToken) {\r\n          tokenUtils.setRefreshToken(refreshToken);\r\n        }\r\n        \r\n        // Store user data in sessionStorage\r\n        tokenUtils.setUser(user);\r\n        \r\n        return response;\r\n      } else {\r\n        console.error('Missing required fields in response:', { accessToken, refreshToken, user });\r\n        throw new Error('Invalid response format from server');\r\n      }\r\n    } catch (error) {\r\n      console.error('Login failed:', error);\r\n      const data = error.response?.data;\r\n      const status = error.response?.status;\r\n      \r\n      // Handle error messages\r\n      const details = Array.isArray(data?.errors)\r\n        ? data.errors.map((e) => e.msg).join(', ')\r\n        : data?.error || data?.message;\r\n      \r\n      const msg = details || \r\n        (status === 400 ? 'Invalid input. Check email and password.' : 'Login failed');\r\n      \r\n      throw new Error(msg);\r\n    }\r\n  }\r\n\r\n  // Logout user (matching GigLabz approach)\r\n  async logout() {\r\n    try {\r\n      const refreshToken = tokenUtils.getRefreshToken();\r\n      \r\n      if (refreshToken) {\r\n        await apiService.post('/auth/logout', { refreshToken });\r\n      }\r\n    } catch (error) {\r\n      console.warn('Logout API call failed:', error);\r\n    } finally {\r\n      // Always clear session regardless of API call result\r\n      this.clearSession();\r\n    }\r\n  }\r\n\r\n  // Register new user\r\n  async register(userData) {\r\n    try {\r\n      const response = await apiService.post('/auth/register', userData);\r\n\r\n      if (response.accessToken && response.refreshToken && response.user) {\r\n        const { accessToken, refreshToken, user } = response;\r\n        \r\n        tokenUtils.setToken(accessToken);\r\n        tokenUtils.setRefreshToken(refreshToken);\r\n        tokenUtils.setUser(user);\r\n      }\r\n\r\n      return response;\r\n    } catch (error) {\r\n      console.error('Registration failed:', error);\r\n      throw new Error(error.response?.data?.message || 'Registration failed');\r\n    }\r\n  }\r\n\r\n  // Get current user profile from server\r\n  async getCurrentUser(config = {}) {\r\n    try {\r\n      const response = await apiService.get('/auth/me', config);\r\n\r\n      if (response.user) {\r\n        tokenUtils.setUser(response.user);\r\n        return response.user;\r\n      }\r\n\r\n      return response;\r\n    } catch (error) {\r\n      console.error('Get current user failed:', error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  // Manual token refresh (for rare cases)\r\n  async refreshToken() {\r\n    try {\r\n      const refreshToken = tokenUtils.getRefreshToken();\r\n      \r\n      if (!refreshToken) {\r\n        throw new Error('No refresh token available');\r\n      }\r\n\r\n      const response = await apiService.post('/auth/refresh-token', {\r\n        refreshToken,\r\n      });\r\n\r\n      console.log('Refresh response:', response); // Debug log\r\n\r\n      // Support both response formats\r\n      const newAccessToken = response.accessToken || response.token;\r\n      const newRefreshToken = response.refreshToken || response.refreshToken;\r\n\r\n      if (newAccessToken) {\r\n        tokenUtils.setToken(newAccessToken);\r\n        if (newRefreshToken) {\r\n          tokenUtils.setRefreshToken(newRefreshToken);\r\n        }\r\n        return newAccessToken;\r\n      }\r\n\r\n      throw new Error('Token refresh failed - no tokens in response');\r\n    } catch (error) {\r\n      console.error('Token refresh failed:', error);\r\n      if (error?.response?.status === 401 || error?.response?.status === 403) {\r\n        this.clearSession();\r\n      }\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  // Change password\r\n  async changePassword(currentPassword, newPassword) {\r\n    try {\r\n      const response = await apiService.post('/auth/change-password', {\r\n        currentPassword,\r\n        newPassword,\r\n      });\r\n\r\n      return response;\r\n    } catch (error) {\r\n      console.error('Change password failed:', error);\r\n      throw new Error(error.response?.data?.message || 'Password change failed');\r\n    }\r\n  }\r\n\r\n  // Clear all session data (matching GigLabz comprehensive cleanup)\r\n  clearSession() {\r\n    console.log('[Auth] Clearing session - User will be logged out');\r\n    tokenUtils.clearSession();\r\n    // Clear page size preferences on logout\r\n    sessionStorage.removeItem('invoiceListPageSize');\r\n  }\r\n\r\n  // Authentication status\r\n  isAuthenticated() {\r\n    const token = tokenUtils.getToken();\r\n    const user = tokenUtils.getUser();\r\n    \r\n    // Simple check: if we have both token and user data, consider authenticated\r\n    // Let the interceptor handle token refresh automatically\r\n    return !!(token && user);\r\n  }\r\n\r\n  // Get user data\r\n  getUser() {\r\n    return tokenUtils.getUser();\r\n  }\r\n\r\n  // Check if user has specific permission\r\n  hasPermission(resource, action) {\r\n    const user = this.getUser();\r\n    if (!user) return false;\r\n\r\n    // Admin has all permissions\r\n    if (user.role === 'admin') return true;\r\n\r\n    const permissions = user.permissions || {};\r\n    const resourcePermissions = permissions[resource];\r\n\r\n    return resourcePermissions && resourcePermissions[action];\r\n  }\r\n\r\n  // Check if user has specific role\r\n  hasRole(roles) {\r\n    const user = this.getUser();\r\n    if (!user) return false;\r\n\r\n    const allowedRoles = Array.isArray(roles) ? roles : [roles];\r\n    return allowedRoles.includes(user.role);\r\n  }\r\n\r\n  // Get user roles and permissions\r\n  getUserPermissions() {\r\n    const user = this.getUser();\r\n    return user?.permissions || {};\r\n  }\r\n\r\n  getUserRole() {\r\n    const user = this.getUser();\r\n    return user?.role || null;\r\n  }\r\n}\r\n\r\n// Create singleton instance\r\nexport const authService = new AuthService();\r\n\r\n// Export token utilities for direct use\r\nexport { tokenUtils };\r\n\r\nexport default authService;\n","usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\services\\commissionService.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\services\\companyService.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\services\\countriesService.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\services\\creditNoteService.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\services\\customerCreditService.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\services\\customerService.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\services\\customsDocumentService.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\services\\dashboardService.js","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'createWidgetData' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":115,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":115,"endColumn":23},{"ruleId":"no-unused-vars","severity":1,"message":"'forceRefresh' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":148,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":148,"endColumn":25},{"ruleId":"no-unused-vars","severity":1,"message":"'forceRefresh' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":313,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":313,"endColumn":25},{"ruleId":"no-unused-vars","severity":1,"message":"'forceRefresh' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":466,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":466,"endColumn":25},{"ruleId":"no-unused-vars","severity":1,"message":"'forceRefresh' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":616,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":616,"endColumn":25},{"ruleId":"no-unused-vars","severity":1,"message":"'forceRefresh' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":675,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":675,"endColumn":25},{"ruleId":"no-unused-vars","severity":1,"message":"'forceRefresh' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":824,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":824,"endColumn":25},{"ruleId":"no-unused-vars","severity":1,"message":"'forceRefresh' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":1054,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":1054,"endColumn":25},{"ruleId":"no-unused-vars","severity":1,"message":"'forceRefresh' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":1117,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":1117,"endColumn":25},{"ruleId":"no-unused-vars","severity":1,"message":"'forceRefresh' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":1164,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":1164,"endColumn":25},{"ruleId":"no-unused-vars","severity":1,"message":"'forceRefresh' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":1227,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":1227,"endColumn":25},{"ruleId":"no-unused-vars","severity":1,"message":"'forceRefresh' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":1299,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":1299,"endColumn":25}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":12,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Dashboard Service - Unified Dashboard Data Aggregation\n *\n * This service aggregates data from multiple backend APIs to provide\n * a unified interface for dashboard components. Uses stale-while-revalidate\n * caching pattern for optimal UX.\n *\n * API Integration Status:\n * - Analytics: WIRED (via analyticsService)\n * - Commissions: WIRED (via commissionService)\n * - VAT: WIRED (via vatService)\n * - Inventory: WIRED (via inventoryService)\n * - Invoices: WIRED (via invoiceService)\n * - Customers: WIRED (via customerService)\n * - Products: WIRED (via productService)\n */\n\nimport { analyticsService } from './analyticsService';\nimport { invoiceService } from './invoiceService';\nimport { inventoryService } from './inventoryService';\nimport { customerService } from './customerService';\nimport { productService } from './productService';\nimport { commissionService } from './commissionService';\nimport { vatService } from './vatService';\nimport { warehouseService } from './warehouseService';\n\nconst PREFETCH_DELAY_MS = 1000; // 1 second delay before prefetching adjacent tabs\n\n// ============================================================================\n// UTILITY FUNCTIONS\n// ============================================================================\n\n/**\n * Safely parse a number, returns 0 for invalid values\n */\nconst safeNum = (v) => {\n  const n = parseFloat(v);\n  return Number.isFinite(n) ? n : 0;\n};\n\n/**\n * Calculate percentage change between two values\n */\nconst percentChange = (curr, prev) => {\n  const c = safeNum(curr);\n  const p = safeNum(prev);\n  if (p === 0) return c > 0 ? 100 : 0;\n  return ((c - p) / p) * 100;\n};\n\n// ============================================================================\n// DATA PREFETCHING - Warm up cache for adjacent tabs\n// ============================================================================\n\nlet prefetchTimeout = null;\n\n/**\n * Prefetch data for adjacent dashboard tabs\n * Call this when user lands on a tab to warm up adjacent tab data\n *\n * @param {string} currentTab - The tab the user is currently viewing\n */\nconst prefetchAdjacentTabs = (currentTab) => {\n  // Clear any pending prefetch\n  if (prefetchTimeout) {\n    clearTimeout(prefetchTimeout);\n  }\n\n  // Delay prefetch to not compete with current tab's data loading\n  prefetchTimeout = setTimeout(() => {\n    const tabOrder = ['overview', 'products', 'agents', 'inventory', 'vat', 'customers'];\n    const currentIndex = tabOrder.indexOf(currentTab);\n\n    if (currentIndex === -1) return;\n\n    // Prefetch adjacent tabs (previous and next)\n    const adjacentIndices = [currentIndex - 1, currentIndex + 1].filter(\n      (i) => i >= 0 && i < tabOrder.length,\n    );\n\n    adjacentIndices.forEach((index) => {\n      const tab = tabOrder[index];\n      switch (tab) {\n        case 'overview':\n          dashboardService.getDashboardMetrics().catch(() => {});\n          break;\n        case 'products':\n          dashboardService.getProductAnalytics().catch(() => {});\n          break;\n        case 'agents':\n          dashboardService.getAgentPerformance().catch(() => {});\n          break;\n        case 'inventory':\n          dashboardService.getInventoryHealth().catch(() => {});\n          break;\n        case 'vat':\n          dashboardService.getVATMetrics().catch(() => {});\n          break;\n        case 'customers':\n          dashboardService.getCustomerInsights().catch(() => {});\n          break;\n      }\n    });\n  }, PREFETCH_DELAY_MS);\n};\n\n// ============================================================================\n// WIDGET DATA PATTERNS - Standardized data shapes for dashboard widgets\n// ============================================================================\n\n/**\n * Standard widget data structure\n * All widget data should follow this pattern for consistency\n */\nconst createWidgetData = (data, options = {}) => ({\n  // The actual data payload\n  data,\n  // Metadata\n  meta: {\n    // Whether this is mock/fallback data\n    isMockData: options.isMockData || false,\n    // Whether cache was stale\n    isStale: options.isStale || false,\n    // When data was fetched\n    fetchedAt: options.fetchedAt || new Date().toISOString(),\n    // Data source (api, cache, mock)\n    source: options.source || 'api',\n  },\n});\n\n// ============================================================================\n// DASHBOARD SERVICE\n// ============================================================================\n\nexport const dashboardService = {\n  // Prefetching\n  prefetchAdjacentTabs,\n\n  /**\n   * Get all dashboard metrics in a single call\n   * Aggregates data from multiple services with caching\n   *\n   * @param {Object} options - Options for fetching\n   * @param {boolean} options.forceRefresh - Skip cache and fetch fresh data\n   * @returns {Promise<Object>} Aggregated dashboard metrics\n   */\n  async getDashboardMetrics(options = {}) {\n    const { forceRefresh = false } = options;\n\n    try {\n      // console.log('[dashboardService] Fetching dashboard metrics from APIs...');\n\n      // Fetch all data in parallel from real APIs\n      const [\n        dashboardData,\n        arAgingData,\n        revenueTrendData,\n        dashboardKPIs,\n        invoiceStats,\n        customerStats,\n        productStats,\n      ] = await Promise.all([\n        analyticsService.getDashboardData().catch((err) => {\n          console.warn('[dashboardService] getDashboardData failed:', err.message);\n          return {};\n        }),\n        analyticsService.getARAgingBuckets().catch((err) => {\n          console.warn('[dashboardService] getARAgingBuckets failed:', err.message);\n          return null;\n        }),\n        analyticsService.getRevenueTrend(12).catch((err) => {\n          console.warn('[dashboardService] getRevenueTrend failed:', err.message);\n          return null;\n        }),\n        analyticsService.getDashboardKPIs().catch((err) => {\n          console.warn('[dashboardService] getDashboardKPIs failed:', err.message);\n          return null;\n        }),\n        invoiceService.getInvoices({ limit: 1 }).catch((err) => {\n          console.warn('[dashboardService] getInvoices failed:', err.message);\n          return { pagination: { total: 0 } };\n        }),\n        customerService.getCustomers({ limit: 1 }).catch((err) => {\n          console.warn('[dashboardService] getCustomers failed:', err.message);\n          return { pagination: { total: 0 }, customers: [] };\n        }),\n        productService.getProducts({ limit: 1 }).catch((err) => {\n          console.warn('[dashboardService] getProducts failed:', err.message);\n          return { pagination: { total: 0 }, products: [] };\n        }),\n      ]);\n\n      // Extract metrics from API responses\n      // API returns: { metrics: { totalRevenue, totalCustomers, totalOrders, ... } }\n      const totalRevenue = safeNum(\n        dashboardData?.metrics?.totalRevenue ||\n        dashboardData?.revenueMetrics?.totalRevenue,\n      );\n      const totalCustomers = parseInt(\n        dashboardData?.metrics?.totalCustomers ||\n        dashboardData?.customerMetrics?.totalCustomers ||\n        customerStats?.pagination?.total ||\n        (Array.isArray(customerStats?.customers) ? customerStats.customers.length : 0) ||\n        0,\n      );\n      const totalProducts = parseInt(\n        dashboardData?.metrics?.totalProducts ||\n        dashboardData?.productMetrics?.totalProducts ||\n        productStats?.pagination?.total ||\n        (Array.isArray(productStats?.products) ? productStats.products.length : 0) ||\n        0,\n      );\n      const totalInvoices = parseInt(\n        dashboardData?.metrics?.totalOrders ||\n        dashboardData?.revenueMetrics?.totalInvoices ||\n        invoiceStats?.pagination?.total ||\n        0,\n      );\n\n      // Calculate month-over-month changes from trends\n      const trends = Array.isArray(dashboardData?.monthlyTrends)\n        ? dashboardData.monthlyTrends\n        : [];\n      const current = trends[0] || {};\n      const previous = trends[1] || {};\n\n      const metrics = {\n        // Summary stats\n        summary: {\n          totalRevenue,\n          totalCustomers,\n          totalProducts,\n          totalInvoices,\n          revenueChange: percentChange(current?.revenue, previous?.revenue),\n          customersChange: percentChange(current?.uniqueCustomers, previous?.uniqueCustomers),\n          productsChange: 0,\n          invoicesChange: percentChange(current?.invoiceCount, previous?.invoiceCount),\n        },\n\n        // KPIs from dedicated endpoint\n        kpis: dashboardKPIs ? {\n          grossMargin: parseFloat(dashboardKPIs.gross_margin_percent || dashboardKPIs.grossMarginPercent) || 0,\n          dso: parseFloat(dashboardKPIs.dso_days || dashboardKPIs.dsoDays) || 0,\n          creditUtilization: parseFloat(dashboardKPIs.credit_utilization_percent || dashboardKPIs.creditUtilizationPercent) || 0,\n        } : {\n          grossMargin: 0,\n          dso: 0,\n          creditUtilization: 0,\n        },\n\n        // AR Aging buckets\n        arAging: arAgingData,\n\n        // Revenue Trend for chart\n        revenueTrend: revenueTrendData,\n\n        // Top Products\n        topProducts: Array.isArray(dashboardData?.topProducts)\n          ? dashboardData.topProducts.slice(0, 5).map((p) => ({\n            id: p.id,\n            name: p.name,\n            displayName: p.displayName || p.name,\n            category: p.category,\n            sales: safeNum(p.totalSold),\n            revenue: safeNum(p.totalRevenue),\n          }))\n          : [],\n\n        // Indicate real data was used\n        isMockData: false,\n\n        // Timestamp for freshness indicator\n        fetchedAt: new Date().toISOString(),\n      };\n\n      // console.log('[dashboardService] Dashboard metrics fetched successfully');\n\n      return metrics;\n    } catch (error) {\n      console.error('[dashboardService] Error fetching dashboard metrics:', error);\n\n      // Fall back to empty data structure\n      // console.log('[dashboardService] Returning empty data structure as fallback');\n      return {\n        summary: {\n          totalRevenue: 0,\n          totalCustomers: 0,\n          totalProducts: 0,\n          totalInvoices: 0,\n          revenueChange: 0,\n          customersChange: 0,\n          productsChange: 0,\n          invoicesChange: 0,\n        },\n        kpis: { grossMargin: 0, dso: 0, creditUtilization: 0 },\n        arAging: null,\n        revenueTrend: null,\n        topProducts: [],\n        isMockData: true,\n        fetchedAt: new Date().toISOString(),\n      };\n    }\n  },\n\n  /**\n   * Get product analytics data\n   * Includes top products, margins, category performance, and grade analysis\n   *\n   * @param {Object} options - Fetch options\n   * @returns {Promise<Object>} Product analytics\n   */\n  async getProductAnalytics(options = {}) {\n    const { forceRefresh = false } = options;\n\n    try {\n      // console.log('[dashboardService] Fetching product analytics from APIs...');\n\n      const [\n        productPerformance,\n        productList,\n        inventorySummary,\n      ] = await Promise.all([\n        analyticsService.getProductPerformance().catch((err) => {\n          console.warn('[dashboardService] getProductPerformance failed:', err.message);\n          return {};\n        }),\n        productService.getProducts({ limit: 100 }).catch((err) => {\n          console.warn('[dashboardService] getProducts failed:', err.message);\n          return { products: [] };\n        }),\n        inventoryService.getInventorySummary().catch((err) => {\n          console.warn('[dashboardService] getInventorySummary failed:', err.message);\n          return {};\n        }),\n      ]);\n\n      // Process products from API or direct list\n      const products = Array.isArray(productList?.products)\n        ? productList.products\n        : Array.isArray(productList)\n          ? productList\n          : [];\n\n      // Process top products from analytics or build from product list\n      const topProducts = Array.isArray(productPerformance?.products)\n        ? productPerformance.products.slice(0, 10).map((p) => ({\n          id: p.id || p.productId || p.product_id,\n          name: p.name || p.productName || p.product_name,\n          displayName: p.displayName || p.name || p.productName,\n          category: p.category,\n          grade: p.grade,\n          totalSold: safeNum(p.totalSold || p.quantitySold || p.quantity_sold),\n          totalRevenue: safeNum(p.totalRevenue || p.revenue),\n          avgPrice: safeNum(p.avgPrice || p.averagePrice),\n          margin: safeNum(p.margin || p.marginPercent || p.margin_percent),\n        }))\n        : products.slice(0, 10).map((p) => ({\n          id: p.id,\n          name: p.name || p.displayName,\n          displayName: p.displayName || p.name,\n          category: p.category || p.productType,\n          grade: p.grade,\n          totalSold: 0,\n          totalRevenue: 0,\n          avgPrice: safeNum(p.sellingPrice || p.price),\n          margin: 0,\n        }));\n\n      // Category performance aggregation\n      const categoryPerformance = {};\n      topProducts.forEach((p) => {\n        const cat = p.category || 'Uncategorized';\n        if (!categoryPerformance[cat]) {\n          categoryPerformance[cat] = {\n            name: cat,\n            totalRevenue: 0,\n            totalSold: 0,\n            productCount: 0,\n          };\n        }\n        categoryPerformance[cat].totalRevenue += p.totalRevenue;\n        categoryPerformance[cat].totalSold += p.totalSold;\n        categoryPerformance[cat].productCount += 1;\n      });\n\n      // Grade analysis for steel products (SS 304, SS 316, SS 430)\n      const gradeMap = {};\n      const allProducts = Array.isArray(productPerformance?.products)\n        ? productPerformance.products\n        : products;\n\n      allProducts.forEach((p) => {\n        const grade = p.grade || 'Unknown';\n        if (!gradeMap[grade]) {\n          gradeMap[grade] = {\n            grade,\n            totalSold: 0,\n            totalRevenue: 0,\n            avgMargin: 0,\n            marginSum: 0,\n            productCount: 0,\n          };\n        }\n        gradeMap[grade].totalSold += safeNum(p.totalSold || p.quantitySold);\n        gradeMap[grade].totalRevenue += safeNum(p.totalRevenue || p.revenue);\n        gradeMap[grade].marginSum += safeNum(p.margin);\n        gradeMap[grade].productCount += 1;\n      });\n\n      // Calculate average margins for each grade\n      const gradeAnalysis = Object.values(gradeMap).map((g) => ({\n        grade: g.grade,\n        totalSold: g.totalSold,\n        totalRevenue: g.totalRevenue,\n        avgMargin: g.productCount > 0 ? g.marginSum / g.productCount : 0,\n        productCount: g.productCount,\n      }));\n\n      // Fast/slow moving stock from inventory\n      const fastMoving = inventorySummary?.fastMoving || [];\n      const slowMoving = inventorySummary?.slowMoving || [];\n\n      const analytics = {\n        topProducts,\n        categoryPerformance: Object.values(categoryPerformance),\n        gradeAnalysis,\n        fastMoving,\n        slowMoving,\n        summary: {\n          totalProductsSold: topProducts.reduce((sum, p) => sum + p.totalSold, 0),\n          totalRevenue: topProducts.reduce((sum, p) => sum + p.totalRevenue, 0),\n          avgMargin: topProducts.length > 0\n            ? topProducts.reduce((sum, p) => sum + p.margin, 0) / topProducts.length\n            : 0,\n        },\n        isMockData: false,\n        fetchedAt: new Date().toISOString(),\n      };\n      // console.log('[dashboardService] Product analytics fetched successfully');\n      return analytics;\n    } catch (error) {\n      console.error('[dashboardService] Error fetching product analytics:', error);\n\n      // Return empty structure\n      return {\n        topProducts: [],\n        categoryPerformance: [],\n        gradeAnalysis: [],\n        fastMoving: [],\n        slowMoving: [],\n        summary: { totalProductsSold: 0, totalRevenue: 0, avgMargin: 0 },\n        isMockData: true,\n        fetchedAt: new Date().toISOString(),\n      };\n    }\n  },\n\n  /**\n   * Get sales agent performance metrics\n   * Now uses real commission API instead of mock data\n   *\n   * @param {Object} options - Fetch options\n   * @returns {Promise<Object>} Agent performance data\n   */\n  async getAgentPerformance(options = {}) {\n    const { forceRefresh = false } = options;\n\n    try {\n      // console.log('[dashboardService] Fetching agent performance from commission APIs...');\n\n      // Fetch commission data from real APIs\n      const [\n        commissionDashboard,\n        commissionAgents,\n        commissionTransactions,\n      ] = await Promise.all([\n        commissionService.getDashboard().catch((err) => {\n          console.warn('[dashboardService] getCommissionDashboard failed:', err.message);\n          return {};\n        }),\n        commissionService.getAgents().catch((err) => {\n          console.warn('[dashboardService] getCommissionAgents failed:', err.message);\n          return { agents: [] };\n        }),\n        commissionService.getTransactions({ status: 'pending' }).catch((err) => {\n          console.warn('[dashboardService] getCommissionTransactions failed:', err.message);\n          return { transactions: [], summary: {} };\n        }),\n      ]);\n\n      // Process agents data\n      const agentsList = commissionAgents?.agents || [];\n\n      // Build agent summaries by aggregating transaction data\n      const agentTransactionMap = {};\n      (commissionTransactions?.transactions || []).forEach((tx) => {\n        const agentId = tx.userId || tx.user_id;\n        if (!agentTransactionMap[agentId]) {\n          agentTransactionMap[agentId] = {\n            totalCommission: 0,\n            pendingCommission: 0,\n            dealCount: 0,\n          };\n        }\n        const amount = safeNum(tx.commissionAmount || tx.commission_amount);\n        agentTransactionMap[agentId].totalCommission += amount;\n        if (tx.status === 'pending') {\n          agentTransactionMap[agentId].pendingCommission += amount;\n        }\n        agentTransactionMap[agentId].dealCount += 1;\n      });\n\n      // Enrich agents with transaction data\n      const enrichedAgents = agentsList.map((agent, index) => {\n        const agentId = agent.userId || agent.user_id;\n        const txData = agentTransactionMap[agentId] || {\n          totalCommission: 0,\n          pendingCommission: 0,\n          dealCount: 0,\n        };\n\n        return {\n          id: agentId,\n          name: agent.userName || agent.user_name || 'Unknown Agent',\n          email: agent.userEmail || agent.user_email || '',\n          avatar: null,\n          rank: index + 1,\n          planName: agent.planName || agent.plan_name || 'No Plan',\n          commissionRate: safeNum(agent.baseRate || agent.base_rate),\n          isActive: agent.isActive !== false && agent.is_active !== false,\n          // Commission metrics\n          commission: {\n            earned: txData.totalCommission,\n            pending: txData.pendingCommission,\n          },\n          // Deal metrics\n          invoiceCount: txData.dealCount,\n          totalSales: 0, // Would need invoice data to calculate\n          avgDealSize: 0,\n          // Targets (if available from plan)\n          target: {\n            amount: 0,\n            achieved: 0,\n            percentage: 0,\n          },\n        };\n      });\n\n      // Sort by commission earned (descending)\n      enrichedAgents.sort((a, b) => b.commission.earned - a.commission.earned);\n\n      // Update ranks after sorting\n      enrichedAgents.forEach((agent, index) => {\n        agent.rank = index + 1;\n      });\n\n      // Use dashboard metrics\n      const dashboardMetrics = commissionDashboard || {};\n\n      const performance = {\n        agents: enrichedAgents,\n        leaderboard: enrichedAgents.slice(0, 5),\n        summary: {\n          totalSalesTeam: enrichedAgents.length,\n          activeAgents: parseInt(dashboardMetrics.activeAgents || dashboardMetrics.active_agents) || enrichedAgents.filter(a => a.isActive).length,\n          totalTeamRevenue: safeNum(dashboardMetrics.totalCommissions || dashboardMetrics.total_commissions),\n          totalCommissionPaid: safeNum(dashboardMetrics.paidThisPeriod || dashboardMetrics.paid_this_period),\n          totalCommissionPending: safeNum(dashboardMetrics.pendingPayout || dashboardMetrics.pending_payout),\n          avgConversionRate: 0, // Would need more data\n        },\n        topAgents: (dashboardMetrics.topAgents || dashboardMetrics.top_agents || []).map((ta) => ({\n          id: ta.userId || ta.user_id,\n          name: ta.userName || ta.user_name,\n          totalEarned: safeNum(ta.totalEarned || ta.total_earned),\n          dealsClosed: parseInt(ta.dealsClosed || ta.deals_closed) || 0,\n        })),\n        trendData: (dashboardMetrics.trendData || dashboardMetrics.trend_data || []).map((td) => ({\n          period: td.period,\n          amount: safeNum(td.amount),\n        })),\n        isMockData: false,\n        fetchedAt: new Date().toISOString(),\n      };\n      // console.log('[dashboardService] Agent performance fetched successfully');\n      return performance;\n    } catch (error) {\n      console.error('[dashboardService] Error fetching agent performance:', error);\n\n      // Return empty structure\n      return {\n        agents: [],\n        leaderboard: [],\n        summary: {\n          totalSalesTeam: 0,\n          activeAgents: 0,\n          totalTeamRevenue: 0,\n          totalCommissionPaid: 0,\n          totalCommissionPending: 0,\n          avgConversionRate: 0,\n        },\n        topAgents: [],\n        trendData: [],\n        isMockData: true,\n        fetchedAt: new Date().toISOString(),\n      };\n    }\n  },\n\n  /**\n   * Get inventory health metrics\n   *\n   * @param {Object} options - Fetch options\n   * @returns {Promise<Object>} Inventory health data\n   */\n  async getInventoryHealth(options = {}) {\n    const { forceRefresh = false } = options;\n\n    try {\n      // console.log('[dashboardService] Fetching inventory health from APIs...');\n\n      const [\n        inventorySummary,\n        lowStockItems,\n        inventoryInsights,\n      ] = await Promise.all([\n        inventoryService.getInventorySummary().catch((err) => {\n          console.warn('[dashboardService] getInventorySummary failed:', err.message);\n          return {};\n        }),\n        inventoryService.getLowStockItems().catch((err) => {\n          console.warn('[dashboardService] getLowStockItems failed:', err.message);\n          return [];\n        }),\n        analyticsService.getInventoryInsights().catch((err) => {\n          console.warn('[dashboardService] getInventoryInsights failed:', err.message);\n          return {};\n        }),\n      ]);\n\n      const health = {\n        summary: {\n          totalItems: parseInt(inventorySummary?.totalItems || inventoryInsights?.overview?.total_products) || 0,\n          totalValue: safeNum(inventorySummary?.totalValue || inventoryInsights?.overview?.total_value),\n          totalQuantity: safeNum(inventorySummary?.totalQuantity),\n          lowStockCount: Array.isArray(lowStockItems) ? lowStockItems.length : parseInt(inventoryInsights?.overview?.low_stock_count) || 0,\n          outOfStockCount: parseInt(inventorySummary?.outOfStockCount || inventoryInsights?.overview?.out_of_stock_count) || 0,\n        },\n        lowStockItems: Array.isArray(lowStockItems) ? lowStockItems.slice(0, 10) :\n          (inventoryInsights?.low_stock_items || []).slice(0, 10),\n        turnoverRate: safeNum(inventoryInsights?.overview?.turnover_rate || inventorySummary?.turnoverRate),\n        avgDaysToSell: safeNum(inventorySummary?.avgDaysToSell),\n        warehouseUtilization: inventorySummary?.warehouseUtilization || [],\n        reorderAlerts: inventorySummary?.reorderAlerts || [],\n        slowMoving: inventoryInsights?.slow_moving || [],\n        topMoving: inventoryInsights?.top_moving || [],\n        isMockData: false,\n        fetchedAt: new Date().toISOString(),\n      };\n      // console.log('[dashboardService] Inventory health fetched successfully');\n      return health;\n    } catch (error) {\n      console.error('[dashboardService] Error fetching inventory health:', error);\n      throw error;\n    }\n  },\n\n  /**\n   * Get VAT compliance metrics\n   * Now uses real VAT service instead of calculating from invoices\n   *\n   * @param {Object} options - Fetch options\n   * @returns {Promise<Object>} VAT metrics\n   */\n  async getVATMetrics(options = {}) {\n    const { forceRefresh = false } = options;\n\n    try {\n      // console.log('[dashboardService] Fetching VAT metrics from VAT service...');\n\n      // Try to get VAT dashboard metrics from the VAT service\n      const vatMetrics = await vatService.getVATDashboardMetrics().catch((err) => {\n        console.warn('[dashboardService] getVATDashboardMetrics failed:', err.message);\n        return null;\n      });\n\n      if (vatMetrics) {\n        // console.log('[dashboardService] VAT metrics fetched successfully');\n        return vatMetrics;\n      }\n\n      // Fallback: Calculate from invoices if VAT service fails\n      // console.log('[dashboardService] Falling back to invoice-based VAT calculation...');\n\n      const currentDate = new Date();\n      const currentQuarter = Math.ceil((currentDate.getMonth() + 1) / 3);\n      const currentYear = currentDate.getFullYear();\n      const quarterStart = new Date(currentYear, (currentQuarter - 1) * 3, 1);\n      const quarterEnd = new Date(currentYear, currentQuarter * 3, 0);\n\n      // Fetch invoices for current quarter\n      const invoiceResponse = await invoiceService.getInvoices({\n        start_date: quarterStart.toISOString().split('T')[0],\n        end_date: quarterEnd.toISOString().split('T')[0],\n        limit: 500,\n      }).catch((err) => {\n        console.warn('[dashboardService] getInvoices for VAT failed:', err.message);\n        return { invoices: [] };\n      });\n\n      const invoices = invoiceResponse?.invoices || [];\n\n      // Calculate VAT from invoices\n      let totalSales = 0;\n      let totalVatCollected = 0;\n      let invoicesWithVAT = 0;\n      let invoicesWithoutVAT = 0;\n      let zeroRatedSales = 0;\n\n      invoices.forEach((inv) => {\n        const total = safeNum(inv.total);\n        const vatAmount = safeNum(inv.vatAmount || inv.vat_amount);\n\n        totalSales += total;\n        totalVatCollected += vatAmount;\n\n        if (vatAmount > 0) {\n          invoicesWithVAT++;\n        } else if (total > 0) {\n          invoicesWithoutVAT++;\n          zeroRatedSales += total;\n        }\n      });\n\n      // Estimate input VAT (purchases - using 60% of output as rough estimate)\n      const estimatedInputVAT = Math.round(totalVatCollected * 0.6);\n\n      const vatData = {\n        currentPeriod: {\n          quarter: `Q${currentQuarter}`,\n          year: currentYear,\n          startDate: quarterStart.toISOString(),\n          endDate: quarterEnd.toISOString(),\n        },\n        collection: {\n          outputVAT: Math.round(totalVatCollected),\n          inputVAT: estimatedInputVAT,\n          netPayable: Math.round(totalVatCollected - estimatedInputVAT),\n          adjustments: 0,\n        },\n        returnStatus: {\n          status: 'pending',\n          dueDate: new Date(currentYear, currentQuarter * 3 + 1, 28).toISOString(),\n          daysRemaining: Math.max(0, Math.ceil((new Date(currentYear, currentQuarter * 3 + 1, 28) - currentDate) / (1000 * 60 * 60 * 24))),\n          filedDate: null,\n        },\n        compliance: {\n          invoicesWithVAT,\n          invoicesWithoutVAT,\n          zeroRatedSales: Math.round(zeroRatedSales),\n          exemptSales: 0,\n          totalSales: Math.round(totalSales),\n          effectiveVATRate: totalSales > 0 ? ((totalVatCollected / totalSales) * 100).toFixed(2) : 0,\n        },\n        alerts: [],\n        history: [],\n        isMockData: invoices.length === 0,\n        fetchedAt: new Date().toISOString(),\n      };\n\n      // Add alerts based on data\n      const daysUntilDue = vatData.returnStatus.daysRemaining;\n      if (daysUntilDue <= 15 && daysUntilDue > 0) {\n        vatData.alerts.push({\n          type: 'warning',\n          message: `VAT return due in ${daysUntilDue} days`,\n          severity: daysUntilDue <= 7 ? 'high' : 'medium',\n        });\n      }\n\n      if (invoicesWithoutVAT > 0) {\n        vatData.alerts.push({\n          type: 'info',\n          message: `${invoicesWithoutVAT} invoice(s) without VAT this quarter`,\n          severity: 'low',\n        });\n      }\n      // console.log('[dashboardService] VAT metrics calculated from', invoices.length, 'invoices');\n      return vatData;\n    } catch (error) {\n      console.error('[dashboardService] Error fetching VAT metrics:', error);\n\n      // Return empty structure\n      const currentDate = new Date();\n      const currentQuarter = Math.ceil((currentDate.getMonth() + 1) / 3);\n      const currentYear = currentDate.getFullYear();\n\n      return {\n        currentPeriod: {\n          quarter: `Q${currentQuarter}`,\n          year: currentYear,\n          startDate: new Date(currentYear, (currentQuarter - 1) * 3, 1).toISOString(),\n          endDate: new Date(currentYear, currentQuarter * 3, 0).toISOString(),\n        },\n        collection: { outputVAT: 0, inputVAT: 0, netPayable: 0, adjustments: 0 },\n        returnStatus: { status: 'unknown', dueDate: null, daysRemaining: 0, filedDate: null },\n        compliance: { invoicesWithVAT: 0, invoicesWithoutVAT: 0, zeroRatedSales: 0, exemptSales: 0 },\n        alerts: [],\n        history: [],\n        isMockData: true,\n        isStale: true,\n        fetchedAt: new Date().toISOString(),\n      };\n    }\n  },\n\n  /**\n   * Get customer insights\n   * Uses real customer and invoice data to calculate CLV and identify at-risk customers\n   *\n   * @param {Object} options - Fetch options\n   * @returns {Promise<Object>} Customer insights\n   */\n  async getCustomerInsights(options = {}) {\n    const { forceRefresh = false } = options;\n\n    try {\n      // console.log('[dashboardService] Fetching customer insights from APIs...');\n\n      const [\n        customerAnalysis,\n        customerList,\n        recentInvoices,\n      ] = await Promise.all([\n        analyticsService.getCustomerAnalysis().catch((err) => {\n          console.warn('[dashboardService] getCustomerAnalysis failed:', err.message);\n          return {};\n        }),\n        customerService.getCustomers({ limit: 100 }).catch((err) => {\n          console.warn('[dashboardService] getCustomers failed:', err.message);\n          return { customers: [] };\n        }),\n        invoiceService.getInvoices({ limit: 200 }).catch((err) => {\n          console.warn('[dashboardService] getInvoices for customers failed:', err.message);\n          return { invoices: [] };\n        }),\n      ]);\n\n      const customers = customerList?.customers || [];\n      const invoices = recentInvoices?.invoices || [];\n\n      if (customers.length === 0) {\n        // No customers, return empty structure\n        // console.log('[dashboardService] No customers found');\n        return {\n          topCustomers: [],\n          atRiskCustomers: [],\n          segments: { premium: 0, standard: 0, new: 0 },\n          totalCustomers: 0,\n          newCustomersThisMonth: 0,\n          churnRate: 0,\n          avgCLV: 0,\n          totalOutstanding: 0,\n          isMockData: true,\n          fetchedAt: new Date().toISOString(),\n        };\n      }\n\n      // Build customer invoice history for CLV calculation\n      const customerInvoiceMap = {};\n      invoices.forEach((inv) => {\n        const customerId = inv.customerId || inv.customer_id || inv.customer?.id;\n        if (customerId) {\n          if (!customerInvoiceMap[customerId]) {\n            customerInvoiceMap[customerId] = {\n              invoices: [],\n              totalRevenue: 0,\n              lastOrderDate: null,\n              totalPaid: 0,\n              totalOutstanding: 0,\n            };\n          }\n          const invTotal = safeNum(inv.total);\n          const invReceived = safeNum(inv.received);\n          const invOutstanding = safeNum(inv.outstanding);\n\n          customerInvoiceMap[customerId].invoices.push(inv);\n          customerInvoiceMap[customerId].totalRevenue += invTotal;\n          customerInvoiceMap[customerId].totalPaid += invReceived;\n          customerInvoiceMap[customerId].totalOutstanding += invOutstanding;\n\n          const invDate = new Date(inv.invoiceDate || inv.invoice_date || inv.date || inv.createdAt);\n          if (!customerInvoiceMap[customerId].lastOrderDate ||\n              invDate > customerInvoiceMap[customerId].lastOrderDate) {\n            customerInvoiceMap[customerId].lastOrderDate = invDate;\n          }\n        }\n      });\n\n      // Calculate insights for each customer\n      const now = new Date();\n      const thirtyDaysAgo = new Date(now.getTime() - 30 * 24 * 60 * 60 * 1000);\n\n      const enrichedCustomers = customers.map((customer) => {\n        const history = customerInvoiceMap[customer.id] || {\n          invoices: [],\n          totalRevenue: 0,\n          lastOrderDate: null,\n          totalPaid: 0,\n          totalOutstanding: 0,\n        };\n\n        const invoiceCount = history.invoices.length;\n        const avgOrderValue = invoiceCount > 0 ? history.totalRevenue / invoiceCount : 0;\n\n        // Simple CLV calculation: avg order value * estimated annual orders * 3 years\n        const estimatedAnnualOrders = Math.max(invoiceCount * (12 / 6), 4);\n        const clv = avgOrderValue * estimatedAnnualOrders * 3;\n\n        // Calculate days since last order\n        let daysInactive = 0;\n        if (history.lastOrderDate) {\n          daysInactive = Math.floor((now - history.lastOrderDate) / (1000 * 60 * 60 * 24));\n        } else {\n          daysInactive = 90;\n        }\n\n        // Risk score based on inactivity and outstanding payments\n        let riskScore = 0;\n        if (daysInactive > 60) riskScore += 40;\n        else if (daysInactive > 30) riskScore += 20;\n\n        if (history.totalOutstanding > 0) {\n          const outstandingRatio = history.totalOutstanding / (history.totalRevenue || 1);\n          riskScore += Math.min(40, Math.floor(outstandingRatio * 100));\n        }\n\n        if (invoiceCount === 0) riskScore += 20;\n\n        // Segment based on revenue and activity\n        let segment = 'Standard';\n        if (history.totalRevenue > 500000 && daysInactive < 30) {\n          segment = 'Premium';\n        } else if (invoiceCount <= 2 || daysInactive < 60) {\n          segment = 'New';\n        }\n\n        return {\n          id: customer.id,\n          name: customer.name || customer.companyName || customer.company_name || 'Unknown',\n          email: customer.email,\n          phone: customer.phone,\n          totalRevenue: Math.round(history.totalRevenue),\n          invoiceCount,\n          avgOrderValue: Math.round(avgOrderValue),\n          clv: Math.round(clv),\n          lastOrderDate: history.lastOrderDate?.toISOString() || null,\n          daysInactive,\n          riskScore: Math.min(100, riskScore),\n          segment,\n          outstanding: Math.round(history.totalOutstanding),\n          creditLimit: safeNum(customer.creditLimit || customer.credit_limit),\n          creditUsed: safeNum(customer.currentCredit || customer.current_credit),\n        };\n      });\n\n      // Sort by total revenue and get top customers\n      const topCustomers = enrichedCustomers\n        .sort((a, b) => b.totalRevenue - a.totalRevenue)\n        .slice(0, 10);\n\n      // Identify at-risk customers\n      const atRiskCustomers = enrichedCustomers\n        .filter((c) => c.riskScore > 50)\n        .map((c) => {\n          let riskReason = 'Multiple risk factors';\n          if (c.daysInactive > 60) {\n            riskReason = `No orders in ${c.daysInactive} days`;\n          } else if (c.outstanding > 0 && c.outstanding > c.avgOrderValue) {\n            riskReason = 'Significant payment overdue';\n          } else if (c.invoiceCount <= 1) {\n            riskReason = 'New customer - needs engagement';\n          }\n          return { ...c, riskReason };\n        })\n        .sort((a, b) => b.riskScore - a.riskScore)\n        .slice(0, 10);\n\n      // Segment counts\n      const segments = {\n        premium: enrichedCustomers.filter((c) => c.segment === 'Premium').length,\n        standard: enrichedCustomers.filter((c) => c.segment === 'Standard').length,\n        new: enrichedCustomers.filter((c) => c.segment === 'New').length,\n      };\n\n      // New customers this month\n      const newCustomersThisMonth = customers.filter((c) => {\n        const createdAt = new Date(c.createdAt || c.created_at);\n        return createdAt >= thirtyDaysAgo;\n      }).length;\n\n      // Churn rate estimate (customers inactive > 60 days / total)\n      const inactiveCount = enrichedCustomers.filter((c) => c.daysInactive > 60).length;\n      const churnRate = enrichedCustomers.length > 0\n        ? ((inactiveCount / enrichedCustomers.length) * 100).toFixed(1)\n        : 0;\n\n      const result = {\n        topCustomers,\n        atRiskCustomers,\n        segments,\n        totalCustomers: customers.length,\n        newCustomersThisMonth,\n        churnRate: parseFloat(churnRate),\n        avgCLV: Math.round(enrichedCustomers.reduce((sum, c) => sum + c.clv, 0) / (enrichedCustomers.length || 1)),\n        totalOutstanding: Math.round(enrichedCustomers.reduce((sum, c) => sum + c.outstanding, 0)),\n        // Include analytics data if available\n        analyticsCustomers: customerAnalysis?.customers || [],\n        analyticsSummary: customerAnalysis?.summary || null,\n        isMockData: false,\n        fetchedAt: new Date().toISOString(),\n      };\n      // console.log('[dashboardService] Customer insights calculated from', customers.length, 'customers and', invoices.length, 'invoices');\n      return result;\n    } catch (error) {\n      console.error('[dashboardService] Error fetching customer insights:', error);\n\n      // Return empty structure\n      return {\n        topCustomers: [],\n        atRiskCustomers: [],\n        segments: { premium: 0, standard: 0, new: 0 },\n        totalCustomers: 0,\n        newCustomersThisMonth: 0,\n        churnRate: 0,\n        avgCLV: 0,\n        totalOutstanding: 0,\n        isMockData: true,\n        isStale: true,\n        fetchedAt: new Date().toISOString(),\n      };\n    }\n  },\n\n  // ============================================================================\n  // PHASE 2 DATA FETCHERS - Net Profit, AP Aging, Cash Flow, Stock Turnover\n  // ============================================================================\n\n  /**\n   * Get Net Profit data for ProfitSummaryWidget\n   * @param {Object} options - Fetch options\n   * @returns {Promise<Object>} Net profit data\n   */\n  async getNetProfit(options = {}) {\n    const { forceRefresh = false } = options;\n\n    try {\n      // console.log('[dashboardService] Fetching net profit from API...');\n      const response = await analyticsService.getNetProfit(options.params || {});\n\n      // Transform API response to widget-expected format\n      const netProfitData = {\n        revenue: safeNum(response?.revenue),\n        cogs: safeNum(response?.cost || response?.cogs),\n        grossProfit: safeNum(response?.gross_profit || response?.grossProfit),\n        operatingExpenses: safeNum(response?.operating_expenses || response?.operatingExpenses || 0),\n        netProfit: safeNum(response?.net_profit || response?.netProfit),\n        grossMarginPercent: safeNum(response?.gross_margin_percent || response?.grossMarginPercent),\n        netMarginPercent: safeNum(response?.margin_percentage || response?.marginPercentage || response?.net_margin_percent),\n        trend: response?.trend || [],\n        previousPeriod: response?.previous_period || response?.previousPeriod || {\n          revenue: 0,\n          grossProfit: 0,\n          netProfit: 0,\n        },\n        isMockData: false,\n        fetchedAt: new Date().toISOString(),\n      };\n\n      // Calculate derived values if not provided\n      if (!netProfitData.grossProfit && netProfitData.revenue && netProfitData.cogs) {\n        netProfitData.grossProfit = netProfitData.revenue - netProfitData.cogs;\n      }\n      if (!netProfitData.grossMarginPercent && netProfitData.revenue > 0) {\n        netProfitData.grossMarginPercent = (netProfitData.grossProfit / netProfitData.revenue) * 100;\n      }\n      if (!netProfitData.netMarginPercent && netProfitData.revenue > 0) {\n        netProfitData.netMarginPercent = (netProfitData.netProfit / netProfitData.revenue) * 100;\n      }\n      // console.log('[dashboardService] Net profit fetched successfully');\n      return netProfitData;\n    } catch (error) {\n      console.error('[dashboardService] Error fetching net profit:', error);\n\n      // Return empty structure\n      return {\n        revenue: 0,\n        cogs: 0,\n        grossProfit: 0,\n        operatingExpenses: 0,\n        netProfit: 0,\n        grossMarginPercent: 0,\n        netMarginPercent: 0,\n        trend: [],\n        previousPeriod: { revenue: 0, grossProfit: 0, netProfit: 0 },\n        isMockData: true,\n        fetchedAt: new Date().toISOString(),\n      };\n    }\n  },\n\n  /**\n   * Get AP (Accounts Payable) Aging data for APAgingWidget\n   * @param {Object} options - Fetch options\n   * @returns {Promise<Object>} AP aging buckets data\n   */\n  async getAPAging(options = {}) {\n    const { forceRefresh = false } = options;\n\n    try {\n      // console.log('[dashboardService] Fetching AP aging from API...');\n      const response = await analyticsService.getAPAging();\n\n      // Transform API response to widget-expected format\n      const apAgingData = {\n        buckets: (response?.buckets || []).map(bucket => ({\n          label: bucket.label || bucket.range || `${bucket.min_days || 0}-${bucket.max_days || 30} Days`,\n          amount: safeNum(bucket.amount || bucket.total),\n          percentage: safeNum(bucket.percentage || bucket.percent),\n          count: parseInt(bucket.count || bucket.bill_count) || 0,\n        })),\n        totalAP: safeNum(response?.total_ap || response?.totalAP),\n        overdueAP: safeNum(response?.overdue_ap || response?.overdueAP),\n        criticalSuppliers: (response?.critical_suppliers || response?.criticalSuppliers || []).map(supplier => ({\n          name: supplier.name || supplier.supplier_name,\n          amount: safeNum(supplier.amount || supplier.total_overdue),\n          daysOverdue: parseInt(supplier.days_overdue || supplier.daysOverdue) || 0,\n        })),\n        isMockData: false,\n        fetchedAt: new Date().toISOString(),\n      };\n      // console.log('[dashboardService] AP aging fetched successfully');\n      return apAgingData;\n    } catch (error) {\n      console.error('[dashboardService] Error fetching AP aging:', error);\n\n      // Return empty structure\n      return {\n        buckets: [],\n        totalAP: 0,\n        overdueAP: 0,\n        criticalSuppliers: [],\n        isMockData: true,\n        fetchedAt: new Date().toISOString(),\n      };\n    }\n  },\n\n  /**\n   * Get Cash Flow data for CashFlowWidget\n   * @param {Object} options - Fetch options\n   * @returns {Promise<Object>} Cash flow data with MTD, QTD, YTD breakdowns\n   */\n  async getCashFlow(options = {}) {\n    const { forceRefresh = false } = options;\n\n    try {\n      // console.log('[dashboardService] Fetching cash flow from API...');\n      const response = await analyticsService.getCashFlow(options.params || {});\n\n      // Transform API response to widget-expected format\n      // API can return either flat structure or nested MTD/QTD/YTD\n      const transformPeriodData = (data) => ({\n        inflows: safeNum(data?.inflow || data?.inflows || data?.total_inflow),\n        outflows: safeNum(data?.outflow || data?.outflows || data?.total_outflow),\n        netCashFlow: safeNum(data?.net_cash_flow || data?.netCashFlow || data?.net),\n        trend: (data?.trend || []).map(t => ({\n          day: t.period || t.day || t.label,\n          inflow: safeNum(t.inflow || t.in),\n          outflow: safeNum(t.outflow || t.out),\n        })),\n      });\n\n      let cashFlowData;\n\n      // Check if response has nested period data or flat structure\n      if (response?.mtd || response?.qtd || response?.ytd) {\n        cashFlowData = {\n          mtd: transformPeriodData(response.mtd || {}),\n          qtd: transformPeriodData(response.qtd || {}),\n          ytd: transformPeriodData(response.ytd || {}),\n        };\n      } else {\n        // Flat structure - use for all periods\n        const periodData = transformPeriodData(response);\n        cashFlowData = {\n          mtd: periodData,\n          qtd: periodData,\n          ytd: periodData,\n        };\n      }\n\n      cashFlowData.isMockData = false;\n      cashFlowData.fetchedAt = new Date().toISOString();\n      // console.log('[dashboardService] Cash flow fetched successfully');\n      return cashFlowData;\n    } catch (error) {\n      console.error('[dashboardService] Error fetching cash flow:', error);\n\n      // Return empty structure\n      const emptyPeriod = { inflows: 0, outflows: 0, netCashFlow: 0, trend: [] };\n      return {\n        mtd: emptyPeriod,\n        qtd: emptyPeriod,\n        ytd: emptyPeriod,\n        isMockData: true,\n        fetchedAt: new Date().toISOString(),\n      };\n    }\n  },\n\n  /**\n   * Get Stock Turnover data for StockTurnoverWidget\n   * @param {Object} options - Fetch options\n   * @returns {Promise<Object>} Stock turnover heatmap data\n   */\n  async getStockTurnover(options = {}) {\n    const { forceRefresh = false } = options;\n\n    try {\n      // console.log('[dashboardService] Fetching stock turnover from API...');\n      const response = await analyticsService.getStockTurnover(options.params || {});\n\n      // Get last 6 months for labels\n      const months = [];\n      const now = new Date();\n      for (let i = 5; i >= 0; i--) {\n        const d = new Date(now.getFullYear(), now.getMonth() - i, 1);\n        months.push(d.toLocaleString('default', { month: 'short' }));\n      }\n\n      // Transform API response to widget-expected format\n      const stockTurnoverData = {\n        products: (response?.by_category || response?.byCategory || response?.products || []).map((item, idx) => ({\n          id: item.id || item.product_id || idx + 1,\n          name: item.name || item.product_name || item.category || `Product ${idx + 1}`,\n          // If monthly data exists, use it; otherwise generate from turnover_ratio\n          data: item.monthly_data || item.monthlyData ||\n            Array(6).fill(safeNum(item.turnover_ratio || item.turnoverRatio || 1)),\n        })),\n        months,\n        overallEfficiency: safeNum(response?.overall_efficiency || response?.overallEfficiency) ||\n          Math.min(100, Math.round(safeNum(response?.turnover_ratio || response?.turnoverRatio || 2) * 25)),\n        avgTurnover: safeNum(response?.turnover_ratio || response?.turnoverRatio || response?.avg_turnover),\n        daysOfInventory: parseInt(response?.days_of_inventory || response?.daysOfInventory) || 0,\n        cogs: safeNum(response?.cogs),\n        bestPerformer: response?.best_performer || response?.bestPerformer || '',\n        worstPerformer: response?.worst_performer || response?.worstPerformer || '',\n        isMockData: false,\n        fetchedAt: new Date().toISOString(),\n      };\n\n      // Identify best/worst performers if not provided\n      if (!stockTurnoverData.bestPerformer && stockTurnoverData.products.length > 0) {\n        const sorted = [...stockTurnoverData.products].sort((a, b) => {\n          const avgA = a.data.reduce((s, v) => s + v, 0) / a.data.length;\n          const avgB = b.data.reduce((s, v) => s + v, 0) / b.data.length;\n          return avgB - avgA;\n        });\n        stockTurnoverData.bestPerformer = sorted[0]?.name || '';\n        stockTurnoverData.worstPerformer = sorted[sorted.length - 1]?.name || '';\n      }\n      // console.log('[dashboardService] Stock turnover fetched successfully');\n      return stockTurnoverData;\n    } catch (error) {\n      console.error('[dashboardService] Error fetching stock turnover:', error);\n\n      // Return empty structure\n      return {\n        products: [],\n        months: [],\n        overallEfficiency: 0,\n        avgTurnover: 0,\n        daysOfInventory: 0,\n        cogs: 0,\n        bestPerformer: '',\n        worstPerformer: '',\n        isMockData: true,\n        fetchedAt: new Date().toISOString(),\n      };\n    }\n  },\n\n  /**\n   * Get Warehouse Utilization data for WarehouseUtilizationWidget\n   * @param {Object} options - Fetch options\n   * @returns {Promise<Object>} Warehouse utilization data\n   */\n  async getWarehouseUtilization(options = {}) {\n    const { forceRefresh = false } = options;\n\n    try {\n      // console.log('[dashboardService] Fetching warehouse utilization from API...');\n      const response = await warehouseService.getAll({ limit: 50 });\n      const warehouses = response?.data || [];\n\n      // Transform warehouses to widget format\n      const warehouseData = {\n        warehouses: warehouses.map(w => ({\n          id: w.id,\n          name: w.name,\n          code: w.code,\n          city: w.city || 'Unknown',\n          capacity: safeNum(w.capacity),\n          used: safeNum(w.inventoryCount || 0),\n          utilization: safeNum(w.utilizationPercent || 0),\n          value: 0, // Would need inventory value data\n          items: parseInt(w.inventoryCount) || 0,\n          status: w.utilizationPercent >= 90 ? 'critical' :\n            w.utilizationPercent >= 75 ? 'high' :\n              w.utilizationPercent >= 50 ? 'optimal' : 'low',\n        })),\n        transfers: [], // Would need transfer data\n        summary: {\n          totalCapacity: warehouses.reduce((sum, w) => sum + safeNum(w.capacity), 0),\n          totalUsed: warehouses.reduce((sum, w) => sum + safeNum(w.inventoryCount || 0), 0),\n          avgUtilization: warehouses.length > 0\n            ? warehouses.reduce((sum, w) => sum + safeNum(w.utilizationPercent || 0), 0) / warehouses.length\n            : 0,\n          totalValue: 0, // Would need inventory value data\n        },\n        isMockData: false,\n        fetchedAt: new Date().toISOString(),\n      };\n      // console.log('[dashboardService] Warehouse utilization fetched successfully');\n      return warehouseData;\n    } catch (error) {\n      console.error('[dashboardService] Error fetching warehouse utilization:', error);\n\n      // Return empty structure\n      return {\n        warehouses: [],\n        transfers: [],\n        summary: { totalCapacity: 0, totalUsed: 0, avgUtilization: 0, totalValue: 0 },\n        isMockData: true,\n        fetchedAt: new Date().toISOString(),\n      };\n    }\n  },\n\n  /**\n   * Refresh all dashboard data\n   * Force-refreshes all cached data\n   */\n  async refreshAll() {\n    // console.log('[dashboardService] Refreshing all dashboard data...');\n    return Promise.all([\n      this.getDashboardMetrics({ forceRefresh: true }),\n      this.getProductAnalytics({ forceRefresh: true }),\n      this.getAgentPerformance({ forceRefresh: true }),\n      this.getInventoryHealth({ forceRefresh: true }),\n      this.getVATMetrics({ forceRefresh: true }),\n      this.getCustomerInsights({ forceRefresh: true }),\n      // Phase 2 data\n      this.getNetProfit({ forceRefresh: true }),\n      this.getAPAging({ forceRefresh: true }),\n      this.getCashFlow({ forceRefresh: true }),\n      this.getStockTurnover({ forceRefresh: true }),\n      this.getWarehouseUtilization({ forceRefresh: true }),\n    ]);\n  },\n\n  /**\n   * Get data for a specific dashboard tab\n   * Returns the appropriate data based on tab name\n   *\n   * @param {string} tabName - Name of the tab\n   * @param {Object} options - Fetch options\n   */\n  async getTabData(tabName, options = {}) {\n    switch (tabName) {\n      case 'overview':\n        return this.getDashboardMetrics(options);\n      case 'products':\n        return this.getProductAnalytics(options);\n      case 'agents':\n        return this.getAgentPerformance(options);\n      case 'inventory':\n        return this.getInventoryHealth(options);\n      case 'vat':\n        return this.getVATMetrics(options);\n      case 'customers':\n        return this.getCustomerInsights(options);\n      default:\n        throw new Error(`Unknown tab: ${tabName}`);\n    }\n  },\n};\n\nexport default dashboardService;\n","usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\services\\dataService.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\services\\debitNoteService.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\services\\deliveryVarianceService.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\services\\demoDataService.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\services\\exchangeRateService.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\services\\exportOrderService.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\services\\httpClient.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\services\\importOrderService.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\services\\index.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\services\\integrationService.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\services\\inventoryService.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\services\\invoiceService.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\services\\materialCertificateService.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\services\\notificationService.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\services\\payablesService.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\services\\paymentService.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\services\\pinnedProductsService.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\services\\pricelistService.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\services\\productNamingService.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\services\\productService.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\services\\purchaseOrderSyncService.js","messages":[{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":18,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":18,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[692,769],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":59,"column":13,"nodeType":"MemberExpression","messageId":"unexpected","endLine":59,"endColumn":24,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[2281,2389],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":79,"column":13,"nodeType":"MemberExpression","messageId":"unexpected","endLine":79,"endColumn":24,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[3205,3263],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":148,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":148,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[5599,5653],"text":""},"desc":"Remove the console.log()."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { inventoryService } from './inventoryService';\r\nimport { stockMovementService } from './stockMovementService';\r\nimport { notificationService } from './notificationService';\r\n\r\n/**\r\n * Service to handle synchronization between Purchase Orders, Inventory, and Stock Movement\r\n */\r\nclass PurchaseOrderSyncService {\r\n  \r\n  /**\r\n   * Handle PO status change and sync with inventory/stock movement\r\n   * @param {Object} po - Purchase Order object\r\n   * @param {string} newStatus - New status ('received', 'cancelled', etc.)\r\n   * @param {string} newStockStatus - New stock status ('transit', 'retain')\r\n   */\r\n  async handlePOStatusChange(po, newStatus, newStockStatus) {\r\n    try {\r\n      console.log('Handling PO status change:', { po, newStatus, newStockStatus });\r\n      \r\n      // If PO is marked as received, add items to inventory\r\n      if (newStatus === 'received' && po.items && po.items.length > 0) {\r\n        await this.addPOItemsToInventory(po);\r\n      }\r\n      \r\n      // If stock status changes from transit to retain for a received PO\r\n      if (newStockStatus === 'retain' && po.stockStatus === 'transit' && po.status === 'received') {\r\n        await this.movePOFromTransitToStock(po);\r\n      }\r\n      \r\n      return true;\r\n    } catch (error) {\r\n      console.error('Error handling PO status change:', error);\r\n      notificationService.error('Failed to sync PO with inventory');\r\n      throw error;\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * Add PO items to inventory when PO is received\r\n   * @param {Object} po - Purchase Order object\r\n   */\r\n  async addPOItemsToInventory(po) {\r\n    try {\r\n      for (const item of po.items) {\r\n        if ((item.productType || item.name) && item.quantity > 0) {\r\n          // Check if inventory item already exists\r\n          const existingItems = await this.findExistingInventoryItem(item, po.warehouseId);\r\n          \r\n          if (existingItems.length > 0) {\r\n            // Update existing inventory item quantity\r\n            const existingItem = existingItems[0];\r\n            const newQuantity = existingItem.quantity + item.quantity;\r\n            \r\n            await inventoryService.updateItem(existingItem.id, {\r\n              ...existingItem,\r\n              quantity: newQuantity,\r\n            });\r\n            \r\n            console.log(`Updated existing inventory item ${existingItem.id} with additional quantity ${item.quantity}`);\r\n          } else {\r\n            // Create new inventory item\r\n            const inventoryItem = {\r\n              productType: item.productType || item.name,\r\n              grade: item.grade || '',\r\n              thickness: item.thickness || '',\r\n              size: item.size || '',\r\n              finish: item.finish || '',\r\n              quantity: item.quantity,\r\n              pricePurchased: item.rate || 0,\r\n              sellingPrice: 0, // To be set later\r\n              landedCost: item.rate || 0,\r\n              warehouseId: po.warehouseId,\r\n              warehouseName: po.warehouseName || '',\r\n              location: `From PO #${po.poNumber}`,\r\n              description: this.generateItemDescription(item),\r\n            };\r\n\r\n            await inventoryService.createItem(inventoryItem);\r\n            console.log('Created new inventory item:', inventoryItem);\r\n          }\r\n          \r\n          // Create stock movement\r\n          await this.createStockMovement(po, item, 'IN', `Received from PO #${po.poNumber}`);\r\n        }\r\n      }\r\n      \r\n      notificationService.success(`Added ${po.items.length} items to inventory from PO #${po.poNumber}`);\r\n    } catch (error) {\r\n      console.error('Error adding PO items to inventory:', error);\r\n      throw error;\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * Move items from transit to actual stock\r\n   * @param {Object} po - Purchase Order object\r\n   */\r\n  async movePOFromTransitToStock(po) {\r\n    try {\r\n      // This will be handled by the stock movement filtering logic\r\n      // Transit items will automatically disappear from stock movement view\r\n      // when stock_status changes from 'transit' to 'retain'\r\n      \r\n      notificationService.success(`PO #${po.poNumber} items moved from transit to stock`);\r\n    } catch (error) {\r\n      console.error('Error moving PO from transit to stock:', error);\r\n      throw error;\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * Find existing inventory item that matches the PO item\r\n   * @param {Object} item - PO item\r\n   * @param {string} warehouseId - Warehouse ID\r\n   * @returns {Array} - Array of matching inventory items\r\n   */\r\n  async findExistingInventoryItem(_item, _warehouseId) {\r\n    // This would ideally use a search API endpoint\r\n    // For now, we'll create new items to avoid complexity\r\n    return [];\r\n  }\r\n  \r\n  /**\r\n   * Create stock movement record\r\n   * @param {Object} po - Purchase Order object\r\n   * @param {Object} item - PO item\r\n   * @param {string} movement - 'IN' or 'OUT'\r\n   * @param {string} notes - Movement notes\r\n   */\r\n  async createStockMovement(po, item, movement, notes) {\r\n    try {\r\n      const stockMovement = {\r\n        date: new Date().toISOString().split('T')[0],\r\n        movement,\r\n        productType: item.productType || item.name,\r\n        grade: item.grade || '',\r\n        thickness: item.thickness || '',\r\n        size: item.size || '',\r\n        finish: item.finish || '',\r\n        invoiceNo: po.poNumber,\r\n        quantity: movement === 'OUT' ? -item.quantity : item.quantity,\r\n        currentStock: 0, // Will be calculated by backend\r\n        seller: po.supplierName,\r\n        notes,\r\n      };\r\n      \r\n      await stockMovementService.createMovement(stockMovement);\r\n      console.log('Created stock movement:', stockMovement);\r\n    } catch (error) {\r\n      console.error('Error creating stock movement:', error);\r\n      throw error;\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * Generate item description from PO item details\r\n   * @param {Object} item - PO item\r\n   * @returns {string} - Generated description\r\n   */\r\n  generateItemDescription(item) {\r\n    const parts = [];\r\n    if (item.productType || item.name) parts.push(`SS ${(item.productType || item.name).toUpperCase()}`);\r\n    if (item.grade) parts.push(`GR${item.grade}`);\r\n    if (item.finish) parts.push(`${item.finish} finish`);\r\n    if (item.size) parts.push(item.size);\r\n    if (item.thickness) parts.push(`${item.thickness}MM`);\r\n    \r\n    return parts.join(' ') || 'Steel Product';\r\n  }\r\n  \r\n  /**\r\n   * Get PO items that should appear in stock movement as transit\r\n   * @param {Array} purchaseOrders - Array of POs\r\n   * @returns {Array} - Array of transit stock movements\r\n   */\r\n  generateTransitStockMovements(purchaseOrders) {\r\n    const transitMovements = [];\r\n    \r\n    for (const po of purchaseOrders) {\r\n      // Only show as transit if stock_status is 'transit' and not yet received/cancelled\r\n      if (po.stockStatus === 'transit' && po.status !== 'received' && po.status !== 'cancelled') {\r\n        if (po.items && Array.isArray(po.items)) {\r\n          for (const item of po.items) {\r\n            if ((item.productType || item.name) && item.quantity > 0) {\r\n              transitMovements.push({\r\n                id: `transit_${po.id}_${item.id || Math.random()}`,\r\n                date: po.expectedDeliveryDate || po.poDate,\r\n                movement: 'OUT',\r\n                productType: item.productType || item.name,\r\n                grade: item.grade || '',\r\n                thickness: item.thickness || '',\r\n                size: item.size || '',\r\n                finish: item.finish || '',\r\n                invoiceNo: po.poNumber,\r\n                quantity: -item.quantity, // Negative for transit\r\n                currentStock: 0,\r\n                seller: po.supplierName,\r\n                notes: `In Transit from PO #${po.poNumber}`,\r\n                isTransit: true,\r\n              });\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n    \r\n    return transitMovements;\r\n  }\r\n}\r\n\r\nexport const purchaseOrderSyncService = new PurchaseOrderSyncService();\r\n","usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\services\\roleService.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\services\\shippingDocumentService.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\services\\stockMovementService.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\services\\supplierService.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\services\\templateService.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\services\\tradeFinanceService.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\services\\trnService.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\services\\userAdminApi.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\services\\vatAdjustmentService.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\services\\vatAmendmentService.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\services\\vatRateService.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\services\\vatReturnService.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\services\\vatService.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\services\\vendorBillService.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\services\\warehouseService.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\test\\fieldNaming.contract.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\test\\invoice-locking.test.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\test\\mocks\\creditNoteMocks.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\test\\setup.js","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'expect' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":16}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import '@testing-library/jest-dom';\r\nimport { expect, afterEach, vi } from 'vitest';\r\nimport { cleanup } from '@testing-library/react';\r\n\r\n// Cleanup after each test\r\nafterEach(() => {\r\n  cleanup();\r\n});\r\n\r\n// Make vi globally available (for mocking)\r\nglobal.vi = vi;\r\n\r\n// Polyfill for scrollIntoView (JSDOM doesn't implement this)\r\nif (!Element.prototype.scrollIntoView) {\r\n  Element.prototype.scrollIntoView = function() {};\r\n}\r\n","usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\tests\\fixtures\\roleMocks.js","messages":[],"suppressedMessages":[{"ruleId":"no-undef","severity":2,"message":"'vi' is not defined.","line":497,"column":12,"nodeType":"Identifier","messageId":"undef","endLine":497,"endColumn":14,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'vi' is not defined.","line":497,"column":20,"nodeType":"Identifier","messageId":"undef","endLine":497,"endColumn":22,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":497,"column":30,"nodeType":"Identifier","messageId":"undef","endLine":497,"endColumn":34,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":497,"column":40,"nodeType":"Identifier","messageId":"undef","endLine":497,"endColumn":44,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'vi' is not defined.","line":498,"column":10,"nodeType":"Identifier","messageId":"undef","endLine":498,"endColumn":12,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'vi' is not defined.","line":498,"column":18,"nodeType":"Identifier","messageId":"undef","endLine":498,"endColumn":20,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":498,"column":28,"nodeType":"Identifier","messageId":"undef","endLine":498,"endColumn":32,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":498,"column":38,"nodeType":"Identifier","messageId":"undef","endLine":498,"endColumn":42,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'vi' is not defined.","line":499,"column":12,"nodeType":"Identifier","messageId":"undef","endLine":499,"endColumn":14,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'vi' is not defined.","line":499,"column":20,"nodeType":"Identifier","messageId":"undef","endLine":499,"endColumn":22,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":499,"column":30,"nodeType":"Identifier","messageId":"undef","endLine":499,"endColumn":34,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":499,"column":40,"nodeType":"Identifier","messageId":"undef","endLine":499,"endColumn":44,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'vi' is not defined.","line":500,"column":9,"nodeType":"Identifier","messageId":"undef","endLine":500,"endColumn":11,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'vi' is not defined.","line":500,"column":17,"nodeType":"Identifier","messageId":"undef","endLine":500,"endColumn":19,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":500,"column":27,"nodeType":"Identifier","messageId":"undef","endLine":500,"endColumn":31,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":500,"column":37,"nodeType":"Identifier","messageId":"undef","endLine":500,"endColumn":41,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'vi' is not defined.","line":507,"column":13,"nodeType":"Identifier","messageId":"undef","endLine":507,"endColumn":15,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'vi' is not defined.","line":507,"column":21,"nodeType":"Identifier","messageId":"undef","endLine":507,"endColumn":23,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":507,"column":31,"nodeType":"Identifier","messageId":"undef","endLine":507,"endColumn":35,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":507,"column":41,"nodeType":"Identifier","messageId":"undef","endLine":507,"endColumn":45,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'vi' is not defined.","line":508,"column":12,"nodeType":"Identifier","messageId":"undef","endLine":508,"endColumn":14,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'vi' is not defined.","line":508,"column":20,"nodeType":"Identifier","messageId":"undef","endLine":508,"endColumn":22,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":508,"column":30,"nodeType":"Identifier","messageId":"undef","endLine":508,"endColumn":34,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":508,"column":40,"nodeType":"Identifier","messageId":"undef","endLine":508,"endColumn":44,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'vi' is not defined.","line":509,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":509,"endColumn":17,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'vi' is not defined.","line":509,"column":23,"nodeType":"Identifier","messageId":"undef","endLine":509,"endColumn":25,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":509,"column":33,"nodeType":"Identifier","messageId":"undef","endLine":509,"endColumn":37,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":509,"column":43,"nodeType":"Identifier","messageId":"undef","endLine":509,"endColumn":47,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'vi' is not defined.","line":510,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":510,"endColumn":17,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'vi' is not defined.","line":510,"column":23,"nodeType":"Identifier","messageId":"undef","endLine":510,"endColumn":25,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":510,"column":33,"nodeType":"Identifier","messageId":"undef","endLine":510,"endColumn":37,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":510,"column":43,"nodeType":"Identifier","messageId":"undef","endLine":510,"endColumn":47,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'vi' is not defined.","line":511,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":511,"endColumn":17,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'vi' is not defined.","line":511,"column":23,"nodeType":"Identifier","messageId":"undef","endLine":511,"endColumn":25,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":511,"column":33,"nodeType":"Identifier","messageId":"undef","endLine":511,"endColumn":37,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":511,"column":43,"nodeType":"Identifier","messageId":"undef","endLine":511,"endColumn":47,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'vi' is not defined.","line":512,"column":22,"nodeType":"Identifier","messageId":"undef","endLine":512,"endColumn":24,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'vi' is not defined.","line":512,"column":30,"nodeType":"Identifier","messageId":"undef","endLine":512,"endColumn":32,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":512,"column":40,"nodeType":"Identifier","messageId":"undef","endLine":512,"endColumn":44,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":512,"column":50,"nodeType":"Identifier","messageId":"undef","endLine":512,"endColumn":54,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'vi' is not defined.","line":513,"column":22,"nodeType":"Identifier","messageId":"undef","endLine":513,"endColumn":24,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'vi' is not defined.","line":513,"column":30,"nodeType":"Identifier","messageId":"undef","endLine":513,"endColumn":32,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":513,"column":40,"nodeType":"Identifier","messageId":"undef","endLine":513,"endColumn":44,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":513,"column":50,"nodeType":"Identifier","messageId":"undef","endLine":513,"endColumn":54,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'vi' is not defined.","line":514,"column":23,"nodeType":"Identifier","messageId":"undef","endLine":514,"endColumn":25,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'vi' is not defined.","line":514,"column":31,"nodeType":"Identifier","messageId":"undef","endLine":514,"endColumn":33,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":514,"column":41,"nodeType":"Identifier","messageId":"undef","endLine":514,"endColumn":45,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":514,"column":51,"nodeType":"Identifier","messageId":"undef","endLine":514,"endColumn":55,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'vi' is not defined.","line":515,"column":16,"nodeType":"Identifier","messageId":"undef","endLine":515,"endColumn":18,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'vi' is not defined.","line":515,"column":24,"nodeType":"Identifier","messageId":"undef","endLine":515,"endColumn":26,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":515,"column":34,"nodeType":"Identifier","messageId":"undef","endLine":515,"endColumn":38,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":515,"column":44,"nodeType":"Identifier","messageId":"undef","endLine":515,"endColumn":48,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'vi' is not defined.","line":516,"column":21,"nodeType":"Identifier","messageId":"undef","endLine":516,"endColumn":23,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'vi' is not defined.","line":516,"column":29,"nodeType":"Identifier","messageId":"undef","endLine":516,"endColumn":31,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":516,"column":39,"nodeType":"Identifier","messageId":"undef","endLine":516,"endColumn":43,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":516,"column":49,"nodeType":"Identifier","messageId":"undef","endLine":516,"endColumn":53,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'vi' is not defined.","line":517,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":517,"endColumn":17,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'vi' is not defined.","line":517,"column":23,"nodeType":"Identifier","messageId":"undef","endLine":517,"endColumn":25,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":517,"column":33,"nodeType":"Identifier","messageId":"undef","endLine":517,"endColumn":37,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":517,"column":43,"nodeType":"Identifier","messageId":"undef","endLine":517,"endColumn":47,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'vi' is not defined.","line":518,"column":26,"nodeType":"Identifier","messageId":"undef","endLine":518,"endColumn":28,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'vi' is not defined.","line":518,"column":34,"nodeType":"Identifier","messageId":"undef","endLine":518,"endColumn":36,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":518,"column":44,"nodeType":"Identifier","messageId":"undef","endLine":518,"endColumn":48,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":518,"column":54,"nodeType":"Identifier","messageId":"undef","endLine":518,"endColumn":58,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'vi' is not defined.","line":519,"column":27,"nodeType":"Identifier","messageId":"undef","endLine":519,"endColumn":29,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'vi' is not defined.","line":519,"column":35,"nodeType":"Identifier","messageId":"undef","endLine":519,"endColumn":37,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":519,"column":45,"nodeType":"Identifier","messageId":"undef","endLine":519,"endColumn":49,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":519,"column":55,"nodeType":"Identifier","messageId":"undef","endLine":519,"endColumn":59,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'vi' is not defined.","line":520,"column":16,"nodeType":"Identifier","messageId":"undef","endLine":520,"endColumn":18,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'vi' is not defined.","line":520,"column":24,"nodeType":"Identifier","messageId":"undef","endLine":520,"endColumn":26,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":520,"column":34,"nodeType":"Identifier","messageId":"undef","endLine":520,"endColumn":38,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":520,"column":44,"nodeType":"Identifier","messageId":"undef","endLine":520,"endColumn":48,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\tests\\integration\\roleEndpoints.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\tests\\unit\\roleValidation.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\theme\\muiTheme.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\types\\customer.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":62,"column":33,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":62,"endColumn":36,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2045,2048],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2045,2048],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Canonical Customer Type (camelCase only)\n * This is the NORMALIZED frontend schema after customerNormalizer processes API data.\n * \n * IMPORTANT: Backend/API uses snake_case. Frontend MUST use camelCase.\n * The customerNormalizer converts snake_case ΓåÆ camelCase.\n */\n\n/**\n * Main Customer interface - CAMELCASE ONLY\n * All fields that exist after customerNormalizer processing\n */\nexport interface Customer {\n  // Core identifiers\n  id: number;\n  name: string;\n  company?: string;\n  \n  // Contact information\n  email?: string;\n  phone?: string;\n  address?: string;\n  \n  // Tax & Compliance\n  vatNumber?: string;\n  trn?: string; // Tax registration number\n  \n  // Financial & Credit Management\n  creditLimit?: number;\n  currentCredit?: number;\n  // Phase 5: Enhanced Credit Management\n  creditUsed?: number;                    // Amount of credit currently utilized\n  creditAvailable?: number;               // Available credit (credit_limit - credit_used)\n  creditScore?: number;                   // Credit score 0-100 based on DSO and payment history\n  creditGrade?: string;                   // Credit grade A|B|C|D|E\n  dsoDay?: number;                        // Days Sales Outstanding\n  \n  // Aging Analysis (5 buckets)\n  agingCurrent?: number;                  // Not yet due\n  aging1_30?: number;                     // 1-30 days overdue\n  aging31_60?: number;                    // 31-60 days overdue\n  aging61_90?: number;                    // 61-90 days overdue\n  aging90_plus?: number;                  // 90+ days overdue\n  \n  // Credit tracking\n  lastPaymentDate?: string | null;        // When last payment was received\n  creditReviewDate?: string | null;       // Next credit review date\n  lastCreditUpdated?: string | null;      // When credit metrics were last calculated\n  \n  paymentTerms?: string;\n  revenue?: number;\n  \n  // Metadata\n  status?: string;\n  orders?: number;\n  customer?: object; // Nested customer reference\n}\n\n/**\n * Type guard to check if object is a valid Customer\n */\nexport function isCustomer(obj: any): obj is Customer {\n  return (\n    obj &&\n    typeof obj === 'object' &&\n    typeof obj.id === 'number' &&\n    typeof obj.name === 'string'\n  );\n}\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\types\\delivery-note.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":34,"column":10,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":34,"endColumn":13,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[847,850],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[847,850],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":48,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":48,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1106,1109],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1106,1109],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Canonical DeliveryNote Type (camelCase only)\n * This is the NORMALIZED frontend schema after deliveryNoteNormalizer processes API data.\n * \n * IMPORTANT: Backend/API uses snake_case. Frontend MUST use camelCase.\n * The deliveryNoteNormalizer converts snake_case ΓåÆ camelCase.\n */\n\n/**\n * Main DeliveryNote interface - CAMELCASE ONLY\n * All fields that exist after deliveryNoteNormalizer processing\n */\nexport interface DeliveryNote {\n  // Core identifiers\n  id: number;\n  deliveryNoteNumber: string;\n  deliveryDate?: string;\n  \n  // Related documents\n  invoiceId?: number;\n  invoiceNumber?: string;\n  purchaseOrderId?: number;\n  \n  // Customer & Delivery\n  customerDetails?: object;\n  deliveryAddress?: string;\n  \n  // Driver & Vehicle\n  driverName?: string;\n  driverPhone?: string;\n  vehicleNumber?: string;\n  \n  // Items & Status\n  items: any[];\n  status?: string;\n  isPartial?: boolean;\n  \n  // Notes & Metadata\n  notes?: string;\n  hasNotes?: boolean;\n  tooltip?: string;\n  enabled?: boolean;\n}\n\n/**\n * Type guard to check if object is a valid DeliveryNote\n */\nexport function isDeliveryNote(obj: any): obj is DeliveryNote {\n  return (\n    obj &&\n    typeof obj === 'object' &&\n    typeof obj.id === 'number' &&\n    typeof obj.deliveryNoteNumber === 'string'\n  );\n}\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\types\\generated\\common.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":67,"column":13,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":67,"endColumn":16,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1723,1726],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1723,1726],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":75,"column":14,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":75,"endColumn":17,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1913,1916],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1913,1916],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":83,"column":13,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":83,"endColumn":16,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2056,2059],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2056,2059],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * AUTO-GENERATED FROM PROTO FILES\r\n * Source: steelapprnp/proto/steelapp/common.proto\r\n *\r\n * DO NOT EDIT MANUALLY - Run `npm run generate-types` to regenerate\r\n *\r\n * These types match the gRPC backend schema exactly.\r\n * After API Gateway case conversion: snake_case -> camelCase\r\n */\r\n\r\n// ============================================\r\n// Pagination Types (from PageInfo message)\r\n// ============================================\r\n\r\n/**\r\n * Pagination response from API (camelCase after gateway conversion)\r\n * Maps to proto PageInfo message\r\n */\r\nexport interface PageInfo {\r\n  /** Total number of items across all pages */\r\n  totalItems: number;\r\n  /** Total number of pages */\r\n  totalPages: number;\r\n  /** Current page number (1-indexed) */\r\n  currentPage: number;\r\n  /** Items per page */\r\n  perPage: number;\r\n  /** Whether there is a next page */\r\n  hasNext: boolean;\r\n  /** Whether there is a previous page */\r\n  hasPrev: boolean;\r\n}\r\n\r\n/**\r\n * Pagination request parameters (camelCase for frontend)\r\n * Maps to proto PageRequest message\r\n */\r\nexport interface PageRequest {\r\n  /** Page number (1-indexed) */\r\n  page: number;\r\n  /** Items per page (max 100) */\r\n  limit: number;\r\n  /** Optional search query */\r\n  search?: string;\r\n  /** Field to sort by */\r\n  sortBy?: string;\r\n  /** Sort order: 'asc' or 'desc' */\r\n  sortOrder?: 'asc' | 'desc';\r\n}\r\n\r\n// ============================================\r\n// Common Response Types\r\n// ============================================\r\n\r\n/**\r\n * Generic paginated API response\r\n */\r\nexport interface PaginatedResponse<T> {\r\n  items: T[];\r\n  pagination: PageInfo;\r\n}\r\n\r\n/**\r\n * Invoice list response structure\r\n */\r\nexport interface InvoiceListResponse {\r\n  invoices: any[]; // Will be typed properly with Invoice type\r\n  pagination: PageInfo | null;\r\n}\r\n\r\n/**\r\n * Customer list response structure\r\n */\r\nexport interface CustomerListResponse {\r\n  customers: any[];\r\n  pagination: PageInfo | null;\r\n}\r\n\r\n/**\r\n * Product list response structure\r\n */\r\nexport interface ProductListResponse {\r\n  products: any[];\r\n  pagination: PageInfo | null;\r\n}\r\n\r\n// ============================================\r\n// Error Types\r\n// ============================================\r\n\r\nexport interface ErrorDetail {\r\n  field: string;\r\n  message: string;\r\n  code: string;\r\n}\r\n\r\n// ============================================\r\n// Money/Currency Types\r\n// ============================================\r\n\r\nexport interface Money {\r\n  amount: number;\r\n  /** ISO 4217 currency code (e.g., \"AED\", \"USD\") */\r\n  currency: string;\r\n}\r\n\r\n// ============================================\r\n// Address Type\r\n// ============================================\r\n\r\nexport interface Address {\r\n  street: string;\r\n  city: string;\r\n  state: string;\r\n  postalCode: string;\r\n  country: string;\r\n}\r\n\r\n// ============================================\r\n// Audit Info\r\n// ============================================\r\n\r\nexport interface AuditInfo {\r\n  createdBy: number;\r\n  createdAt: string; // ISO 8601 timestamp\r\n  updatedBy: number;\r\n  updatedAt: string;\r\n  deletedBy?: number;\r\n  deletedAt?: string;\r\n}\r\n\r\n// ============================================\r\n// Status Enums\r\n// ============================================\r\n\r\nexport type Status =\r\n  | 'draft'\r\n  | 'pending'\r\n  | 'approved'\r\n  | 'rejected'\r\n  | 'active'\r\n  | 'inactive'\r\n  | 'completed'\r\n  | 'cancelled'\r\n  | 'issued'\r\n  | 'sent';\r\n\r\nexport type PaymentStatus =\r\n  | 'unpaid'\r\n  | 'partially_paid'\r\n  | 'paid'\r\n  | 'overdue'\r\n  | 'refunded';\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\types\\generated\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\types\\index.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\types\\invoice.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":188,"column":32,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":188,"endColumn":35,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5637,5640],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5637,5640],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Canonical Invoice Type (camelCase only)\n * This is the NORMALIZED frontend schema after invoiceNormalizer processes API data.\n * \n * IMPORTANT: Backend/API uses snake_case. Frontend MUST use camelCase.\n * The invoiceNormalizer converts snake_case ΓåÆ camelCase.\n */\n\nexport interface CustomerDetails {\n  id: number;\n  name: string;\n  email?: string;\n  phone?: string;\n  address?: string;\n  gstNumber?: string;\n}\n\nexport interface InvoiceItem {\n  id?: number;\n  productId: number;\n  productName: string;\n  description?: string;\n  quantity: number;\n  rate: number;\n  unit?: string;\n  amount: number;\n  vatRate?: number;\n  vatAmount?: number;\n}\n\nexport interface PaymentRecord {\n  id: number;\n  amount: number;\n  paymentDate: string;\n  paymentMethod?: string;\n  notes?: string;\n  createdAt?: string;\n}\n\nexport interface DeliveryStatus {\n  hasNotes: boolean;\n  count: number;\n  lastDeliveryDate?: string;\n}\n\n/**\n * Main Invoice interface - CAMELCASE ONLY\n * All fields that exist after invoiceNormalizer processing\n */\nexport interface Invoice {\n  // Core identifiers\n  id: number;\n  invoiceNumber: string;\n  \n  // Dates (ISO 8601 strings)\n  invoiceDate: string;\n  dueDate: string;\n  date: string; // Legacy alias for invoiceDate (used by pdfGenerator, stockUtils)\n  promiseDate?: string | null; // Promise/delivery date\n  createdAt?: string;\n  updatedAt?: string;\n  deletedAt?: string | null;\n  \n  // Invoice Revision Tracking (24-hour edit grace period)\n  issuedAt?: string | null;        // When invoice was issued (for 24h edit window)\n  revisionNumber?: number;          // 1 = original, 2+ = revisions\n  revisedAt?: string | null;        // Timestamp of last revision\n  originalInvoiceId?: number | null; // Reference to original invoice (for revisions)\n  supersededAt?: string | null;     // When this invoice was superseded\n  supersededBy?: number | null;     // ID of revision that superseded this\n  supersededReason?: string | null; // REVISED, CANCELLED, etc.\n  \n  // Customer information\n  customerId: number;\n  customerDetails: CustomerDetails;\n  customer: CustomerDetails; // Legacy alias for customerDetails (used by pdfGenerator, reminderUtils)\n  customerName?: string; // Denormalized for quick access\n  customerEmail?: string; // Customer email for quick access\n  \n  // Customer Purchase Order\n  customerPurchaseOrderNumber?: string;\n  customerPurchaseOrderDate?: string;\n  \n  // Financial\n  subtotal: number;\n  vatAmount: number;\n  total: number;\n  totalAmount: number; // Alias for total\n  received: number;\n  outstanding: number;\n  balanceDue?: number;\n  \n  // Discounts & Currency\n  discountPercentage?: number;\n  discountAmount?: number;\n  discountType?: string;\n  currency?: string;\n  exchangeRate?: number;\n  \n  // Additional Charges\n  packingCharges?: number;\n  loadingCharges?: number;\n  freightCharges?: number;\n  insuranceCharges?: number;\n  otherCharges?: number;\n  taxNotes?: string;\n\n  // Charge VAT Fields (Phase 1 - Migration 100)\n  // UAE VAT on individual charges: 5% domestic, 0% export\n  packingChargesVat?: number;\n  freightChargesVat?: number;\n  insuranceChargesVat?: number;\n  loadingChargesVat?: number;\n  otherChargesVat?: number;\n  isExport?: boolean;            // True = export (0% VAT), False = domestic (5% VAT)\n\n  // Advance Payment Integration (Phase 1 - Migration 102)\n  // UAE FTA Article 26 Compliance\n  advancePaymentId?: number;         // Reference to advance_payments table\n  advanceTaxInvoiceNumber?: string;  // Tax invoice number issued for advance\n  \n  // Status fields\n  status: 'draft' | 'issued' | 'cancelled' | 'void';\n  paymentStatus: 'unpaid' | 'partially_paid' | 'paid' | 'overdue';\n  \n  // Items\n  items: InvoiceItem[];\n  \n  // Sales & Commission (Phase 5: Enhanced Commission Management)\n  salesAgentId?: number | null;\n  salesPersonId?: number | null;  // Phase 5: Alternative field name\n  salesAgentName?: string;\n  commissionPercentage?: number;  // Phase 5: Commission rate (e.g., 10.00)\n  commissionAmount?: number;\n  commissionStatus?: 'PENDING' | 'APPROVED' | 'PAID' | 'VOIDED';  // Phase 5: Commission status\n  commissionGracePeriodEndDate?: string | null;  // Phase 5: Until when commission can be corrected\n  commissionApprovedDate?: string | null;  // Phase 5: When commission was approved\n  commissionPayoutDate?: string | null;  // Phase 5: When commission was paid\n  commissionCalculated?: boolean;\n  \n  // Payment tracking\n  payments?: PaymentRecord[];\n  lastPaymentDate?: string | null;\n  advanceReceived?: number;\n  modeOfPayment?: string;\n  chequeNumber?: string;\n  \n  // Warehouse\n  warehouseId?: number;\n  warehouseName?: string;\n  warehouseCode?: string;\n  warehouseCity?: string;\n  \n  // UAE VAT Compliance Fields\n  placeOfSupply?: string;  // Emirate where supply is made\n  supplyDate?: string;     // Date of supply (tax point)\n  isReverseCharge?: boolean;  // Reverse charge applies\n  reverseChargeAmount?: number;  // Amount subject to reverse charge\n  exchangeRateDate?: string;  // Date when exchange rate was determined\n  \n  // Delivery tracking\n  deliveryStatus?: DeliveryStatus;\n  \n  // Soft delete & recreation\n  deletionReason?: string | null;\n  recreatedFrom?: string | null;\n  \n  // Notes & Terms\n  notes?: string;\n  terms?: string; // Canonical UI field name\n  termsAndConditions?: string; // Backend/legacy alias for terms\n  \n  // Company details (if embedded)\n  companyDetails?: {\n    name: string;\n    address?: string;\n    phone?: string;\n    email?: string;\n    gstNumber?: string;\n    logoUrl?: string;\n    sealUrl?: string;\n  };\n}\n\n/**\n * Type guard to check if object is a valid Invoice\n */\nexport function isInvoice(obj: any): obj is Invoice {\n  return (\n    obj &&\n    typeof obj === 'object' &&\n    typeof obj.id === 'number' &&\n    typeof obj.invoiceNumber === 'string' &&\n    typeof obj.status === 'string'\n  );\n}\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\types\\payment.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":51,"column":32,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":51,"endColumn":35,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1398,1401],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1398,1401],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Canonical Payment Type (camelCase only)\n * This is the NORMALIZED frontend schema after paymentNormalizer processes API data.\n * \n * IMPORTANT: Backend/API uses snake_case. Frontend MUST use camelCase.\n * The paymentNormalizer converts snake_case ΓåÆ camelCase.\n */\n\n/**\n * Main Payment interface - CAMELCASE ONLY\n * All fields that exist after paymentNormalizer processing\n */\nexport interface Payment {\n  // Core identifiers\n  id: number;\n  invoiceNumber?: string;\n\n  // Payment details\n  amount: number;\n  paymentDate?: string;\n  date?: string; // Alias for paymentDate\n\n  // Payment method/mode\n  paymentMethod?: string;\n  paymentMode?: string;\n  method?: string; // Alias for paymentMethod\n\n  // Reference tracking\n  referenceNumber?: string;\n  reference?: string; // Alias for referenceNumber\n  receiptNumber?: string;\n\n  // Notes & metadata\n  notes?: string;\n  createdAt?: string;\n\n  // Void tracking\n  voided?: boolean;\n  voidedAt?: string;\n\n  // Multi-currency Payment Support (Phase 1 - Migration 103)\n  // Enables FX tracking for international transactions\n  currency?: string;           // ISO 4217 code (AED, USD, EUR, GBP, SAR)\n  exchangeRate?: number;       // Exchange rate: 1 currency unit = X AED\n  amountInAed?: number;        // Payment amount converted to AED for VAT reporting\n}\n\n/**\n * Type guard to check if object is a valid Payment\n */\nexport function isPayment(obj: any): obj is Payment {\n  return (\n    obj &&\n    typeof obj === 'object' &&\n    typeof obj.id === 'number' &&\n    typeof obj.amount === 'number'\n  );\n}\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\types\\product.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":94,"column":32,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":94,"endColumn":35,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2493,2496],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2493,2496],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Canonical Product Type (camelCase only)\n * This is the NORMALIZED frontend schema after productNormalizer processes API data.\n * \n * IMPORTANT: Backend/API uses snake_case. Frontend MUST use camelCase.\n * The productNormalizer converts snake_case ΓåÆ camelCase.\n */\n\n/**\n * Main Product interface - CAMELCASE ONLY\n * All fields that exist after productNormalizer processing\n */\nexport interface Product {\n  // Core identifiers\n  id: number;\n  name: string;\n  fullName?: string;\n  title?: string;\n  description?: string;\n  \n  // Category & Classification\n  category?: string;\n  commodity?: string;\n  grade?: string;\n  gradeVariant?: string;\n  steelGrade?: string;\n  \n  // Dimensions\n  thickness?: string | number;\n  thick?: string | number; // Alias for thickness\n  width?: string | number;\n  length?: string | number;\n  size?: string;\n  sizeInch?: string | number;\n  nbSize?: string;\n  diameter?: string | number;\n  od?: string | number; // Outer diameter\n  dimensions?: string | object;\n  \n  // Finish & Specifications\n  finish?: string;\n  finishType?: string;\n  surfaceFinish?: string; // Alias for finish\n  specifications?: string;\n  specification?: string; // Singular alias\n  schedule?: string;\n\n  // Phase 3: Product Master Data (added 2025-12-02)\n  hsCode?: string;                    // Harmonized System code (6-10 digits for customs)\n  countryOfOrigin?: string;           // Manufacturing country for export docs\n  millName?: string;                  // Steel mill/manufacturer name\n  productCategory?: string;           // Product category (COIL, SHEET, PLATE, PIPE, TUBE, BAR, FLAT)\n  surfaceFinishOptions?: string | Array<{finish: string, available: boolean}>; // Available finishes\n  \n  // Pricing\n  price?: number;\n  sellingPrice?: number;\n  costPrice?: number;\n  purchasePrice?: number;\n  unitPrice?: number;\n  \n  // Inventory & Stock\n  currentStock?: number;\n  minStock?: number;\n  maxStock?: number;\n  quantity?: number;\n  unit?: string;\n  location?: string;\n  \n  // Tax & Compliance\n  hsnCode?: string;\n  gstRate?: number;\n  \n  // Analytics & Metrics\n  revenue?: number;\n  revenueGrowth?: number;\n  prevRevenue?: number;\n  sales?: number;\n  orders?: number;\n  ordersGrowth?: number;\n  prevOrders?: number;\n  quantityGrowth?: number;\n  prevQuantity?: number;\n  \n  // Related Data\n  supplier?: string | object;\n  product?: object; // Nested product reference\n  image?: string;\n}\n\n/**\n * Type guard to check if object is a valid Product\n */\nexport function isProduct(obj: any): obj is Product {\n  return (\n    obj &&\n    typeof obj === 'object' &&\n    typeof obj.id === 'number' &&\n    typeof obj.name === 'string'\n  );\n}\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\types\\purchase-order.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":57,"column":10,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":57,"endColumn":13,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1378,1381],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1378,1381],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":73,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":73,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1668,1671],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1668,1671],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Canonical PurchaseOrder Type (camelCase only)\n * This is the NORMALIZED frontend schema after purchaseOrderNormalizer processes API data.\n * \n * IMPORTANT: Backend/API uses snake_case. Frontend MUST use camelCase.\n * The purchaseOrderNormalizer converts snake_case ΓåÆ camelCase.\n */\n\n/**\n * Main PurchaseOrder interface - CAMELCASE ONLY\n * All fields that exist after purchaseOrderNormalizer processing\n */\nexport interface PurchaseOrder {\n  // Core identifiers\n  poNumber: string;\n  poDate?: string;\n  dueDate?: string;\n  expectedDeliveryDate?: string;\n  \n  // Supplier information\n  supplierName?: string;\n  supplierEmail?: string;\n  supplierPhone?: string;\n  supplierAddress?: string;\n  supplierTRN?: string;\n  supplierContactName?: string;\n  supplierContactEmail?: string;\n  supplierContactPhone?: string;\n  \n  // Buyer information\n  buyerName?: string;\n  buyerEmail?: string;\n  buyerPhone?: string;\n  buyerDepartment?: string;\n  \n  // Financial\n  subtotal: number;\n  vatAmount: number;\n  total: number;\n  currency?: string;\n  \n  // Discounts & Charges\n  discountPercentage?: number;\n  discountAmount?: number;\n  discountType?: string;\n  shippingCharges?: number;\n  freightCharges?: number;\n  handlingCharges?: number;\n  otherCharges?: number;\n  \n  // Terms & Conditions\n  terms?: string;\n  paymentTerms?: string;\n  incoterms?: string;\n  \n  // Items & Status\n  items: any[];\n  stockStatus?: string;\n  \n  // Approval\n  approvalStatus?: string;\n  approvalDate?: string;\n  approvedBy?: string;\n  approvalComments?: string;\n  \n  // Notes\n  notes?: string;\n}\n\n/**\n * Type guard to check if object is a valid PurchaseOrder\n */\nexport function isPurchaseOrder(obj: any): obj is PurchaseOrder {\n  return (\n    obj &&\n    typeof obj === 'object' &&\n    typeof obj.poNumber === 'string' &&\n    typeof obj.total === 'number'\n  );\n}\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\types\\supplier.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":33,"column":33,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":33,"endColumn":36,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[759,762],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[759,762],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Canonical Supplier Type (camelCase only)\n * This is the NORMALIZED frontend schema after supplierNormalizer processes API data.\n * \n * IMPORTANT: Backend/API uses snake_case. Frontend MUST use camelCase.\n * The supplierNormalizer converts snake_case ΓåÆ camelCase.\n */\n\n/**\n * Main Supplier interface - CAMELCASE ONLY\n * All fields that exist after supplierNormalizer processing\n */\nexport interface Supplier {\n  // Core identifiers\n  id: number;\n  name: string;\n  \n  // Contact information\n  email?: string;\n  phone?: string;\n  address?: string;\n  \n  // Tax & Compliance\n  trn?: string; // Tax registration number\n  \n  // Financial\n  paymentTerms?: string;\n}\n\n/**\n * Type guard to check if object is a valid Supplier\n */\nexport function isSupplier(obj: any): obj is Supplier {\n  return (\n    obj &&\n    typeof obj === 'object' &&\n    typeof obj.id === 'number' &&\n    typeof obj.name === 'string'\n  );\n}\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\utils\\__tests__\\invoiceUtils.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\utils\\caseConverters.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\utils\\configurablePdfGenerator.js","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'setTextLight' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":61,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":61,"endColumn":21},{"ruleId":"no-unused-vars","severity":1,"message":"'setPrimaryColor' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":62,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":62,"endColumn":24},{"ruleId":"no-unused-vars","severity":1,"message":"'tableStartY' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":254,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":254,"endColumn":20}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import {\r\n  calculateTRN,\r\n  calculateSubtotal,\r\n  calculateTotal,\r\n  titleCase,\r\n  formatNumber,\r\n  formatDateDMY,\r\n  calculateDiscountedTRN,\r\n  getCompanyImages,\r\n} from './invoiceUtils';\r\nimport { mergeTemplateSettings } from '../constants/defaultTemplateSettings';\r\n\r\n/**\r\n * Convert hex color to RGB array\r\n * @param {string} hex - Hex color (e.g., \"#5B6DB5\")\r\n * @returns {number[]} RGB array [r, g, b]\r\n */\r\nconst hexToRgb = (hex) => {\r\n  const result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\r\n  return result\r\n    ? [\r\n      parseInt(result[1], 16),\r\n      parseInt(result[2], 16),\r\n      parseInt(result[3], 16),\r\n    ]\r\n    : [0, 0, 0];\r\n};\r\n\r\n/**\r\n * Fully configurable PDF generator based on template settings\r\n * Reads settings from company.settings.invoiceTemplate\r\n * Falls back to defaults if not configured\r\n * @param {Object} invoice - Invoice data\r\n * @param {Object} company - Company data\r\n * @param {Object} options - Options { isPreview: boolean }\r\n */\r\nexport const generateConfigurablePDF = async (invoice, company, options = {}) => {\r\n  const { jsPDF } = await import('jspdf');\r\n  const pdf = new jsPDF('p', 'mm', 'a4');\r\n  const { isPreview = false } = options;\r\n\r\n  // Get company images from company profile\r\n  const { logoUrl: logoCompany, sealUrl: sealImage } = getCompanyImages(company);\r\n\r\n  // Get template settings (merge company settings with defaults)\r\n  const settings = mergeTemplateSettings(company?.settings?.invoiceTemplate || {});\r\n  const { colors, layout, typography, branding, visibility, table, formatting, labels } = settings;\r\n\r\n  // Page dimensions\r\n  const pageWidth = pdf.internal.pageSize.getWidth();\r\n  const pageHeight = pdf.internal.pageSize.getHeight();\r\n\r\n  // Color helpers\r\n  const primaryRgb = hexToRgb(colors.primary);\r\n  const textPrimaryRgb = hexToRgb(colors.textPrimary);\r\n  const textSecondaryRgb = hexToRgb(colors.textSecondary);\r\n  const textLightRgb = hexToRgb(colors.textLight);\r\n\r\n  const setTextPrimary = () => pdf.setTextColor(...textPrimaryRgb);\r\n  const setTextSecondary = () => pdf.setTextColor(...textSecondaryRgb);\r\n  const setTextLight = () => pdf.setTextColor(...textLightRgb);\r\n  const setPrimaryColor = () => pdf.setTextColor(...primaryRgb);\r\n\r\n  let currentY = layout.marginTop;\r\n\r\n  // ==================== HEADER SECTION ====================\r\n  if (branding.companyNameInHeader) {\r\n    pdf.setFontSize(typography.fontSize.xlarge);\r\n    pdf.setFont(typography.fontFamily, 'bold');\r\n    setTextPrimary();\r\n    const companyName = company?.name || 'Ultimate Steels Building Materials Trading';\r\n    pdf.text(companyName, layout.marginLeft, currentY);\r\n    currentY += layout.lineSpacing + 1;\r\n  }\r\n\r\n  // Company info\r\n  pdf.setFontSize(typography.fontSize.base);\r\n  pdf.setFont(typography.fontFamily, 'normal');\r\n  setTextSecondary();\r\n\r\n  const compAddr = company?.address || {};\r\n  if (visibility.showCompanyAddress && compAddr.street) {\r\n    pdf.text(compAddr.street, layout.marginLeft, currentY);\r\n    currentY += layout.lineSpacing;\r\n  }\r\n\r\n  if (visibility.showCompanyAddress && (compAddr.city || compAddr.country)) {\r\n    const cityCountry = [compAddr.city, compAddr.country].filter(Boolean).join(', ');\r\n    pdf.text(cityCountry, layout.marginLeft, currentY);\r\n    currentY += layout.lineSpacing;\r\n  }\r\n\r\n  if (visibility.showCompanyPhone && company?.phone) {\r\n    pdf.text(`Mobile: ${company.phone}`, layout.marginLeft, currentY);\r\n    currentY += layout.lineSpacing;\r\n  }\r\n\r\n  if (visibility.showCompanyEmail && company?.email) {\r\n    pdf.text(`Email: ${company.email}`, layout.marginLeft, currentY);\r\n    currentY += layout.lineSpacing;\r\n  }\r\n\r\n  // VAT Number\r\n  if (branding.showVATNumber) {\r\n    pdf.setFont(typography.fontFamily, 'bold');\r\n    pdf.text('VAT Reg No: 104858252000003', layout.marginLeft, currentY);\r\n    currentY += 2;\r\n  }\r\n\r\n  // Logo\r\n  if (branding.showLogo) {\r\n    try {\r\n      const img = new Image();\r\n      img.src = logoCompany;\r\n\r\n      let logoWidth = branding.logoMaxWidth;\r\n      let logoHeight = (img.height / img.width) * logoWidth;\r\n\r\n      if (logoHeight > branding.logoMaxHeight) {\r\n        logoHeight = branding.logoMaxHeight;\r\n        logoWidth = (img.width / img.height) * logoHeight;\r\n      }\r\n\r\n      const logoX = pageWidth - layout.marginRight - logoWidth;\r\n      pdf.addImage(logoCompany, 'PNG', logoX, layout.marginTop, logoWidth, logoHeight);\r\n    } catch (error) {\r\n      console.error('Error adding logo:', error);\r\n    }\r\n  }\r\n\r\n  currentY += layout.lineSpacing;\r\n\r\n  // Horizontal line separator\r\n  pdf.setDrawColor(...primaryRgb);\r\n  pdf.setLineWidth(0.5);\r\n  pdf.line(layout.marginLeft, currentY, pageWidth - layout.marginRight, currentY);\r\n  currentY += layout.sectionSpacing;\r\n\r\n  // ==================== INVOICE TO & INFO SECTION ====================\r\n  const leftColX = layout.marginLeft;\r\n  const rightColX = pageWidth / 2 + 5;\r\n  const invoiceInfoStartY = currentY;\r\n\r\n  // LEFT SIDE - Invoice To\r\n  pdf.setFontSize(typography.fontSize.large);\r\n  pdf.setFont(typography.fontFamily, 'bold');\r\n  setTextPrimary();\r\n  pdf.text(labels.invoiceTo, leftColX, currentY);\r\n  currentY += 5;\r\n\r\n  pdf.setFontSize(typography.fontSize.base);\r\n  pdf.setFont(typography.fontFamily, 'normal');\r\n  const cust = invoice.customer || {};\r\n  const custAddr = cust.address || {};\r\n\r\n  if (cust.name) {\r\n    pdf.text(titleCase(cust.name), leftColX, currentY);\r\n    currentY += layout.lineSpacing;\r\n  }\r\n\r\n  if (custAddr.street) {\r\n    pdf.text(custAddr.street, leftColX, currentY);\r\n    currentY += layout.lineSpacing;\r\n  }\r\n\r\n  const custCityCountry = [custAddr.city, custAddr.country].filter(Boolean).join(', ');\r\n  if (custCityCountry) {\r\n    pdf.text(custCityCountry, leftColX, currentY);\r\n    currentY += layout.lineSpacing;\r\n  }\r\n\r\n  if (cust.email) {\r\n    pdf.setFont(typography.fontFamily, 'bold');\r\n    pdf.text(`Email: `, leftColX, currentY);\r\n    pdf.setFont(typography.fontFamily, 'normal');\r\n    pdf.text(cust.email, leftColX + 11, currentY);\r\n    currentY += layout.lineSpacing;\r\n  }\r\n\r\n  if (cust.phone) {\r\n    pdf.text(`Phone: ${cust.phone}`, leftColX, currentY);\r\n    currentY += layout.lineSpacing;\r\n  }\r\n\r\n  if (cust.vatNumber) {\r\n    pdf.text(`TRN: ${cust.vatNumber}`, leftColX, currentY);\r\n  }\r\n\r\n  // RIGHT SIDE - Invoice Info Box\r\n  let rightY = invoiceInfoStartY;\r\n  const boxWidth = pageWidth - rightColX - layout.marginRight;\r\n  const boxHeaderHeight = 7;\r\n\r\n  // Blue header box\r\n  pdf.setFillColor(...primaryRgb);\r\n  pdf.rect(rightColX, rightY, boxWidth, boxHeaderHeight, 'F');\r\n\r\n  pdf.setFontSize(typography.fontSize.large);\r\n  pdf.setFont(typography.fontFamily, 'bold');\r\n  pdf.setTextColor(255, 255, 255);\r\n  pdf.text(labels.invoiceNo, rightColX + 2, rightY + 5);\r\n\r\n  const invNum = invoice.invoiceNumber || '';\r\n  const invNumWidth = pdf.getTextWidth(invNum);\r\n  pdf.text(invNum, rightColX + boxWidth - invNumWidth - 2, rightY + 5);\r\n\r\n  rightY += boxHeaderHeight + 1;\r\n\r\n  // Invoice details\r\n  pdf.setFontSize(typography.fontSize.base);\r\n  setTextPrimary();\r\n\r\n  if (visibility.showInvoiceDate) {\r\n    pdf.setFont(typography.fontFamily, 'bold');\r\n    pdf.text(labels.invoiceDate, rightColX + 2, rightY + 4);\r\n    pdf.setFont(typography.fontFamily, 'normal');\r\n    pdf.text(formatDateDMY(invoice.date || new Date()), rightColX + boxWidth - 20, rightY + 4);\r\n    rightY += 6;\r\n  }\r\n\r\n  if (visibility.showCustomerPO && invoice.customerPurchaseOrderNumber) {\r\n    pdf.setFont(typography.fontFamily, 'bold');\r\n    pdf.text(labels.salesOrder, rightColX + 2, rightY + 4);\r\n    pdf.setFont(typography.fontFamily, 'normal');\r\n    pdf.text(invoice.customerPurchaseOrderNumber, rightColX + boxWidth - 20, rightY + 4);\r\n    rightY += 6;\r\n  }\r\n\r\n  if (visibility.showCustomerPODate && invoice.customerPurchaseOrderDate) {\r\n    pdf.setFont(typography.fontFamily, 'bold');\r\n    pdf.text(labels.orderDate, rightColX + 2, rightY + 4);\r\n    pdf.setFont(typography.fontFamily, 'normal');\r\n    pdf.text(formatDateDMY(invoice.customerPurchaseOrderDate), rightColX + boxWidth - 20, rightY + 4);\r\n    rightY += 6;\r\n  }\r\n\r\n  if (visibility.showDueDate && invoice.dueDate) {\r\n    pdf.setFont(typography.fontFamily, 'bold');\r\n    pdf.text(labels.dueDate, rightColX + 2, rightY + 4);\r\n    pdf.setFont(typography.fontFamily, 'normal');\r\n    pdf.text(formatDateDMY(invoice.dueDate), rightColX + boxWidth - 20, rightY + 4);\r\n    rightY += 6;\r\n  }\r\n\r\n  // Border around details box\r\n  const detailsBoxHeight = rightY - invoiceInfoStartY - boxHeaderHeight;\r\n  pdf.setDrawColor(...primaryRgb);\r\n  pdf.setLineWidth(0.3);\r\n  pdf.rect(rightColX, invoiceInfoStartY + boxHeaderHeight, boxWidth, detailsBoxHeight);\r\n\r\n  currentY = Math.max(currentY, rightY) + layout.sectionSpacing;\r\n\r\n  // ==================== TABLE SECTION ====================\r\n  const tableStartY = currentY;\r\n\r\n  // Calculate column widths from settings (percentage to actual mm)\r\n  const tableWidth = pageWidth - layout.marginLeft - layout.marginRight;\r\n  const colWidths = {\r\n    sno: (tableWidth * table.columnWidths.sno) / 100,\r\n    description: (tableWidth * table.columnWidths.description) / 100,\r\n    quantity: (tableWidth * table.columnWidths.quantity) / 100,\r\n    unitPrice: (tableWidth * table.columnWidths.unitPrice) / 100,\r\n    vat: (tableWidth * table.columnWidths.vat) / 100,\r\n    price: (tableWidth * table.columnWidths.price) / 100,\r\n  };\r\n\r\n  // Table header\r\n  const headerBgRgb = hexToRgb(table.headerBgColor);\r\n  const headerTextRgb = hexToRgb(table.headerTextColor);\r\n\r\n  pdf.setFillColor(...headerBgRgb);\r\n  pdf.rect(layout.marginLeft, currentY, tableWidth, 8, 'F');\r\n\r\n  pdf.setFontSize(typography.fontSize.base);\r\n  pdf.setFont(typography.fontFamily, 'bold');\r\n  pdf.setTextColor(...headerTextRgb);\r\n\r\n  let colX = layout.marginLeft + 2;\r\n  if (visibility.showItemNumber) {\r\n    pdf.text(labels.serialNo, colX, currentY + 5.5);\r\n    colX += colWidths.sno;\r\n  }\r\n  if (visibility.showDescription) {\r\n    pdf.text(labels.description, colX, currentY + 5.5);\r\n    colX += colWidths.description;\r\n  }\r\n  if (visibility.showQuantity) {\r\n    pdf.text(labels.quantity, colX, currentY + 5.5, { align: 'center' });\r\n    colX += colWidths.quantity;\r\n  }\r\n  if (visibility.showUnitPrice) {\r\n    pdf.text(labels.unitPrice, colX, currentY + 5.5, { align: 'center' });\r\n    colX += colWidths.unitPrice;\r\n  }\r\n  if (visibility.showVAT) {\r\n    pdf.text(labels.vat, colX, currentY + 5.5, { align: 'center' });\r\n    colX += colWidths.vat;\r\n  }\r\n  if (visibility.showPrice) {\r\n    pdf.text(labels.price, colX + colWidths.price - 2, currentY + 5.5, { align: 'right' });\r\n  }\r\n\r\n  currentY += 8;\r\n\r\n  // Table rows\r\n  const items = invoice.items || [];\r\n  pdf.setFont(typography.fontFamily, 'normal');\r\n  setTextPrimary();\r\n\r\n  items.forEach((item, index) => {\r\n    if (currentY > pageHeight - 60) {\r\n      pdf.addPage();\r\n      currentY = layout.marginTop;\r\n    }\r\n\r\n    const rowHeight = table.rowHeight;\r\n\r\n    // Alternating row colors\r\n    if (table.showAlternatingRows && index % 2 === 0) {\r\n      const evenBgRgb = hexToRgb(colors.tableBgEven);\r\n      pdf.setFillColor(...evenBgRgb);\r\n      pdf.rect(layout.marginLeft, currentY, tableWidth, rowHeight, 'F');\r\n    }\r\n\r\n    colX = layout.marginLeft + 2;\r\n\r\n    if (visibility.showItemNumber) {\r\n      pdf.text(String(index + 1), colX, currentY + 5);\r\n      colX += colWidths.sno;\r\n    }\r\n\r\n    if (visibility.showDescription) {\r\n      const desc = item.name || '';\r\n      const descLines = pdf.splitTextToSize(desc, colWidths.description - 4);\r\n      pdf.text(descLines[0] || '', colX, currentY + 5);\r\n      colX += colWidths.description;\r\n    }\r\n\r\n    if (visibility.showQuantity) {\r\n      pdf.text(String(item.quantity || 0), colX + colWidths.quantity / 2, currentY + 5, { align: 'center' });\r\n      colX += colWidths.quantity;\r\n    }\r\n\r\n    if (visibility.showUnitPrice) {\r\n      pdf.text(formatNumber(item.rate || 0), colX + colWidths.unitPrice / 2, currentY + 5, { align: 'center' });\r\n      colX += colWidths.unitPrice;\r\n    }\r\n\r\n    if (visibility.showVAT) {\r\n      const vatRate = item.vatRate || 0;\r\n      pdf.text(vatRate > 0 ? `${vatRate}%` : '', colX + colWidths.vat / 2, currentY + 5, { align: 'center' });\r\n      colX += colWidths.vat;\r\n    }\r\n\r\n    if (visibility.showPrice) {\r\n      const amountNum = parseFloat(item.amount) || 0;\r\n      const vatRate = item.vatRate || 0;\r\n      const vatAmount = calculateTRN(amountNum, vatRate);\r\n      const totalWithVAT = amountNum + vatAmount;\r\n      pdf.text(formatNumber(totalWithVAT), layout.marginLeft + tableWidth - 2, currentY + 5, { align: 'right' });\r\n    }\r\n\r\n    currentY += rowHeight;\r\n  });\r\n\r\n  // Bottom border of table\r\n  const borderRgb = hexToRgb(colors.borderColor);\r\n  pdf.setDrawColor(...borderRgb);\r\n  pdf.setLineWidth(0.3);\r\n  pdf.line(layout.marginLeft, currentY, pageWidth - layout.marginRight, currentY);\r\n\r\n  currentY += layout.sectionSpacing;\r\n\r\n  // ==================== TOTALS SECTION ====================\r\n  const totalsX = pageWidth - layout.marginRight - 60;\r\n\r\n  const subtotalVal = calculateSubtotal(items);\r\n  const discountPerc = parseFloat(invoice.discountPercentage) || 0;\r\n  const discountFlat = parseFloat(invoice.discountAmount) || 0;\r\n  const discountVal = invoice.discountType === 'percentage'\r\n    ? (subtotalVal * discountPerc) / 100\r\n    : discountFlat;\r\n  const vatVal = calculateDiscountedTRN(\r\n    items,\r\n    invoice.discountType,\r\n    invoice.discountPercentage,\r\n    invoice.discountAmount,\r\n  );\r\n  const additionalCharges =\r\n    (parseFloat(invoice.packingCharges) || 0) +\r\n    (parseFloat(invoice.freightCharges) || 0) +\r\n    (parseFloat(invoice.loadingCharges) || 0) +\r\n    (parseFloat(invoice.otherCharges) || 0);\r\n  const totalVal = calculateTotal(\r\n    Math.max(0, subtotalVal - discountVal) + additionalCharges,\r\n    vatVal,\r\n  );\r\n\r\n  pdf.setFontSize(typography.fontSize.base);\r\n  pdf.setFont(typography.fontFamily, 'normal');\r\n  setTextPrimary();\r\n\r\n  const currencySymbol = formatting.currencySymbol;\r\n\r\n  if (visibility.showSubtotal) {\r\n    pdf.text(labels.subtotal, totalsX, currentY);\r\n    pdf.text(`${currencySymbol} ${formatNumber(subtotalVal)}`, pageWidth - layout.marginRight, currentY, { align: 'right' });\r\n    currentY += 5;\r\n  }\r\n\r\n  if (visibility.showDiscount && discountVal > 0) {\r\n    pdf.text(labels.discount, totalsX, currentY);\r\n    pdf.text(`- ${currencySymbol} ${formatNumber(discountVal)}`, pageWidth - layout.marginRight, currentY, { align: 'right' });\r\n    currentY += 5;\r\n  }\r\n\r\n  if (visibility.showVATAmount) {\r\n    pdf.text(labels.vatAmount, totalsX, currentY);\r\n    pdf.text(`${currencySymbol} ${formatNumber(vatVal)}`, pageWidth - layout.marginRight, currentY, { align: 'right' });\r\n    currentY += 5;\r\n  }\r\n\r\n  if (visibility.showTotal) {\r\n    pdf.setFont(typography.fontFamily, 'bold');\r\n    pdf.setFontSize(typography.fontSize.large);\r\n    pdf.text(labels.total, totalsX, currentY);\r\n    pdf.text(`${currencySymbol} ${formatNumber(totalVal)}`, pageWidth - layout.marginRight, currentY, { align: 'right' });\r\n    currentY += 8;\r\n  }\r\n\r\n  // ==================== BALANCE DUE (from payments array) ====================\r\n  // Calculate total paid from payments array (industry standard - no separate advance field)\r\n  const totalPaidFromPayments = (invoice.payments || []).reduce((sum, p) => sum + (parseFloat(p.amount) || 0), 0);\r\n  if (totalPaidFromPayments > 0) {\r\n    // Draw separator line\r\n    pdf.setLineWidth(0.2);\r\n    pdf.setDrawColor(200, 200, 200);\r\n    pdf.line(totalsX, currentY, pageWidth - layout.marginRight, currentY);\r\n    currentY += 4;\r\n\r\n    // Show payments received\r\n    pdf.setFont(typography.fontFamily, 'normal');\r\n    pdf.setFontSize(typography.fontSize.base);\r\n    pdf.setTextColor(34, 139, 34); // Green color for payments\r\n    pdf.text('Less: Payments Received', totalsX, currentY);\r\n    pdf.text(`- ${currencySymbol} ${formatNumber(totalPaidFromPayments)}`, pageWidth - layout.marginRight, currentY, { align: 'right' });\r\n    currentY += 6;\r\n\r\n    // Calculate and show balance due\r\n    const balanceDue = Math.max(0, totalVal - totalPaidFromPayments);\r\n    pdf.setLineWidth(0.5);\r\n    pdf.setDrawColor(...primaryRgb);\r\n    pdf.line(totalsX, currentY, pageWidth - layout.marginRight, currentY);\r\n    currentY += 5;\r\n\r\n    pdf.setFont(typography.fontFamily, 'bold');\r\n    pdf.setFontSize(typography.fontSize.xlarge);\r\n    setTextPrimary();\r\n    pdf.text('Balance Due', totalsX, currentY);\r\n    pdf.text(`${currencySymbol} ${formatNumber(balanceDue)}`, pageWidth - layout.marginRight, currentY, { align: 'right' });\r\n    currentY += 10;\r\n  }\r\n\r\n  // ==================== PAYMENT HISTORY (Optional) ====================\r\n  if (visibility.showPaymentHistory && invoice.payments && invoice.payments.length > 0) {\r\n    pdf.setFontSize(typography.fontSize.large);\r\n    pdf.setFont(typography.fontFamily, 'bold');\r\n    setTextPrimary();\r\n    pdf.text('Payment History', layout.marginLeft, currentY);\r\n    currentY += 6;\r\n\r\n    // Payment table header\r\n    pdf.setFillColor(...primaryRgb);\r\n    pdf.rect(layout.marginLeft, currentY, tableWidth, 7, 'F');\r\n\r\n    pdf.setFontSize(typography.fontSize.base);\r\n    pdf.setTextColor(255, 255, 255);\r\n\r\n    const payColWidths = {\r\n      sr: 15,\r\n      date: 35,\r\n      method: 40,\r\n      ref: 50,\r\n      amount: 35,\r\n    };\r\n\r\n    colX = layout.marginLeft + 2;\r\n    pdf.text('Sr.', colX, currentY + 5);\r\n    colX += payColWidths.sr;\r\n    pdf.text('Date', colX, currentY + 5);\r\n    colX += payColWidths.date;\r\n    pdf.text('Method', colX, currentY + 5);\r\n    colX += payColWidths.method;\r\n    pdf.text('Ref.', colX, currentY + 5);\r\n    colX += payColWidths.ref;\r\n    pdf.text('Amount', colX + payColWidths.amount - 2, currentY + 5, { align: 'right' });\r\n\r\n    currentY += 7;\r\n\r\n    // Payment rows\r\n    pdf.setFont(typography.fontFamily, 'normal');\r\n    setTextPrimary();\r\n\r\n    invoice.payments.forEach((payment, index) => {\r\n      if (index % 2 === 0 && table.showAlternatingRows) {\r\n        const evenBgRgb = hexToRgb(colors.tableBgEven);\r\n        pdf.setFillColor(...evenBgRgb);\r\n        pdf.rect(layout.marginLeft, currentY, tableWidth, 6, 'F');\r\n      }\r\n\r\n      colX = layout.marginLeft + 2;\r\n      pdf.text(String(index + 1), colX, currentY + 4);\r\n      colX += payColWidths.sr;\r\n      pdf.text(formatDateDMY(payment.date || new Date()), colX, currentY + 4);\r\n      colX += payColWidths.date;\r\n      pdf.text(payment.method || '', colX, currentY + 4);\r\n      colX += payColWidths.method;\r\n      pdf.text(payment.reference || '', colX, currentY + 4);\r\n      colX += payColWidths.ref;\r\n      pdf.text(`${currencySymbol} ${formatNumber(payment.amount || 0)}`, colX + payColWidths.amount - 2, currentY + 4, { align: 'right' });\r\n\r\n      currentY += 6;\r\n    });\r\n\r\n    currentY += layout.sectionSpacing;\r\n  }\r\n\r\n  // ==================== FOOTER SECTION ====================\r\n  pdf.setFontSize(typography.fontSize.base);\r\n  pdf.setFont(typography.fontFamily, 'normal');\r\n  setTextSecondary();\r\n\r\n  if (visibility.showTerms && invoice.terms) {\r\n    pdf.text(`\\u2022 ${labels.paymentTerm} `, layout.marginLeft, currentY);\r\n    const termsText = pdf.splitTextToSize(invoice.terms, pageWidth - layout.marginLeft - layout.marginRight - 30);\r\n    pdf.text(termsText[0] || '', layout.marginLeft + 26, currentY);\r\n    currentY += 5;\r\n  }\r\n\r\n  if (visibility.showNotes && invoice.notes) {\r\n    pdf.text(`\\u2022 ${labels.comment} `, layout.marginLeft, currentY);\r\n    const notesText = pdf.splitTextToSize(invoice.notes, pageWidth - layout.marginLeft - layout.marginRight - 25);\r\n    pdf.text(notesText[0] || '', layout.marginLeft + 20, currentY);\r\n    currentY += 5;\r\n  }\r\n\r\n  if (visibility.showWarehouse && (invoice.warehouseName || invoice.warehouseCode)) {\r\n    const warehouseInfo = [invoice.warehouseName, invoice.warehouseCode].filter(Boolean).join(' - ');\r\n    pdf.text(`\\u2022 ${labels.warehouse} `, layout.marginLeft, currentY);\r\n    pdf.text(warehouseInfo, layout.marginLeft + 22, currentY);\r\n    currentY += 5;\r\n  }\r\n\r\n  currentY += layout.sectionSpacing;\r\n\r\n  // ==================== SIGNATURE AND SEAL SECTION ====================\r\n  if (visibility.showSignature || visibility.showCompanySeal) {\r\n    const signatureY = currentY;\r\n\r\n    // Company Seal - Left Side\r\n    if (visibility.showCompanySeal && branding.showSeal) {\r\n      try {\r\n        const sealSize = branding.sealSize;\r\n        pdf.addImage(sealImage, 'PNG', layout.marginLeft, signatureY, sealSize, sealSize);\r\n\r\n        // Seal label\r\n        pdf.setFontSize(typography.fontSize.small);\r\n        setTextSecondary();\r\n        pdf.text(labels.companySeal, layout.marginLeft + sealSize + 3, signatureY + 5);\r\n        pdf.setFontSize(typography.fontSize.small - 1);\r\n        pdf.text('Ultimate Steels', layout.marginLeft + sealSize + 3, signatureY + 9);\r\n        pdf.text('Building Materials', layout.marginLeft + sealSize + 3, signatureY + 12);\r\n        pdf.text('Trading LLC', layout.marginLeft + sealSize + 3, signatureY + 15);\r\n      } catch (error) {\r\n        console.error('Error adding seal:', error);\r\n        // Fallback\r\n        pdf.setDrawColor(60);\r\n        pdf.rect(layout.marginLeft, signatureY, 20, 20);\r\n        pdf.setFontSize(typography.fontSize.small);\r\n        setTextSecondary();\r\n        pdf.text(labels.companySeal, layout.marginLeft + 2, signatureY + 5);\r\n      }\r\n    }\r\n\r\n    // Authorized Signatory - Right Side\r\n    if (visibility.showSignature) {\r\n      const signatoryX = pageWidth - layout.marginRight - 60;\r\n      pdf.setFontSize(typography.fontSize.base);\r\n      setTextPrimary();\r\n      pdf.setFont(typography.fontFamily, 'bold');\r\n      pdf.text(labels.authorizedSignatory, signatoryX, signatureY + 5);\r\n\r\n      // Signature line\r\n      pdf.setDrawColor(0);\r\n      pdf.setLineWidth(0.3);\r\n      pdf.line(signatoryX, signatureY + 16, signatoryX + 55, signatureY + 16);\r\n\r\n      // Company name under signature\r\n      pdf.setFontSize(typography.fontSize.small);\r\n      setTextSecondary();\r\n      pdf.text('ULTIMATE STEELS', signatoryX + 5, signatureY + 19);\r\n      pdf.text('BUILDING MATERIALS TRADING', signatoryX, signatureY + 22);\r\n    }\r\n\r\n    currentY = signatureY + 28;\r\n  }\r\n\r\n  // Bottom footer line\r\n  const footerY = currentY;\r\n  pdf.setDrawColor(...primaryRgb);\r\n  pdf.setLineWidth(0.5);\r\n  pdf.line(layout.marginLeft, footerY, pageWidth - layout.marginRight, footerY);\r\n\r\n  // Contact information\r\n  if (visibility.showContactInfo) {\r\n    pdf.setFontSize(typography.fontSize.small);\r\n    setTextSecondary();\r\n    const phone = visibility.showCompanyPhone ? company?.phone || '+971 XXX XXX' : '';\r\n    const email = visibility.showCompanyEmail ? company?.email || 'info@example.com' : '';\r\n    const website = visibility.showCompanyWebsite ? company?.website || 'www.ultimatesteels.com' : '';\r\n\r\n    const contactParts = [\r\n      phone && `Phone: ${phone}`,\r\n      email && `Email: ${email}`,\r\n      website && `Website: ${website}`,\r\n    ].filter(Boolean);\r\n\r\n    const contactInfo = contactParts.join(' | ');\r\n    const contactWidth = pdf.getTextWidth(contactInfo);\r\n    pdf.text(contactInfo, (pageWidth - contactWidth) / 2, footerY + 4);\r\n  }\r\n\r\n  // Page number\r\n  if (visibility.showPageNumbers) {\r\n    pdf.text(`${labels.page} 1 / 1`, pageWidth / 2, footerY + 8, { align: 'center' });\r\n  }\r\n\r\n  // Add watermark for preview/test invoices\r\n  if (isPreview) {\r\n    // Save current graphics state\r\n    pdf.saveGraphicsState();\r\n\r\n    // Set watermark properties\r\n    pdf.setFontSize(70);\r\n    pdf.setFont(typography.fontFamily, 'bold');\r\n    pdf.setTextColor(200, 200, 200); // Light gray\r\n    pdf.setGState(new pdf.GState({ opacity: 0.15 })); // 15% opacity\r\n\r\n    // Calculate center position and rotate\r\n    const centerX = pageWidth / 2;\r\n    const centerY = pageHeight / 2;\r\n\r\n    // Rotate 45 degrees and add watermark text\r\n    pdf.text('TEST SAMPLE', centerX, centerY, {\r\n      align: 'center',\r\n      angle: 45,\r\n    });\r\n\r\n    // Restore graphics state\r\n    pdf.restoreGraphicsState();\r\n  }\r\n\r\n  // Save the PDF\r\n  pdf.save(`${invoice.invoiceNumber || 'invoice'}.pdf`);\r\n  return true;\r\n};\r\n\r\n// Export as default generator (will replace old one after testing)\r\nexport { generateConfigurablePDF as generateInvoicePDF };\r\n","usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\utils\\customerNormalizer.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":13,"column":48,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":13,"endColumn":51,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[470,473],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[470,473],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":13,"column":74,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":13,"endColumn":77,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[496,499],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[496,499],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":23,"column":33,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":23,"endColumn":36,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[795,798],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[795,798],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":23,"column":48,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":23,"endColumn":51,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[810,813],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[810,813],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":30,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":30,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1080,1083],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1080,1083],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":79,"column":50,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":79,"endColumn":53,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3106,3109],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3106,3109],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":79,"column":75,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":79,"endColumn":78,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3131,3134],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3131,3134],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":87,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":87,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3426,3429],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3426,3429],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":8,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Frontend Customer Data Normalizer\n * CRITICAL: Converts snake_case API fields to camelCase frontend schema\n * FAIL-SAFE: Validates and normalizes customer data from API\n */\n\n/**\n * Convert snake_case API response to camelCase Customer object\n * @param rawCustomer - Raw customer data from API (snake_case)\n * @param source - Source of the data for debugging\n * @returns Normalized Customer with camelCase fields\n */\nexport function normalizeCustomer(rawCustomer: any, source = 'unknown'): any | null {\n  if (!rawCustomer || typeof rawCustomer !== 'object') {\n    console.error(`Γ¥î [Customer Normalizer] Invalid customer data from ${source}:`, rawCustomer);\n    return null;\n  }\n\n  const errors: string[] = [];\n\n  try {\n    // Helper to safely parse numbers\n    const parseNumber = (value: any, fallback: any = undefined): number | undefined => {\n      if (value === null || value === undefined) return fallback;\n      const parsed = parseFloat(value);\n      return isNaN(parsed) ? fallback : parsed;\n    };\n\n    // Build the normalized Customer object\n    const normalized: any = {\n      // Core identifiers\n      id: rawCustomer.id || 0,\n      name: rawCustomer.name || rawCustomer.customer_name || '',\n      company: rawCustomer.company || rawCustomer.company_name || undefined,\n      \n      // Contact information\n      email: rawCustomer.email || rawCustomer.email_address || undefined,\n      phone: rawCustomer.phone || rawCustomer.phone_number || undefined,\n      address: rawCustomer.address || undefined,\n      \n      // Tax & Compliance\n      vatNumber: rawCustomer.vatNumber || rawCustomer.vat_number || rawCustomer.gstNumber || rawCustomer.gst_number || undefined,\n      trn: rawCustomer.trn || rawCustomer.tax_registration_number || undefined,\n      isDesignatedZone: rawCustomer.isDesignatedZone || rawCustomer.is_designated_zone || false,\n      \n      // Financial\n      creditLimit: parseNumber(rawCustomer.creditLimit || rawCustomer.credit_limit, undefined),\n      currentCredit: parseNumber(rawCustomer.currentCredit || rawCustomer.current_credit, undefined),\n      paymentTerms: rawCustomer.paymentTerms || rawCustomer.payment_terms || undefined,\n      revenue: parseNumber(rawCustomer.revenue, undefined),\n      \n      // Metadata\n      status: rawCustomer.status || undefined,\n      orders: parseNumber(rawCustomer.orders, undefined),\n      customer: rawCustomer.customer || undefined,\n    };\n\n    // Log validation errors if any\n    if (errors.length > 0) {\n      console.warn(`ΓÜá∩╕Å [Customer Normalizer] Validation warnings from ${source}:`);\n      errors.forEach(error => console.warn(`   - ${error}`));\n    }\n\n    return normalized;\n    \n  } catch (error) {\n    console.error(`Γ¥î [Customer Normalizer] Failed to normalize customer from ${source}:`, error);\n    console.error('   Raw data:', rawCustomer);\n    return null;\n  }\n}\n\n/**\n * Normalize array of customers\n * @param rawCustomers - Array of raw customer data from API\n * @param source - Source identifier for debugging\n * @returns Array of normalized Customer objects\n */\nexport function normalizeCustomers(rawCustomers: any[], source = 'list'): any[] {\n  if (!Array.isArray(rawCustomers)) {\n    console.error(`Γ¥î [Customer Normalizer] Expected array, got ${typeof rawCustomers}`);\n    return [];\n  }\n\n  return rawCustomers\n    .map((customer, index) => normalizeCustomer(customer, `${source}[${index}]`))\n    .filter((customer): customer is any => customer !== null);\n}\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\utils\\deliveryNoteNormalizer.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":13,"column":46,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":13,"endColumn":49,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[485,488],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[485,488],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":13,"column":72,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":13,"endColumn":75,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[511,514],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[511,514],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":23,"column":31,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":23,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[797,800],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[797,800],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":43,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":43,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1332,1335],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1332,1335],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":110,"column":48,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":110,"endColumn":51,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3998,4001],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3998,4001],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":110,"column":73,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":110,"endColumn":76,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4023,4026],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4023,4026],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":118,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":118,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4284,4287],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4284,4287],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Frontend Delivery Note Data Normalizer\n * CRITICAL: Converts snake_case API fields to camelCase frontend schema\n * FAIL-SAFE: Validates and normalizes delivery note data from API\n */\n\n/**\n * Convert snake_case API response to camelCase DeliveryNote object\n * @param rawDN - Raw delivery note data from API (snake_case)\n * @param source - Source of the data for debugging\n * @returns Normalized DeliveryNote with camelCase fields\n */\nexport function normalizeDeliveryNote(rawDN: any, source = 'unknown'): any | null {\n  if (!rawDN || typeof rawDN !== 'object') {\n    console.error(`Γ¥î [DeliveryNote Normalizer] Invalid delivery note data from ${source}:`, rawDN);\n    return null;\n  }\n\n  const errors: string[] = [];\n\n  try {\n    // Helper to safely parse dates\n    const parseDate = (value: any): string | undefined => {\n      if (!value) return undefined;\n      \n      // Handle Timestamp objects\n      if (value?.seconds) {\n        return new Date(parseInt(value.seconds) * 1000).toISOString();\n      }\n      \n      // Handle string dates\n      if (typeof value === 'string') {\n        const parsed = new Date(value);\n        if (!isNaN(parsed.getTime())) {\n          return parsed.toISOString();\n        }\n      }\n      \n      return undefined;\n    };\n\n    // Build the normalized DeliveryNote object\n    const normalized: any = {\n      // Core identifiers\n      id: rawDN.id || 0,\n      companyId: rawDN.company_id || rawDN.companyId,\n      deliveryNoteNumber: rawDN.deliveryNoteNumber || rawDN.delivery_note_number || '',\n      deliveryDate: parseDate(rawDN.deliveryDate || rawDN.delivery_date),\n      \n      // Related documents\n      invoiceId: rawDN.invoiceId || rawDN.invoice_id || undefined,\n      invoiceNumber: rawDN.invoiceNumber || rawDN.invoice_number || undefined,\n      purchaseOrderId: rawDN.purchaseOrderId || rawDN.purchase_order_id || undefined,\n      \n      // Customer linkage\n      customerId: rawDN.customer_id || rawDN.customerId || undefined,\n      \n      // Customer & Delivery\n      customerDetails: rawDN.customerDetails || rawDN.customer_details || undefined,\n      deliveryAddress: rawDN.deliveryAddress || rawDN.delivery_address || undefined,\n      \n      // Driver & Vehicle\n      driverName: rawDN.driverName || rawDN.driver_name || undefined,\n      driverPhone: rawDN.driverPhone || rawDN.driver_phone || undefined,\n      vehicleNumber: rawDN.vehicleNumber || rawDN.vehicle_number || undefined,\n      \n      // Items & Status\n      items: rawDN.items || [],\n      status: rawDN.status || undefined,\n      isPartial: Boolean(rawDN.isPartial || rawDN.is_partial),\n      \n      // PDF generation (2 fields)\n      pdfUrl: rawDN.pdf_url || rawDN.pdfUrl || undefined,\n      pdfGeneratedAt: parseDate(rawDN.pdf_generated_at || rawDN.pdfGeneratedAt),\n      \n      // Notes & Metadata\n      notes: rawDN.notes || undefined,\n      hasNotes: Boolean(rawDN.hasNotes || rawDN.has_notes),\n      \n      // Audit trail\n      createdAt: parseDate(rawDN.created_at || rawDN.createdAt),\n      updatedAt: parseDate(rawDN.updated_at || rawDN.updatedAt),\n      createdBy: rawDN.created_by || rawDN.createdBy || undefined,\n      updatedBy: rawDN.updated_by || rawDN.updatedBy || undefined,\n      tooltip: rawDN.tooltip || undefined,\n      enabled: Boolean(rawDN.enabled),\n    };\n\n    // Log validation errors if any\n    if (errors.length > 0) {\n      console.warn(`ΓÜá∩╕Å [DeliveryNote Normalizer] Validation warnings from ${source}:`);\n      errors.forEach(error => console.warn(`   - ${error}`));\n    }\n\n    return normalized;\n    \n  } catch (error) {\n    console.error(`Γ¥î [DeliveryNote Normalizer] Failed to normalize delivery note from ${source}:`, error);\n    console.error('   Raw data:', rawDN);\n    return null;\n  }\n}\n\n/**\n * Normalize array of delivery notes\n * @param rawDNs - Array of raw delivery note data from API\n * @param source - Source identifier for debugging\n * @returns Array of normalized DeliveryNote objects\n */\nexport function normalizeDeliveryNotes(rawDNs: any[], source = 'list'): any[] {\n  if (!Array.isArray(rawDNs)) {\n    console.error(`Γ¥î [DeliveryNote Normalizer] Expected array, got ${typeof rawDNs}`);\n    return [];\n  }\n\n  return rawDNs\n    .map((dn, index) => normalizeDeliveryNote(dn, `${source}[${index}]`))\n    .filter((dn): dn is any => dn !== null);\n}\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\utils\\deliveryNotePdfGenerator.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\utils\\devGuards.ts","messages":[{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":632,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":632,"endColumn":22,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"trace"},"fix":{"range":[13073,13108],"text":""},"desc":"Remove the console.trace()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":652,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":652,"endColumn":21,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"info"},"fix":{"range":[13915,14087],"text":""},"desc":"Remove the console.info()."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":726,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":726,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[15773,15776],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[15773,15776],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":726,"column":48,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":726,"endColumn":51,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[15779,15782],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[15779,15782],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":757,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":757,"endColumn":22,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"trace"},"fix":{"range":[16861,16896],"text":""},"desc":"Remove the console.trace()."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":804,"column":44,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":804,"endColumn":47,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[18379,18382],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[18379,18382],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":804,"column":52,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":804,"endColumn":55,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[18387,18390],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[18387,18390],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":830,"column":44,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":830,"endColumn":47,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[18874,18877],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[18874,18877],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":830,"column":50,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":830,"endColumn":53,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[18880,18883],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[18880,18883],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":860,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":860,"endColumn":22,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"trace"},"fix":{"range":[19915,19950],"text":""},"desc":"Remove the console.trace()."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":903,"column":46,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":903,"endColumn":49,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[21244,21247],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[21244,21247],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":903,"column":54,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":903,"endColumn":57,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[21252,21255],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[21252,21255],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":925,"column":44,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":925,"endColumn":47,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[21670,21673],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[21670,21673],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":925,"column":50,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":925,"endColumn":53,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[21676,21679],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[21676,21679],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":955,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":955,"endColumn":22,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"trace"},"fix":{"range":[22711,22746],"text":""},"desc":"Remove the console.trace()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":970,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":970,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[23240,23413],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":998,"column":46,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":998,"endColumn":49,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[24039,24042],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[24039,24042],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":998,"column":54,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":998,"endColumn":57,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[24047,24050],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[24047,24050],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":1023,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":1023,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[24505,24508],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[24505,24508],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":1023,"column":48,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":1023,"endColumn":51,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[24511,24514],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[24511,24514],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":1053,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":1053,"endColumn":22,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"trace"},"fix":{"range":[25539,25574],"text":""},"desc":"Remove the console.trace()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":1068,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":1068,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[26066,26237],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":1096,"column":44,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":1096,"endColumn":47,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[26858,26861],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[26858,26861],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":1096,"column":52,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":1096,"endColumn":55,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[26866,26869],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[26866,26869],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":1143,"column":54,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":1143,"endColumn":57,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[27809,27812],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[27809,27812],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":1143,"column":60,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":1143,"endColumn":63,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[27815,27818],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[27815,27818],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":1173,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":1173,"endColumn":22,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"trace"},"fix":{"range":[28886,28921],"text":""},"desc":"Remove the console.trace()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":1188,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":1188,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[29426,29610],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":1216,"column":56,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":1216,"endColumn":59,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[30263,30266],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[30263,30266],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":1216,"column":64,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":1216,"endColumn":67,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[30271,30274],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[30271,30274],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":1245,"column":52,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":1245,"endColumn":55,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[30855,30858],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[30855,30858],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":1245,"column":58,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":1245,"endColumn":61,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[30861,30864],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[30861,30864],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":1275,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":1275,"endColumn":22,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"trace"},"fix":{"range":[31925,31960],"text":""},"desc":"Remove the console.trace()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":1290,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":1290,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[32463,32645],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":1318,"column":54,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":1318,"endColumn":57,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[33293,33296],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[33293,33296],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":1318,"column":62,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":1318,"endColumn":65,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[33301,33304],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[33301,33304],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":36,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Development-time guards for Invoice objects\n * CRITICAL: Loudly warns when code accesses snake_case or unknown fields\n * ONLY ACTIVE IN DEVELOPMENT (production has zero overhead)\n */\n\nimport type { Invoice } from '../types/invoice';\n\n/**\n * All valid camelCase keys that should exist on a normalized Invoice\n * THIS IS THE SINGLE SOURCE OF TRUTH for allowed Invoice fields\n */\nconst ALLOWED_INVOICE_KEYS = new Set<keyof Invoice | string>([\n  // Core identifiers\n  'id',\n  'invoiceNumber',\n  \n  // Dates\n  'invoiceDate',\n  'dueDate',\n  'date',              // Alias for invoiceDate (used by legacy code)\n  'promiseDate',       // Promise/delivery date\n  'createdAt',\n  'updatedAt',\n  'deletedAt',\n  'issuedAt',          // When invoice was issued (for 24h edit window)\n  'revisedAt',         // Timestamp of last revision\n  'supersededAt',      // When this invoice was superseded\n  \n  // Revision tracking\n  'revisionNumber',      // 1 = original, 2+ = revisions\n  'originalInvoiceId',   // Reference to original invoice (for revisions)\n  'supersededBy',        // ID of revision that superseded this\n  'supersededReason',    // REVISED, CANCELLED, etc.\n  \n  // Customer information\n  'customerId',\n  'customerDetails',\n  'customerName',\n  'customerEmail',\n  'customer',          // Alias for customerDetails (used by legacy code)\n  'customerPurchaseOrderNumber',\n  'customerPurchaseOrderDate',\n  \n  // Financial\n  'subtotal',\n  'vatAmount',\n  'total',\n  'totalAmount',\n  'received',\n  'outstanding',\n  'balanceDue',\n  \n  // Discounts & Currency\n  'discountPercentage',\n  'discountAmount',\n  'discountType',\n  'currency',\n  'exchangeRate',\n  \n  // Additional Charges\n  'packingCharges',\n  'loadingCharges',\n  'freightCharges',\n  'otherCharges',\n  'taxNotes',\n  \n  // Status\n  'status',\n  'paymentStatus',\n  \n  // Items & Payments\n  'items',\n  'payments',\n  'lastPaymentDate',\n  'advanceReceived',\n  'modeOfPayment',\n  'chequeNumber',\n  \n  // Sales & Commission\n  'salesAgentId',\n  'salesAgentName',\n  'commissionAmount',\n  'commissionCalculated',\n  'commissionEligible',        // NEW: Whether invoice qualifies for commission\n  'commissionPaid',             // NEW: Whether commission has been paid\n  'commissionNotes',            // NEW: Notes about commission status\n  \n  // Delivery\n  'deliveryStatus',\n  \n  // Warehouse\n  'warehouseId',\n  'warehouseName',\n  'warehouseCode',\n  'warehouseCity',\n  \n  // Soft delete & recreation\n  'deletionReason',\n  'deletionReasonCode',         // NEW: Categorized deletion reason code\n  'deletedByUserId',            // NEW: User ID who deleted invoice\n  'recreatedFrom',\n  \n  // Price List Reference (2 new fields)\n  'pricelistId',                // NEW: ID of applied price list\n  'pricelistName',              // NEW: Name of applied price list\n  \n  // PDF Generation (2 new fields)\n  'pdfUrl',                     // NEW: URL/path to generated PDF\n  'pdfGeneratedAt',             // NEW: Timestamp of PDF generation\n  \n  // Credit Note Tracking (3 fields)\n  'hasCreditNotes',             // Whether invoice has credit notes\n  'creditNotesCount',           // Number of credit notes for this invoice\n  'totalCreditedAmount',        // Total amount credited back\n  \n  // Notes & Terms\n  'notes',\n  'terms',             // Canonical UI field name\n  'termsAndConditions', // Backend/legacy alias for terms\n  \n  // Company\n  'companyDetails',\n  \n  // Internal/special properties (allow these without warning)\n  'constructor',\n  'toString',\n  'valueOf',\n  'hasOwnProperty',\n  'isPrototypeOf',\n  'propertyIsEnumerable',\n  'toLocaleString',\n  '__proto__',\n  '__defineGetter__',\n  '__defineSetter__',\n  '__lookupGetter__',\n  '__lookupSetter__',\n]);\n\n/**\n * Allowed Product keys (camelCase) - ADD NEW FIELDS HERE\n * When you get \"Unknown Product field\" warnings, add the field here.\n */\nconst ALLOWED_PRODUCT_KEYS = new Set<string>([\n  // Core identifiers\n  'id',\n  'name',\n  'fullName',\n  'title',\n  \n  // Category & Classification\n  'category',\n  'commodity',\n  'grade',\n  'gradeVariant',\n  'steelGrade',\n  \n  // Dimensions\n  'thickness',\n  'thick',\n  'width',\n  'length',\n  'size',\n  'sizeInch',\n  'nbSize',\n  'diameter',\n  'od',\n  'dimensions',\n  \n  // Finish & Specifications\n  'finish',\n  'finishType',\n  'surfaceFinish',\n  'specifications',\n  'specification',\n  'schedule',\n  \n  // Pricing\n  'price',\n  'sellingPrice',\n  'costPrice',\n  'purchasePrice',\n  'unitPrice',\n  \n  // Inventory & Stock\n  'currentStock',\n  'minStock',\n  'maxStock',\n  'quantity',\n  'unit',\n  'location',\n  \n  // Tax & Compliance\n  'hsnCode',\n  'gstRate',\n  \n  // Analytics & Metrics\n  'revenue',\n  'revenueGrowth',\n  'prevRevenue',\n  'sales',\n  'orders',\n  'ordersGrowth',\n  'prevOrders',\n  'quantityGrowth',\n  'prevQuantity',\n  \n  // Related Data\n  'supplier',\n  'product',\n  'description',\n  'image',\n  \n  // Material Specification (8 new fields)\n  'sizeInch',\n  'od',\n  'length',\n  'gradeVariant',\n  'standard',\n  'formType',\n  'shape',\n  'condition',\n  \n  // Additional Dimensions (4 new fields)\n  'height',\n  'nbSize',\n  'schedule',\n  'diameter',\n  \n  // Computed Fields (2 new fields)\n  'fullName',\n  'currentStock',\n  \n  // Internal/special properties\n  'constructor',\n  'toString',\n  'valueOf',\n  'hasOwnProperty',\n  'isPrototypeOf',\n  'propertyIsEnumerable',\n  'toLocaleString',\n  '__proto__',\n  '__defineGetter__',\n  '__defineSetter__',\n  '__lookupGetter__',\n  '__lookupSetter__',\n]);\n\n/**\n * Allowed Customer keys (camelCase) - ADD NEW FIELDS HERE\n */\nconst ALLOWED_CUSTOMER_KEYS = new Set<string>([\n  // Core identifiers\n  'id',\n  'name',\n  'company',\n  \n  // Contact information\n  'email',\n  'phone',\n  'address',\n  \n  // Tax & Compliance\n  'vatNumber',\n  'trn',\n  \n  // Financial\n  'creditLimit',\n  'currentCredit',\n  'paymentTerms',\n  'revenue',\n  \n  // Compliance Fields (3 new fields)\n  'cinNumber',                  // NEW: Corporate Identification Number\n  'tradeLicenseNumber',         // NEW: Trade license registration\n  'tradeLicenseExpiry',         // NEW: Trade license expiration date\n  \n  // Metadata\n  'status',\n  'orders',\n  'customer',\n  \n  // Internal/special properties\n  'constructor',\n  'toString',\n  'valueOf',\n  'hasOwnProperty',\n  'isPrototypeOf',\n  'propertyIsEnumerable',\n  'toLocaleString',\n  '__proto__',\n  '__defineGetter__',\n  '__defineSetter__',\n  '__lookupGetter__',\n  '__lookupSetter__',\n]);\n\n/**\n * Allowed Supplier keys (camelCase) - ADD NEW FIELDS HERE\n */\nconst ALLOWED_SUPPLIER_KEYS = new Set<string>([\n  // Core identifiers\n  'id',\n  'name',\n  \n  // Contact information\n  'email',\n  'phone',\n  'address',\n  \n  // Tax & Compliance\n  'trn',\n  \n  // Financial\n  'paymentTerms',\n  \n  // Financial & Business Info (15 new fields)\n  'companyId',\n  'contactPerson',\n  'website',\n  'category',\n  'country',\n  'countryId',\n  'vatNumber',\n  'businessLicense',\n  'taxId',\n  'bankDetails',\n  'certifications',\n  'creditLimit',\n  'isActive',\n  'createdAt',\n  'updatedAt',\n  'notes',\n  'defaultCurrency',\n  'currentCredit',\n  \n  // Internal/special properties\n  'constructor',\n  'toString',\n  'valueOf',\n  'hasOwnProperty',\n  'isPrototypeOf',\n  'propertyIsEnumerable',\n  'toLocaleString',\n  '__proto__',\n  '__defineGetter__',\n  '__defineSetter__',\n  '__lookupGetter__',\n  '__lookupSetter__',\n]);\n\n/**\n * Allowed Payment keys (camelCase) - ADD NEW FIELDS HERE\n */\nconst ALLOWED_PAYMENT_KEYS = new Set<string>([\n  // Core identifiers\n  'id',\n  'invoiceNumber',\n  \n  // Payment details\n  'amount',\n  'paymentDate',\n  'date',\n  \n  // Payment method/mode\n  'paymentMethod',\n  'paymentMode',\n  'method',\n  \n  // Reference tracking\n  'referenceNumber',\n  'reference',\n  'receiptNumber',\n  'receiptGenerated',\n  \n  // Notes & metadata\n  'notes',\n  'createdAt',\n  'updatedAt',\n  'createdBy',\n  'updatedBy',\n  \n  // Void tracking (4 fields)\n  'voided',\n  'voidedAt',\n  'voidedBy',\n  'voidReason',\n  \n  // Internal/special properties\n  'constructor',\n  'toString',\n  'valueOf',\n  'hasOwnProperty',\n  'isPrototypeOf',\n  'propertyIsEnumerable',\n  'toLocaleString',\n  '__proto__',\n  '__defineGetter__',\n  '__defineSetter__',\n  '__lookupGetter__',\n  '__lookupSetter__',\n]);\n\n/**\n * Allowed PurchaseOrder keys (camelCase) - ADD NEW FIELDS HERE\n */\nconst ALLOWED_PURCHASE_ORDER_KEYS = new Set<string>([\n  // Core identifiers\n  'poNumber',\n  'poDate',\n  'dueDate',\n  'expectedDeliveryDate',\n  \n  // Supplier information\n  'supplierName',\n  'supplierEmail',\n  'supplierPhone',\n  'supplierAddress',\n  'supplierTRN',\n  'supplierContactName',\n  'supplierContactEmail',\n  'supplierContactPhone',\n  \n  // Buyer information\n  'buyerName',\n  'buyerEmail',\n  'buyerPhone',\n  'buyerDepartment',\n  \n  // Financial\n  'subtotal',\n  'vatAmount',\n  'total',\n  'currency',\n  \n  // Discounts & Charges\n  'discountPercentage',\n  'discountAmount',\n  'discountType',\n  'shippingCharges',\n  'freightCharges',\n  'handlingCharges',\n  'otherCharges',\n  \n  // Terms & Conditions\n  'terms',\n  'paymentTerms',\n  'incoterms',\n  \n  // Items & Status\n  'items',\n  'stockStatus',\n  \n  // Approval workflow (6 fields)\n  'approvalStatus',\n  'approvalDate',\n  'approvedBy',\n  'approvedAt',\n  'approvalComments',\n  'rejectionReason',\n  \n  // Stock tracking (3 fields)\n  'stockReceived',\n  'stockReceivedDate',\n  'partialReceived',\n  \n  // Payment tracking (3 fields)\n  'paymentStatus',\n  'paidAmount',\n  'outstandingAmount',\n  \n  // Audit trail (4 fields)\n  'createdAt',\n  'updatedAt',\n  'createdBy',\n  'updatedBy',\n  \n  // Notes\n  'notes',\n  'id',\n  'companyId',\n  \n  // Internal/special properties\n  'constructor',\n  'toString',\n  'valueOf',\n  'hasOwnProperty',\n  'isPrototypeOf',\n  'propertyIsEnumerable',\n  'toLocaleString',\n  '__proto__',\n  '__defineGetter__',\n  '__defineSetter__',\n  '__lookupGetter__',\n  '__lookupSetter__',\n]);\n\n/**\n * Allowed DeliveryNote keys (camelCase) - ADD NEW FIELDS HERE\n */\nconst ALLOWED_DELIVERY_NOTE_KEYS = new Set<string>([\n  // Core identifiers\n  'id',\n  'deliveryNoteNumber',\n  'deliveryDate',\n  \n  // Related documents\n  'invoiceId',\n  'invoiceNumber',\n  'purchaseOrderId',\n  \n  // Customer & Delivery\n  'customerDetails',\n  'deliveryAddress',\n  \n  // Driver & Vehicle\n  'driverName',\n  'driverPhone',\n  'vehicleNumber',\n  \n  // Items & Status\n  'items',\n  'status',\n  'isPartial',\n  \n  // PDF generation (2 fields)\n  'pdfUrl',\n  'pdfGeneratedAt',\n  \n  // Customer linkage\n  'customerId',\n  \n  // Audit trail (4 fields)\n  'createdAt',\n  'updatedAt',\n  'createdBy',\n  'updatedBy',\n  \n  // Notes & Metadata\n  'notes',\n  'hasNotes',\n  'tooltip',\n  'enabled',\n  'companyId',\n  \n  // Internal/special properties\n  'constructor',\n  'toString',\n  'valueOf',\n  'hasOwnProperty',\n  'isPrototypeOf',\n  'propertyIsEnumerable',\n  'toLocaleString',\n  '__proto__',\n  '__defineGetter__',\n  '__defineSetter__',\n  '__lookupGetter__',\n  '__lookupSetter__',\n]);\n\n/**\n * Common snake_case Invoice fields that developers might accidentally use\n * These trigger LOUD warnings with stack traces\n */\nconst FORBIDDEN_SNAKE_CASE_FIELDS = new Set([\n  'invoice_number',\n  'invoice_date',\n  'due_date',\n  'customer_id',\n  'customer_details',\n  'customer_name',\n  'vat_amount',\n  'total_amount',\n  'payment_status',\n  'sales_agent_id',\n  'sales_agent_name',\n  'commission_amount',\n  'commission_calculated',\n  'balance_due',\n  'delivery_status',\n  'deleted_at',\n  'created_at',\n  'updated_at',\n  'last_payment_date',\n  'deletion_reason',\n  'recreated_from',\n  'terms_and_conditions',\n  'company_details',\n]);\n\n/**\n * Wrap an Invoice object with a dev-time Proxy that warns on snake_case access\n * @param invoice - The normalized Invoice object\n * @returns Proxied invoice (dev) or original invoice (production)\n */\nexport function guardInvoiceDev(invoice: Invoice): Invoice {\n  // In production, return the invoice as-is (zero overhead)\n  if (import.meta.env.PROD) {\n    return invoice;\n  }\n\n  // In development, wrap with a Proxy that monitors property access\n  return new Proxy(invoice, {\n    get(target, prop: string | symbol, receiver) {\n      // Ignore symbol properties (used by React, JSON.stringify, etc.)\n      if (typeof prop === 'symbol') {\n        return Reflect.get(target, prop, receiver);\n      }\n\n      const propName = String(prop);\n\n      // ≡ƒÜ¿ CRITICAL ERROR: Snake_case field accessed\n      if (FORBIDDEN_SNAKE_CASE_FIELDS.has(propName)) {\n        const stack = new Error().stack;\n        console.error(\n          `\\n` +\n          `≡ƒÜ¿≡ƒÜ¿≡ƒÜ¿ CRITICAL BUG DETECTED ≡ƒÜ¿≡ƒÜ¿≡ƒÜ¿\\n` +\n          `ΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöü\\n` +\n          `Snake_case field '${propName}' accessed on Invoice!\\n` +\n          `\\n` +\n          `Γ¥î WRONG:  invoice.${propName}\\n` +\n          `Γ£à CORRECT: invoice.${snakeToCamel(propName)}\\n` +\n          `\\n` +\n          `This is the EXACT bug that caused InvoiceList to show\\n` +\n          `empty cells. Frontend MUST use camelCase after\\n` +\n          `invoiceNormalizer processing.\\n` +\n          `\\n` +\n          `Fix this immediately in:\\n` +\n          `${stack?.split('\\n')[2] || 'Unknown location'}\\n` +\n          `ΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöü\\n`,\n        );\n        console.trace('Full stack trace:');\n        \n        // Return undefined (same as accessing non-existent property)\n        return undefined;\n      }\n\n      // ΓÜá∩╕Å WARNING: Unknown field accessed (might be typo or new field)\n      if (propName.includes('_')) {\n        const stack = new Error().stack;\n        console.warn(\n          `\\n` +\n          `ΓÜá∩╕Å WARNING: Snake_case property '${propName}' accessed on Invoice\\n` +\n          `This field is not in the known forbidden list, but contains underscore.\\n` +\n          `Frontend should use camelCase. Did you mean '${snakeToCamel(propName)}'?\\n` +\n          `Location: ${stack?.split('\\n')[2] || 'Unknown'}\\n`,\n        );\n      }\n\n      // Γä╣∩╕Å INFO: Unknown but camelCase field accessed (new field or typo)\n      if (!ALLOWED_INVOICE_KEYS.has(propName) && !propName.startsWith('_')) {\n        console.info(\n          `Γä╣∩╕Å Unknown Invoice field '${propName}' accessed. ` +\n          `If this is a new field, add it to ALLOWED_INVOICE_KEYS in devGuards.ts`,\n        );\n      }\n\n      // Return the actual property value\n      return Reflect.get(target, prop, receiver);\n    },\n\n    set(target, prop: string | symbol, value, receiver) {\n      const propName = String(prop);\n\n      // Warn on setting snake_case properties\n      if (typeof prop === 'string' && FORBIDDEN_SNAKE_CASE_FIELDS.has(propName)) {\n        console.error(\n          `≡ƒÜ¿ Attempted to SET snake_case field '${propName}' on Invoice! ` +\n          `Use camelCase: ${snakeToCamel(propName)}`,\n        );\n        return false;\n      }\n\n      return Reflect.set(target, prop, value, receiver);\n    },\n  });\n}\n\n/**\n * Guard an array of invoices in development\n * @param invoices - Array of normalized invoices\n * @returns Guarded invoices (dev) or original (production)\n */\nexport function guardInvoicesDev(invoices: Invoice[]): Invoice[] {\n  if (import.meta.env.PROD) {\n    return invoices;\n  }\n\n  return invoices.map(guardInvoiceDev);\n}\n\n/**\n * Common snake_case Product fields that developers might accidentally use\n */\nconst FORBIDDEN_SNAKE_CASE_PRODUCT_FIELDS = new Set([\n  'product_name',\n  'full_name',\n  'cost_price',\n  'selling_price',\n  'purchase_price',\n  'unit_price',\n  'current_stock',\n  'min_stock',\n  'max_stock',\n  'hsn_code',\n  'gst_rate',\n  'grade_variant',\n  'steel_grade',\n  'surface_finish',\n  'finish_type',\n  'nb_size',\n  'size_inch',\n  'revenue_growth',\n  'orders_growth',\n  'quantity_growth',\n  'prev_revenue',\n  'prev_orders',\n  'prev_quantity',\n]);\n\n/**\n * Wrap a Product object with a dev-time Proxy\n * @param product - The normalized Product object\n * @returns Proxied product (dev) or original product (production)\n */\nexport function guardProductDev(product: any): any {\n  if (import.meta.env.PROD) {\n    return product;\n  }\n\n  return new Proxy(product, {\n    get(target, prop: string | symbol, receiver) {\n      if (typeof prop === 'symbol') {\n        return Reflect.get(target, prop, receiver);\n      }\n\n      const propName = String(prop);\n\n      // ≡ƒÜ¿ CRITICAL ERROR: Snake_case field accessed\n      if (FORBIDDEN_SNAKE_CASE_PRODUCT_FIELDS.has(propName)) {\n        const stack = new Error().stack;\n        console.error(\n          `\\n` +\n          `≡ƒÜ¿≡ƒÜ¿≡ƒÜ¿ CRITICAL BUG DETECTED ≡ƒÜ¿≡ƒÜ¿≡ƒÜ¿\\n` +\n          `ΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöü\\n` +\n          `Snake_case field '${propName}' accessed on Product!\\n` +\n          `\\n` +\n          `Γ¥î WRONG:  product.${propName}\\n` +\n          `Γ£à CORRECT: product.${snakeToCamel(propName)}\\n` +\n          `\\n` +\n          `Frontend MUST use camelCase after productNormalizer.\\n` +\n          `\\n` +\n          `Fix this immediately in:\\n` +\n          `${stack?.split('\\n')[2] || 'Unknown location'}\\n` +\n          `ΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöü\\n`,\n        );\n        console.trace('Full stack trace:');\n        return undefined;\n      }\n\n      // ΓÜá∩╕Å WARNING: Unknown snake_case field\n      if (propName.includes('_')) {\n        const stack = new Error().stack;\n        console.warn(\n          `\\n` +\n          `ΓÜá∩╕Å WARNING: Snake_case property '${propName}' accessed on Product\\n` +\n          `Frontend should use camelCase. Did you mean '${snakeToCamel(propName)}'?\\n` +\n          `Location: ${stack?.split('\\n')[2] || 'Unknown'}\\n`,\n        );\n      }\n\n      // Γä╣∩╕Å INFO: Unknown camelCase field\n      if (!ALLOWED_PRODUCT_KEYS.has(propName) && !propName.startsWith('_')) {\n        console.warn(\n          `Γä╣∩╕Å Unknown Product field '${propName}' accessed. ` +\n          `If this is a new field, add it to ALLOWED_PRODUCT_KEYS in devGuards.ts`,\n        );\n      }\n\n      return Reflect.get(target, prop, receiver);\n    },\n\n    set(target, prop: string | symbol, value, receiver) {\n      const propName = String(prop);\n\n      if (typeof prop === 'string' && FORBIDDEN_SNAKE_CASE_PRODUCT_FIELDS.has(propName)) {\n        console.error(\n          `≡ƒÜ¿ Attempted to SET snake_case field '${propName}' on Product! ` +\n          `Use camelCase: ${snakeToCamel(propName)}`,\n        );\n        return false;\n      }\n\n      return Reflect.set(target, prop, value, receiver);\n    },\n  });\n}\n\n/**\n * Guard an array of products in development\n * @param products - Array of normalized products\n * @returns Guarded products (dev) or original (production)\n */\nexport function guardProductsDev(products: any[]): any[] {\n  if (import.meta.env.PROD) {\n    return products;\n  }\n\n  return products.map(guardProductDev);\n}\n\n/**\n * Common snake_case Customer fields\n */\nconst FORBIDDEN_SNAKE_CASE_CUSTOMER_FIELDS = new Set([\n  'customer_name',\n  'company_name',\n  'email_address',\n  'phone_number',\n  'vat_number',\n  'tax_registration_number',\n  'credit_limit',\n  'current_credit',\n  'payment_terms',\n]);\n\n/**\n * Wrap a Customer object with a dev-time Proxy\n */\nexport function guardCustomerDev(customer: any): any {\n  if (import.meta.env.PROD) {\n    return customer;\n  }\n\n  return new Proxy(customer, {\n    get(target, prop: string | symbol, receiver) {\n      if (typeof prop === 'symbol') {\n        return Reflect.get(target, prop, receiver);\n      }\n\n      const propName = String(prop);\n\n      if (FORBIDDEN_SNAKE_CASE_CUSTOMER_FIELDS.has(propName)) {\n        const stack = new Error().stack;\n        console.error(\n          `\\n` +\n          `≡ƒÜ¿≡ƒÜ¿≡ƒÜ¿ CRITICAL BUG DETECTED ≡ƒÜ¿≡ƒÜ¿≡ƒÜ¿\\n` +\n          `ΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöü\\n` +\n          `Snake_case field '${propName}' accessed on Customer!\\n` +\n          `\\n` +\n          `Γ¥î WRONG:  customer.${propName}\\n` +\n          `Γ£à CORRECT: customer.${snakeToCamel(propName)}\\n` +\n          `\\n` +\n          `Frontend MUST use camelCase after customerNormalizer.\\n` +\n          `\\n` +\n          `Fix this immediately in:\\n` +\n          `${stack?.split('\\n')[2] || 'Unknown location'}\\n` +\n          `ΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöü\\n`,\n        );\n        console.trace('Full stack trace:');\n        return undefined;\n      }\n\n      if (propName.includes('_')) {\n        const stack = new Error().stack;\n        console.warn(\n          `\\n` +\n          `ΓÜá∩╕Å WARNING: Snake_case property '${propName}' accessed on Customer\\n` +\n          `Frontend should use camelCase. Did you mean '${snakeToCamel(propName)}'?\\n` +\n          `Location: ${stack?.split('\\n')[2] || 'Unknown'}\\n`,\n        );\n      }\n\n      if (!ALLOWED_CUSTOMER_KEYS.has(propName) && !propName.startsWith('_')) {\n        console.warn(\n          `Γä╣∩╕Å Unknown Customer field '${propName}' accessed. ` +\n          `If this is a new field, add it to ALLOWED_CUSTOMER_KEYS in devGuards.ts`,\n        );\n      }\n\n      return Reflect.get(target, prop, receiver);\n    },\n\n    set(target, prop: string | symbol, value, receiver) {\n      const propName = String(prop);\n\n      if (typeof prop === 'string' && FORBIDDEN_SNAKE_CASE_CUSTOMER_FIELDS.has(propName)) {\n        console.error(\n          `≡ƒÜ¿ Attempted to SET snake_case field '${propName}' on Customer! ` +\n          `Use camelCase: ${snakeToCamel(propName)}`,\n        );\n        return false;\n      }\n\n      return Reflect.set(target, prop, value, receiver);\n    },\n  });\n}\n\n/**\n * Guard an array of customers in development\n */\nexport function guardCustomersDev(customers: any[]): any[] {\n  if (import.meta.env.PROD) {\n    return customers;\n  }\n\n  return customers.map(guardCustomerDev);\n}\n\n/**\n * Common snake_case Supplier fields\n */\nconst FORBIDDEN_SNAKE_CASE_SUPPLIER_FIELDS = new Set([\n  'supplier_name',\n  'email_address',\n  'phone_number',\n  'tax_registration_number',\n  'payment_terms',\n]);\n\n/**\n * Wrap a Supplier object with a dev-time Proxy\n */\nexport function guardSupplierDev(supplier: any): any {\n  if (import.meta.env.PROD) {\n    return supplier;\n  }\n\n  return new Proxy(supplier, {\n    get(target, prop: string | symbol, receiver) {\n      if (typeof prop === 'symbol') {\n        return Reflect.get(target, prop, receiver);\n      }\n\n      const propName = String(prop);\n\n      if (FORBIDDEN_SNAKE_CASE_SUPPLIER_FIELDS.has(propName)) {\n        const stack = new Error().stack;\n        console.error(\n          `\\n` +\n          `≡ƒÜ¿≡ƒÜ¿≡ƒÜ¿ CRITICAL BUG DETECTED ≡ƒÜ¿≡ƒÜ¿≡ƒÜ¿\\n` +\n          `ΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöü\\n` +\n          `Snake_case field '${propName}' accessed on Supplier!\\n` +\n          `\\n` +\n          `Γ¥î WRONG:  supplier.${propName}\\n` +\n          `Γ£à CORRECT: supplier.${snakeToCamel(propName)}\\n` +\n          `\\n` +\n          `Frontend MUST use camelCase after supplierNormalizer.\\n` +\n          `\\n` +\n          `Fix this immediately in:\\n` +\n          `${stack?.split('\\n')[2] || 'Unknown location'}\\n` +\n          `ΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöü\\n`,\n        );\n        console.trace('Full stack trace:');\n        return undefined;\n      }\n\n      if (propName.includes('_')) {\n        const stack = new Error().stack;\n        console.warn(\n          `\\n` +\n          `ΓÜá∩╕Å WARNING: Snake_case property '${propName}' accessed on Supplier\\n` +\n          `Frontend should use camelCase. Did you mean '${snakeToCamel(propName)}'?\\n` +\n          `Location: ${stack?.split('\\n')[2] || 'Unknown'}\\n`,\n        );\n      }\n\n      if (!ALLOWED_SUPPLIER_KEYS.has(propName) && !propName.startsWith('_')) {\n        console.log(\n          `Γä╣∩╕Å Unknown Supplier field '${propName}' accessed. ` +\n          `If this is a new field, add it to ALLOWED_SUPPLIER_KEYS in devGuards.ts`,\n        );\n      }\n\n      return Reflect.get(target, prop, receiver);\n    },\n\n    set(target, prop: string | symbol, value, receiver) {\n      const propName = String(prop);\n\n      if (typeof prop === 'string' && FORBIDDEN_SNAKE_CASE_SUPPLIER_FIELDS.has(propName)) {\n        console.error(\n          `≡ƒÜ¿ Attempted to SET snake_case field '${propName}' on Supplier! ` +\n          `Use camelCase: ${snakeToCamel(propName)}`,\n        );\n        return false;\n      }\n\n      return Reflect.set(target, prop, value, receiver);\n    },\n  });\n}\n\n/**\n * Guard an array of suppliers in development\n */\nexport function guardSuppliersDev(suppliers: any[]): any[] {\n  if (import.meta.env.PROD) {\n    return suppliers;\n  }\n\n  return suppliers.map(guardSupplierDev);\n}\n\n/**\n * Common snake_case Payment fields\n */\nconst FORBIDDEN_SNAKE_CASE_PAYMENT_FIELDS = new Set([\n  'payment_date',\n  'payment_method',\n  'payment_mode',\n  'reference_number',\n  'receipt_number',\n  'invoice_number',\n  'created_at',\n  'voided_at',\n]);\n\n/**\n * Wrap a Payment object with a dev-time Proxy\n */\nexport function guardPaymentDev(payment: any): any {\n  if (import.meta.env.PROD) {\n    return payment;\n  }\n\n  return new Proxy(payment, {\n    get(target, prop: string | symbol, receiver) {\n      if (typeof prop === 'symbol') {\n        return Reflect.get(target, prop, receiver);\n      }\n\n      const propName = String(prop);\n\n      if (FORBIDDEN_SNAKE_CASE_PAYMENT_FIELDS.has(propName)) {\n        const stack = new Error().stack;\n        console.error(\n          `\\n` +\n          `≡ƒÜ¿≡ƒÜ¿≡ƒÜ¿ CRITICAL BUG DETECTED ≡ƒÜ¿≡ƒÜ¿≡ƒÜ¿\\n` +\n          `ΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöü\\n` +\n          `Snake_case field '${propName}' accessed on Payment!\\n` +\n          `\\n` +\n          `Γ¥î WRONG:  payment.${propName}\\n` +\n          `Γ£à CORRECT: payment.${snakeToCamel(propName)}\\n` +\n          `\\n` +\n          `Frontend MUST use camelCase after paymentNormalizer.\\n` +\n          `\\n` +\n          `Fix this immediately in:\\n` +\n          `${stack?.split('\\n')[2] || 'Unknown location'}\\n` +\n          `ΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöü\\n`,\n        );\n        console.trace('Full stack trace:');\n        return undefined;\n      }\n\n      if (propName.includes('_')) {\n        const stack = new Error().stack;\n        console.warn(\n          `\\n` +\n          `ΓÜá∩╕Å WARNING: Snake_case property '${propName}' accessed on Payment\\n` +\n          `Frontend should use camelCase. Did you mean '${snakeToCamel(propName)}'?\\n` +\n          `Location: ${stack?.split('\\n')[2] || 'Unknown'}\\n`,\n        );\n      }\n\n      if (!ALLOWED_PAYMENT_KEYS.has(propName) && !propName.startsWith('_')) {\n        console.log(\n          `Γä╣∩╕Å Unknown Payment field '${propName}' accessed. ` +\n          `If this is a new field, add it to ALLOWED_PAYMENT_KEYS in devGuards.ts`,\n        );\n      }\n\n      return Reflect.get(target, prop, receiver);\n    },\n\n    set(target, prop: string | symbol, value, receiver) {\n      const propName = String(prop);\n\n      if (typeof prop === 'string' && FORBIDDEN_SNAKE_CASE_PAYMENT_FIELDS.has(propName)) {\n        console.error(\n          `≡ƒÜ¿ Attempted to SET snake_case field '${propName}' on Payment! ` +\n          `Use camelCase: ${snakeToCamel(propName)}`,\n        );\n        return false;\n      }\n\n      return Reflect.set(target, prop, value, receiver);\n    },\n  });\n}\n\n/**\n * Guard an array of payments in development\n */\nexport function guardPaymentsDev(payments: any[]): any[] {\n  if (import.meta.env.PROD) {\n    return payments;\n  }\n\n  return payments.map(guardPaymentDev);\n}\n\n/**\n * Common snake_case PurchaseOrder fields\n */\nconst FORBIDDEN_SNAKE_CASE_PURCHASE_ORDER_FIELDS = new Set([\n  'po_number',\n  'po_date',\n  'due_date',\n  'expected_delivery_date',\n  'supplier_name',\n  'supplier_email',\n  'supplier_phone',\n  'supplier_address',\n  'supplier_trn',\n  'supplier_contact_name',\n  'supplier_contact_email',\n  'supplier_contact_phone',\n  'buyer_name',\n  'buyer_email',\n  'buyer_phone',\n  'buyer_department',\n  'vat_amount',\n  'discount_percentage',\n  'discount_amount',\n  'discount_type',\n  'shipping_charges',\n  'freight_charges',\n  'handling_charges',\n  'other_charges',\n  'payment_terms',\n  'stock_status',\n  'approval_status',\n  'approval_date',\n  'approved_by',\n  'approval_comments',\n]);\n\n/**\n * Wrap a PurchaseOrder object with a dev-time Proxy\n */\nexport function guardPurchaseOrderDev(purchaseOrder: any): any {\n  if (import.meta.env.PROD) {\n    return purchaseOrder;\n  }\n\n  return new Proxy(purchaseOrder, {\n    get(target, prop: string | symbol, receiver) {\n      if (typeof prop === 'symbol') {\n        return Reflect.get(target, prop, receiver);\n      }\n\n      const propName = String(prop);\n\n      if (FORBIDDEN_SNAKE_CASE_PURCHASE_ORDER_FIELDS.has(propName)) {\n        const stack = new Error().stack;\n        console.error(\n          `\\n` +\n          `≡ƒÜ¿≡ƒÜ¿≡ƒÜ¿ CRITICAL BUG DETECTED ≡ƒÜ¿≡ƒÜ¿≡ƒÜ¿\\n` +\n          `ΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöü\\n` +\n          `Snake_case field '${propName}' accessed on PurchaseOrder!\\n` +\n          `\\n` +\n          `Γ¥î WRONG:  purchaseOrder.${propName}\\n` +\n          `Γ£à CORRECT: purchaseOrder.${snakeToCamel(propName)}\\n` +\n          `\\n` +\n          `Frontend MUST use camelCase after purchaseOrderNormalizer.\\n` +\n          `\\n` +\n          `Fix this immediately in:\\n` +\n          `${stack?.split('\\n')[2] || 'Unknown location'}\\n` +\n          `ΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöü\\n`,\n        );\n        console.trace('Full stack trace:');\n        return undefined;\n      }\n\n      if (propName.includes('_')) {\n        const stack = new Error().stack;\n        console.warn(\n          `\\n` +\n          `ΓÜá∩╕Å WARNING: Snake_case property '${propName}' accessed on PurchaseOrder\\n` +\n          `Frontend should use camelCase. Did you mean '${snakeToCamel(propName)}'?\\n` +\n          `Location: ${stack?.split('\\n')[2] || 'Unknown'}\\n`,\n        );\n      }\n\n      if (!ALLOWED_PURCHASE_ORDER_KEYS.has(propName) && !propName.startsWith('_')) {\n        console.log(\n          `Γä╣∩╕Å Unknown PurchaseOrder field '${propName}' accessed. ` +\n          `If this is a new field, add it to ALLOWED_PURCHASE_ORDER_KEYS in devGuards.ts`,\n        );\n      }\n\n      return Reflect.get(target, prop, receiver);\n    },\n\n    set(target, prop: string | symbol, value, receiver) {\n      const propName = String(prop);\n\n      if (typeof prop === 'string' && FORBIDDEN_SNAKE_CASE_PURCHASE_ORDER_FIELDS.has(propName)) {\n        console.error(\n          `≡ƒÜ¿ Attempted to SET snake_case field '${propName}' on PurchaseOrder! ` +\n          `Use camelCase: ${snakeToCamel(propName)}`,\n        );\n        return false;\n      }\n\n      return Reflect.set(target, prop, value, receiver);\n    },\n  });\n}\n\n/**\n * Guard an array of purchase orders in development\n */\nexport function guardPurchaseOrdersDev(purchaseOrders: any[]): any[] {\n  if (import.meta.env.PROD) {\n    return purchaseOrders;\n  }\n\n  return purchaseOrders.map(guardPurchaseOrderDev);\n}\n\n/**\n * Common snake_case DeliveryNote fields\n */\nconst FORBIDDEN_SNAKE_CASE_DELIVERY_NOTE_FIELDS = new Set([\n  'delivery_note_number',\n  'delivery_date',\n  'invoice_id',\n  'invoice_number',\n  'purchase_order_id',\n  'customer_details',\n  'delivery_address',\n  'driver_name',\n  'driver_phone',\n  'vehicle_number',\n  'is_partial',\n  'has_notes',\n]);\n\n/**\n * Wrap a DeliveryNote object with a dev-time Proxy\n */\nexport function guardDeliveryNoteDev(deliveryNote: any): any {\n  if (import.meta.env.PROD) {\n    return deliveryNote;\n  }\n\n  return new Proxy(deliveryNote, {\n    get(target, prop: string | symbol, receiver) {\n      if (typeof prop === 'symbol') {\n        return Reflect.get(target, prop, receiver);\n      }\n\n      const propName = String(prop);\n\n      if (FORBIDDEN_SNAKE_CASE_DELIVERY_NOTE_FIELDS.has(propName)) {\n        const stack = new Error().stack;\n        console.error(\n          `\\n` +\n          `≡ƒÜ¿≡ƒÜ¿≡ƒÜ¿ CRITICAL BUG DETECTED ≡ƒÜ¿≡ƒÜ¿≡ƒÜ¿\\n` +\n          `ΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöü\\n` +\n          `Snake_case field '${propName}' accessed on DeliveryNote!\\n` +\n          `\\n` +\n          `Γ¥î WRONG:  deliveryNote.${propName}\\n` +\n          `Γ£à CORRECT: deliveryNote.${snakeToCamel(propName)}\\n` +\n          `\\n` +\n          `Frontend MUST use camelCase after deliveryNoteNormalizer.\\n` +\n          `\\n` +\n          `Fix this immediately in:\\n` +\n          `${stack?.split('\\n')[2] || 'Unknown location'}\\n` +\n          `ΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöü\\n`,\n        );\n        console.trace('Full stack trace:');\n        return undefined;\n      }\n\n      if (propName.includes('_')) {\n        const stack = new Error().stack;\n        console.warn(\n          `\\n` +\n          `ΓÜá∩╕Å WARNING: Snake_case property '${propName}' accessed on DeliveryNote\\n` +\n          `Frontend should use camelCase. Did you mean '${snakeToCamel(propName)}'?\\n` +\n          `Location: ${stack?.split('\\n')[2] || 'Unknown'}\\n`,\n        );\n      }\n\n      if (!ALLOWED_DELIVERY_NOTE_KEYS.has(propName) && !propName.startsWith('_')) {\n        console.log(\n          `Γä╣∩╕Å Unknown DeliveryNote field '${propName}' accessed. ` +\n          `If this is a new field, add it to ALLOWED_DELIVERY_NOTE_KEYS in devGuards.ts`,\n        );\n      }\n\n      return Reflect.get(target, prop, receiver);\n    },\n\n    set(target, prop: string | symbol, value, receiver) {\n      const propName = String(prop);\n\n      if (typeof prop === 'string' && FORBIDDEN_SNAKE_CASE_DELIVERY_NOTE_FIELDS.has(propName)) {\n        console.error(\n          `≡ƒÜ¿ Attempted to SET snake_case field '${propName}' on DeliveryNote! ` +\n          `Use camelCase: ${snakeToCamel(propName)}`,\n        );\n        return false;\n      }\n\n      return Reflect.set(target, prop, value, receiver);\n    },\n  });\n}\n\n/**\n * Guard an array of delivery notes in development\n */\nexport function guardDeliveryNotesDev(deliveryNotes: any[]): any[] {\n  if (import.meta.env.PROD) {\n    return deliveryNotes;\n  }\n\n  return deliveryNotes.map(guardDeliveryNoteDev);\n}\n\n/**\n * Simple snake_case to camelCase converter for error messages\n */\nfunction snakeToCamel(str: string): string {\n  return str.replace(/_([a-z])/g, (_, letter) => letter.toUpperCase());\n}\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\utils\\fieldAccessors.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\utils\\htmlEscape.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\utils\\invoiceNormalizer.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":15,"column":44,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":15,"endColumn":47,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[639,642],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[639,642],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":63,"column":44,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":63,"endColumn":47,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2222,2225],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2222,2225],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":110,"column":46,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":110,"endColumn":49,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3811,3814],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3811,3814],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":120,"column":31,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":120,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4131,4134],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4131,4134],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":143,"column":33,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":143,"endColumn":36,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4906,4909],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4906,4909],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":150,"column":44,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":150,"endColumn":47,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5216,5219],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5216,5219],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":169,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":169,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5734,5737],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5734,5737],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":187,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":187,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6433,6436],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6433,6436],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":201,"column":46,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":201,"endColumn":49,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7039,7042],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7039,7042],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":358,"column":48,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":358,"endColumn":51,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[16355,16358],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[16355,16358],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":10,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Frontend Invoice Data Normalizer\n * CRITICAL: Converts snake_case API fields to camelCase frontend schema\n * FAIL-SAFE: Validates and normalizes invoice data from API\n */\n\nimport type { Invoice, CustomerDetails, InvoiceItem, PaymentRecord, DeliveryStatus } from '../types/invoice';\n\n/**\n * Normalize invoice status from gRPC enum to frontend string\n * Maps Protocol Buffer enum constants to lowercase frontend values\n * @param rawStatus - Raw status from API (e.g., \"STATUS_DRAFT\", \"STATUS_ISSUED\")\n * @returns Normalized status: 'draft' | 'proforma' | 'issued' | 'sent' | 'cancelled'\n */\nfunction normalizeInvoiceStatus(rawStatus: any): string {\n  // Handle null/undefined/empty\n  if (!rawStatus || rawStatus === '') {\n    if (process.env.NODE_ENV !== 'production') {\n      console.warn('INVOICE_NORMALIZER: Received null/empty status, defaulting to \"draft\"');\n    }\n    return 'draft';\n  }\n\n  // If already normalized (lowercase), return as-is\n  if (rawStatus === rawStatus.toLowerCase()) {\n    return rawStatus;\n  }\n\n  // Map gRPC enum constants to frontend strings\n  const statusMap: Record<string, string> = {\n    'STATUS_DRAFT': 'draft',\n    'STATUS_UNSPECIFIED': 'draft', // Treat unspecified as draft\n    'STATUS_PROFORMA': 'proforma',\n    'STATUS_ISSUED': 'issued',\n    'STATUS_SENT': 'sent',\n    'STATUS_CANCELLED': 'cancelled',\n  };\n\n  const normalized = statusMap[rawStatus];\n\n  if (!normalized) {\n    // Unknown enum - log SCHEMA_MISMATCH and return safe default\n    if (process.env.NODE_ENV !== 'production') {\n      console.error('SCHEMA_MISMATCH[INVOICE_STATUS_NORMALIZER]: Unknown raw invoice status', {\n        receivedStatus: rawStatus,\n        knownGrpcEnums: Object.keys(statusMap),\n        defaultingTo: 'draft',\n        timestamp: new Date().toISOString(),\n      });\n    }\n    return 'draft'; // Safe default\n  }\n\n  return normalized;\n}\n\n/**\n * Normalize payment status from gRPC enum to frontend string\n * Maps Protocol Buffer enum constants to lowercase frontend values\n * @param rawStatus - Raw payment status from API (e.g., \"PAYMENT_STATUS_UNPAID\")\n * @returns Normalized payment status: 'unpaid' | 'partially_paid' | 'paid' | 'fully_paid'\n */\nfunction normalizePaymentStatus(rawStatus: any): string {\n  // Handle null/undefined/empty\n  if (!rawStatus || rawStatus === '') {\n    if (process.env.NODE_ENV !== 'production') {\n      console.warn('INVOICE_NORMALIZER: Received null/empty payment status, defaulting to \"unpaid\"');\n    }\n    return 'unpaid';\n  }\n\n  // If already normalized (lowercase with underscores), return as-is\n  if (rawStatus === rawStatus.toLowerCase()) {\n    return rawStatus;\n  }\n\n  // Map gRPC enum constants to frontend strings\n  const paymentStatusMap: Record<string, string> = {\n    'PAYMENT_STATUS_UNPAID': 'unpaid',\n    'PAYMENT_STATUS_UNSPECIFIED': 'unpaid', // Treat unspecified as unpaid\n    'PAYMENT_STATUS_PARTIALLY_PAID': 'partially_paid',\n    'PAYMENT_STATUS_PAID': 'paid',\n    'PAYMENT_STATUS_FULLY_PAID': 'fully_paid',\n  };\n\n  const normalized = paymentStatusMap[rawStatus];\n\n  if (!normalized) {\n    // Unknown enum - log SCHEMA_MISMATCH and return safe default\n    if (process.env.NODE_ENV !== 'production') {\n      console.error('SCHEMA_MISMATCH[PAYMENT_STATUS_NORMALIZER]: Unknown raw payment status', {\n        receivedStatus: rawStatus,\n        knownGrpcEnums: Object.keys(paymentStatusMap),\n        defaultingTo: 'unpaid',\n        timestamp: new Date().toISOString(),\n      });\n    }\n    return 'unpaid'; // Safe default\n  }\n\n  return normalized;\n}\n\n/**\n * Convert snake_case API response to camelCase Invoice object\n * @param rawInvoice - Raw invoice data from API (snake_case)\n * @param source - Source of the data for debugging\n * @returns Normalized Invoice with camelCase fields\n */\nexport function normalizeInvoice(rawInvoice: any, source = 'unknown'): Invoice | null {\n  if (!rawInvoice || typeof rawInvoice !== 'object') {\n    console.error(`Γ¥î [Invoice Normalizer] Invalid invoice data from ${source}:`, rawInvoice);\n    return null;\n  }\n\n  const errors: string[] = [];\n\n  try {\n    // Helper to safely parse dates\n    const parseDate = (value: any, fieldName: string): string => {\n      if (!value) return new Date().toISOString();\n      \n      // Handle Timestamp objects from Firestore/backend\n      if (value?.seconds) {\n        return new Date(parseInt(value.seconds) * 1000).toISOString();\n      }\n      \n      // Handle string dates\n      if (typeof value === 'string') {\n        const parsed = new Date(value);\n        if (!isNaN(parsed.getTime())) {\n          return parsed.toISOString();\n        }\n        errors.push(`${fieldName} is not a valid date: ${value}`);\n        return new Date().toISOString();\n      }\n      \n      errors.push(`${fieldName} has unexpected type: ${typeof value}`);\n      return new Date().toISOString();\n    };\n\n    // Helper to safely parse numbers\n    const parseNumber = (value: any, fallback = 0): number => {\n      if (value === null || value === undefined) return fallback;\n      const parsed = parseFloat(value);\n      return isNaN(parsed) ? fallback : parsed;\n    };\n\n    // Normalize customer details (handle both snake_case and camelCase)\n    const normalizeCustomerDetails = (raw: any): CustomerDetails => {\n      if (!raw) {\n        return {\n          id: 0,\n          name: 'Unknown Customer',\n        };\n      }\n\n      return {\n        id: raw.id || raw.customerId || 0,\n        name: raw.name || raw.customerName || 'Unknown',\n        email: raw.email || undefined,\n        phone: raw.phone || undefined,\n        address: raw.address || undefined,\n        gstNumber: raw.gstNumber || raw.gstNumber || undefined,\n      };\n    };\n\n    // Normalize invoice items\n    const normalizeItems = (items: any[]): InvoiceItem[] => {\n      if (!Array.isArray(items)) return [];\n      \n      return items.map(item => ({\n        id: item.id,\n        productId: item.productId || item.productId || 0,\n        productName: item.productName || item.productName || '',\n        description: item.description || undefined,\n        quantity: parseNumber(item.quantity, 0),\n        rate: parseNumber(item.rate, 0),\n        unit: item.unit || undefined,\n        amount: parseNumber(item.amount, 0),\n        vatRate: parseNumber(item.vatRate || item.vatRate, 0),\n        vatAmount: parseNumber(item.vatAmount || item.vatAmount, 0),\n      }));\n    };\n\n    // Normalize payments\n    const normalizePayments = (payments: any[]): PaymentRecord[] | undefined => {\n      if (!Array.isArray(payments)) return undefined;\n      \n      return payments.map(payment => ({\n        id: payment.id || 0,\n        amount: parseNumber(payment.amount, 0),\n        paymentDate: parseDate(payment.paymentDate || payment.paymentDate, 'paymentDate'),\n        paymentMethod: payment.paymentMethod || payment.paymentMethod || undefined,\n        notes: payment.notes || undefined,\n        createdAt: payment.createdAt || payment.createdAt || undefined,\n      }));\n    };\n\n    // Normalize delivery status\n    const normalizeDeliveryStatus = (status: any): DeliveryStatus | undefined => {\n      if (!status) return undefined;\n      \n      return {\n        hasNotes: Boolean(status.hasNotes || status.hasNotes),\n        count: parseNumber(status.count, 0),\n        lastDeliveryDate: status.lastDeliveryDate || status.lastDeliveryDate || undefined,\n      };\n    };\n\n    // Build the normalized Invoice object (EXPLICIT snake_case ΓåÆ camelCase conversion)\n    const customerDetailsNormalized = normalizeCustomerDetails(\n      rawInvoice.customerDetails || rawInvoice.customerDetails || rawInvoice.customer,\n    );\n    const invoiceDateParsed = parseDate(rawInvoice.invoiceDate || rawInvoice.invoiceDate, 'invoiceDate');\n    \n    const normalized: Invoice = {\n      // Core identifiers\n      id: rawInvoice.id || 0,\n      invoiceNumber: rawInvoice.invoiceNumber || rawInvoice.invoiceNumber || '',\n      \n      // Dates\n      invoiceDate: invoiceDateParsed,\n      dueDate: parseDate(rawInvoice.dueDate || rawInvoice.dueDate, 'dueDate'),\n      date: invoiceDateParsed,  // Legacy alias for invoiceDate\n      promiseDate: rawInvoice.promiseDate || rawInvoice.promiseDate || null,  // Promise/delivery date\n      createdAt: rawInvoice.audit?.createdAt ?? rawInvoice.audit?.created_at ?? rawInvoice.createdAt ?? rawInvoice.created_at ?? undefined,\n      updatedAt: rawInvoice.audit?.updatedAt ?? rawInvoice.audit?.updated_at ?? rawInvoice.updatedAt ?? rawInvoice.updated_at ?? undefined,\n      deletedAt: rawInvoice.audit?.deletedAt ?? rawInvoice.audit?.deleted_at ?? rawInvoice.deletedAt ?? rawInvoice.deleted_at ?? null,\n      \n      // Invoice Revision Tracking (24-hour edit grace period)\n      issuedAt: rawInvoice.issuedAt ? parseDate(rawInvoice.issuedAt, 'issuedAt') : null,\n      revisionNumber: parseNumber(rawInvoice.revisionNumber, 1),\n      revisedAt: rawInvoice.revisedAt ? parseDate(rawInvoice.revisedAt, 'revisedAt') : null,\n      originalInvoiceId: rawInvoice.originalInvoiceId || null,\n      supersededAt: rawInvoice.supersededAt ? parseDate(rawInvoice.supersededAt, 'supersededAt') : null,\n      supersededBy: rawInvoice.supersededBy || null,\n      supersededReason: rawInvoice.supersededReason || null,\n      \n      // Customer information\n      customerId: rawInvoice.customerId || rawInvoice.customerId || 0,\n      customerDetails: customerDetailsNormalized,\n      customer: customerDetailsNormalized,  // Legacy alias for customerDetails\n      customerName: rawInvoice.customerName || rawInvoice.customerName || undefined,\n      customerEmail: rawInvoice.customerEmail || rawInvoice.customer_email || undefined,\n      \n      // Customer Purchase Order\n      customerPurchaseOrderNumber: rawInvoice.customerPurchaseOrderNumber || rawInvoice.customer_purchase_order_number || undefined,\n      customerPurchaseOrderDate: rawInvoice.customerPurchaseOrderDate || rawInvoice.customer_purchase_order_date || undefined,\n      \n      // Financial\n      subtotal: parseNumber(rawInvoice.subtotal, 0),\n      vatAmount: parseNumber(rawInvoice.vatAmount || rawInvoice.vatAmount, 0),\n      total: parseNumber(rawInvoice.total || rawInvoice.totalAmount, 0),\n      totalAmount: parseNumber(rawInvoice.totalAmount || rawInvoice.totalAmount || rawInvoice.total, 0),\n      received: parseNumber(rawInvoice.received, 0),\n      outstanding: parseNumber(rawInvoice.outstanding, 0),\n      balanceDue: parseNumber(rawInvoice.balanceDue || rawInvoice.balance_due || rawInvoice.balanceAmount || rawInvoice.balance_amount, undefined),\n      \n      // Discounts & Currency\n      discountPercentage: parseNumber(rawInvoice.discountPercentage || rawInvoice.discount_percentage, undefined),\n      discountAmount: parseNumber(rawInvoice.discountAmount || rawInvoice.discount_amount, undefined),\n      discountType: rawInvoice.discountType || rawInvoice.discount_type || undefined,\n      currency: rawInvoice.currency || 'INR',\n      exchangeRate: parseNumber(rawInvoice.exchangeRate || rawInvoice.exchange_rate, 1),\n      \n      // Additional Charges\n      packingCharges: parseNumber(rawInvoice.packingCharges || rawInvoice.packing_charges, undefined),\n      loadingCharges: parseNumber(rawInvoice.loadingCharges || rawInvoice.loading_charges, undefined),\n      freightCharges: parseNumber(rawInvoice.freightCharges || rawInvoice.freight_charges, undefined),\n      insuranceCharges: parseNumber(rawInvoice.insuranceCharges || rawInvoice.insurance_charges, undefined),\n      otherCharges: parseNumber(rawInvoice.otherCharges || rawInvoice.other_charges, undefined),\n      taxNotes: rawInvoice.taxNotes || rawInvoice.tax_notes || undefined,\n\n      // Phase 1: Charge VAT Fields (Migration 100) - UAE VAT on individual charges\n      packingChargesVat: parseNumber(rawInvoice.packingChargesVat || rawInvoice.packing_charges_vat, 0),\n      freightChargesVat: parseNumber(rawInvoice.freightChargesVat || rawInvoice.freight_charges_vat, 0),\n      insuranceChargesVat: parseNumber(rawInvoice.insuranceChargesVat || rawInvoice.insurance_charges_vat, 0),\n      loadingChargesVat: parseNumber(rawInvoice.loadingChargesVat || rawInvoice.loading_charges_vat, 0),\n      otherChargesVat: parseNumber(rawInvoice.otherChargesVat || rawInvoice.other_charges_vat, 0),\n      isExport: Boolean(rawInvoice.isExport || rawInvoice.is_export),\n\n      // Phase 1: Advance Payment Integration (Migration 102) - UAE FTA Article 26\n      advancePaymentId: rawInvoice.advancePaymentId || rawInvoice.advance_payment_id || undefined,\n      advanceTaxInvoiceNumber: rawInvoice.advanceTaxInvoiceNumber || rawInvoice.advance_tax_invoice_number || undefined,\n      \n      // Status (normalized from gRPC enums)\n      status: normalizeInvoiceStatus(rawInvoice.status),\n      paymentStatus: normalizePaymentStatus(rawInvoice.paymentStatus || rawInvoice.paymentStatus),\n      \n      // Items\n      items: normalizeItems(rawInvoice.items || []),\n      \n      // Sales & Commission\n      salesAgentId: rawInvoice.salesAgentId || rawInvoice.salesAgentId || null,\n      salesAgentName: rawInvoice.salesAgentName || rawInvoice.salesAgentName || undefined,\n      commissionAmount: parseNumber(rawInvoice.commissionAmount || rawInvoice.commissionAmount, undefined),\n      commissionCalculated: Boolean(rawInvoice.commissionCalculated || rawInvoice.commissionCalculated),\n      \n      // Payments\n      payments: normalizePayments(rawInvoice.payments || []),\n      lastPaymentDate: rawInvoice.lastPaymentDate || rawInvoice.lastPaymentDate || null,\n      advanceReceived: parseNumber(rawInvoice.advanceReceived || rawInvoice.advance_received, undefined),\n      modeOfPayment: rawInvoice.modeOfPayment || rawInvoice.mode_of_payment || undefined,\n      chequeNumber: rawInvoice.chequeNumber || rawInvoice.cheque_number || undefined,\n      \n      // Warehouse\n      warehouseId: rawInvoice.warehouseId || rawInvoice.warehouse_id || undefined,\n      warehouseName: rawInvoice.warehouseName || rawInvoice.warehouse_name || undefined,\n      warehouseCode: rawInvoice.warehouseCode || rawInvoice.warehouse_code || undefined,\n      warehouseCity: rawInvoice.warehouseCity || rawInvoice.warehouse_city || undefined,\n      \n      // UAE VAT Compliance Fields\n      placeOfSupply: rawInvoice.placeOfSupply || rawInvoice.place_of_supply || undefined,\n      supplyDate: rawInvoice.supplyDate || rawInvoice.supply_date || undefined,\n      isReverseCharge: Boolean(rawInvoice.isReverseCharge || rawInvoice.is_reverse_charge),\n      reverseChargeAmount: parseNumber(rawInvoice.reverseChargeAmount || rawInvoice.reverse_charge_amount, 0),\n      exchangeRateDate: rawInvoice.exchangeRateDate || rawInvoice.exchange_rate_date || undefined,\n      \n      // Delivery\n      deliveryStatus: normalizeDeliveryStatus(rawInvoice.deliveryStatus || rawInvoice.deliveryStatus),\n      \n      // Soft delete & recreation\n      deletionReason: rawInvoice.audit?.deletionReason ?? rawInvoice.audit?.deletion_reason ?? rawInvoice.deletionReason ?? rawInvoice.deletion_reason ?? null,\n      deletedBy: rawInvoice.audit?.deletedBy ?? rawInvoice.audit?.deleted_by ?? rawInvoice.deletedBy ?? rawInvoice.deleted_by ?? null,\n      recreatedFrom: rawInvoice.recreatedFrom || rawInvoice.recreatedFrom || null,\n      \n      // Notes & Terms\n      notes: rawInvoice.notes || undefined,\n      terms: rawInvoice.terms || rawInvoice.termsAndConditions || rawInvoice.terms_and_conditions || undefined,  // Canonical UI field\n      termsAndConditions: rawInvoice.termsAndConditions || rawInvoice.terms_and_conditions || rawInvoice.terms || undefined,  // Backend/legacy alias\n      \n      // Company details\n      companyDetails: rawInvoice.companyDetails || rawInvoice.companyDetails || undefined,\n    };\n\n    // Log validation errors if any\n    if (errors.length > 0) {\n      console.warn(`ΓÜá∩╕Å [Invoice Normalizer] Validation warnings from ${source}:`);\n      errors.forEach(error => console.warn(`   - ${error}`));\n    }\n\n    return normalized;\n    \n  } catch (error) {\n    console.error(`Γ¥î [Invoice Normalizer] Failed to normalize invoice from ${source}:`, error);\n    console.error('   Raw data:', rawInvoice);\n    return null;\n  }\n}\n\n/**\n * Normalize array of invoices\n * @param rawInvoices - Array of raw invoice data from API\n * @param source - Source identifier for debugging\n * @returns Array of normalized Invoice objects\n */\nexport function normalizeInvoices(rawInvoices: any[], source = 'list'): Invoice[] {\n  if (!Array.isArray(rawInvoices)) {\n    console.error(`Γ¥î [Invoice Normalizer] Expected array, got ${typeof rawInvoices}`);\n    return [];\n  }\n\n  return rawInvoices\n    .map((invoice, index) => normalizeInvoice(invoice, `${source}[${index}]`))\n    .filter((invoice): invoice is Invoice => invoice !== null);\n}\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\utils\\invoicePagination.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\utils\\invoiceStatus.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\utils\\invoiceTypes.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\utils\\invoiceUtils.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\utils\\paymentNormalizer.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":13,"column":46,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":13,"endColumn":49,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[462,465],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[462,465],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":13,"column":72,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":13,"endColumn":75,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[488,491],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[488,491],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":23,"column":33,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":23,"endColumn":36,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[782,785],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[782,785],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":23,"column":48,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":23,"endColumn":51,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[797,800],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[797,800],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":30,"column":31,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":30,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1067,1070],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1067,1070],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":50,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":50,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1620,1623],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1620,1623],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":106,"column":48,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":106,"endColumn":51,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4139,4142],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4139,4142],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":106,"column":73,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":106,"endColumn":76,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4164,4167],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4164,4167],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":114,"column":35,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":114,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4450,4453],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4450,4453],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":9,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Frontend Payment Data Normalizer\n * CRITICAL: Converts snake_case API fields to camelCase frontend schema\n * FAIL-SAFE: Validates and normalizes payment data from API\n */\n\n/**\n * Convert snake_case API response to camelCase Payment object\n * @param rawPayment - Raw payment data from API (snake_case)\n * @param source - Source of the data for debugging\n * @returns Normalized Payment with camelCase fields\n */\nexport function normalizePayment(rawPayment: any, source = 'unknown'): any | null {\n  if (!rawPayment || typeof rawPayment !== 'object') {\n    console.error(`Γ¥î [Payment Normalizer] Invalid payment data from ${source}:`, rawPayment);\n    return null;\n  }\n\n  const errors: string[] = [];\n\n  try {\n    // Helper to safely parse numbers\n    const parseNumber = (value: any, fallback: any = undefined): number | undefined => {\n      if (value === null || value === undefined) return fallback;\n      const parsed = parseFloat(value);\n      return isNaN(parsed) ? fallback : parsed;\n    };\n\n    // Helper to safely parse dates\n    const parseDate = (value: any): string | undefined => {\n      if (!value) return undefined;\n      \n      // Handle Timestamp objects from Firestore/backend\n      if (value?.seconds) {\n        return new Date(parseInt(value.seconds) * 1000).toISOString();\n      }\n      \n      // Handle string dates\n      if (typeof value === 'string') {\n        const parsed = new Date(value);\n        if (!isNaN(parsed.getTime())) {\n          return parsed.toISOString();\n        }\n      }\n      \n      return undefined;\n    };\n\n    // Build the normalized Payment object\n    const normalized: any = {\n      // Core identifiers\n      id: rawPayment.id || 0,\n      invoiceNumber: rawPayment.invoiceNumber || rawPayment.invoice_number || undefined,\n      \n      // Payment details\n      amount: parseNumber(rawPayment.amount, 0),\n      paymentDate: parseDate(rawPayment.paymentDate || rawPayment.payment_date),\n      date: parseDate(rawPayment.date || rawPayment.paymentDate || rawPayment.payment_date),\n      \n      // Payment method/mode\n      paymentMethod: rawPayment.paymentMethod || rawPayment.payment_method || undefined,\n      paymentMode: rawPayment.paymentMode || rawPayment.payment_mode || undefined,\n      method: rawPayment.method || rawPayment.paymentMethod || rawPayment.payment_method || undefined,\n      \n      // Reference tracking\n      referenceNumber: rawPayment.referenceNumber || rawPayment.reference_number || undefined,\n      reference: rawPayment.reference || rawPayment.referenceNumber || rawPayment.reference_number || undefined,\n      receiptNumber: rawPayment.receiptNumber || rawPayment.receipt_number || undefined,\n      receiptGenerated: Boolean(rawPayment.receipt_generated || rawPayment.receiptGenerated),\n      \n      // Notes & metadata\n      notes: rawPayment.notes || undefined,\n      createdAt: parseDate(rawPayment.createdAt || rawPayment.created_at),\n      updatedAt: parseDate(rawPayment.updatedAt || rawPayment.updated_at),\n      createdBy: rawPayment.created_by || rawPayment.createdBy || undefined,\n      updatedBy: rawPayment.updated_by || rawPayment.updatedBy || undefined,\n      \n      // Void tracking (4 fields)\n      voided: Boolean(rawPayment.voided),\n      voidedAt: parseDate(rawPayment.voidedAt || rawPayment.voided_at),\n      voidedBy: rawPayment.voided_by || rawPayment.voidedBy || undefined,\n      voidReason: rawPayment.void_reason || rawPayment.voidReason || undefined,\n    };\n\n    // Log validation errors if any\n    if (errors.length > 0) {\n      console.warn(`ΓÜá∩╕Å [Payment Normalizer] Validation warnings from ${source}:`);\n      errors.forEach(error => console.warn(`   - ${error}`));\n    }\n\n    return normalized;\n    \n  } catch (error) {\n    console.error(`Γ¥î [Payment Normalizer] Failed to normalize payment from ${source}:`, error);\n    console.error('   Raw data:', rawPayment);\n    return null;\n  }\n}\n\n/**\n * Normalize array of payments\n * @param rawPayments - Array of raw payment data from API\n * @param source - Source identifier for debugging\n * @returns Array of normalized Payment objects\n */\nexport function normalizePayments(rawPayments: any[], source = 'list'): any[] {\n  if (!Array.isArray(rawPayments)) {\n    console.error(`Γ¥î [Payment Normalizer] Expected array, got ${typeof rawPayments}`);\n    return [];\n  }\n\n  return rawPayments\n    .map((payment, index) => normalizePayment(payment, `${source}[${index}]`))\n    .filter((payment): payment is any => payment !== null);\n}\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\utils\\paymentReceiptGenerator.js","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'formatDate' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":26,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":36},{"ruleId":"no-unused-vars","severity":1,"message":"'getPaymentModeConfig' is defined but never used. Allowed unused vars must match /^_/u.","line":4,"column":32,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":52}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// jsPDF is loaded dynamically to enable proper code splitting\r\n// This avoids the Vite warning about mixed static/dynamic imports\r\nimport { formatCurrency, formatDate, normalizeLLC, titleCase, formatDateDMY } from './invoiceUtils';\r\nimport { formatPaymentDisplay, getPaymentModeConfig } from './paymentUtils';\r\nimport { generateReceiptHTML } from './receiptTemplateGenerator';\r\n\r\n/**\r\n * Lazy load jsPDF to reduce initial bundle size\r\n * PDF generation is not needed on page load\r\n */\r\nconst getJsPDF = async () => {\r\n  const { jsPDF } = await import('jspdf');\r\n  return jsPDF;\r\n};\r\n\r\n/**\r\n * Generates or retrieves receipt number for a payment\r\n * Format: RCP-YYYY-NNNN (Year + Sequential Number)\r\n * Best Practice: Globally unique across entire system\r\n *\r\n * @param {Object} payment - Payment object that may contain receipt_number\r\n * @param {number} paymentIndex - Index for fallback generation (1-based)\r\n * @returns {string} Receipt number in format RCP-YYYY-NNNN\r\n */\r\nexport const generateReceiptNumber = (payment, paymentIndex = 1) => {\r\n  // Priority 1: Use existing receipt number from database (check both camelCase and snake_case)\r\n  if (payment && (payment.receiptNumber || payment.receipt_number)) {\r\n    return payment.receiptNumber || payment.receipt_number;\r\n  }\r\n\r\n  // Priority 2: Generate fallback with current year + index\r\n  // This should rarely be used - backend should always generate receipt numbers\r\n  const year = new Date().getFullYear();\r\n  const paddedIndex = String(paymentIndex).padStart(4, '0');\r\n  return `RCP-${year}-${paddedIndex}`;\r\n};\r\n\r\n/**\r\n * Generate FTA-Compliant Receipt HTML\r\n * Uses new receiptTemplateGenerator for VAT compliance\r\n * \r\n * @param {Object} payment - Payment record with all receipt details\r\n * @param {Object} invoice - Invoice being paid\r\n * @param {Object} company - Company details (with TRN)\r\n * @param {Object} customer - Customer details\r\n * @param {number} paymentIndex - Sequential index (1-based)\r\n * @returns {string} FTA-compliant receipt HTML\r\n */\r\nexport const generateFTACompliantReceiptHTML = (payment, invoice, company, customer, paymentIndex = 1) => {\r\n  return generateReceiptHTML(payment, invoice, company, customer, paymentIndex);\r\n};\r\n\r\n/**\r\n * Helper function to add payment history table to PDF\r\n */\r\nconst addPaymentHistoryTable = (pdf, invoice, currentPayment, yPos, margin, pageWidth) => {\r\n  const allPayments = (invoice.payments || []).filter(p => !p.voided).sort((a, b) => {\r\n    const dateA = new Date(a.paymentDate || a.payment_date || 0);\r\n    const dateB = new Date(b.paymentDate || b.payment_date || 0);\r\n    \r\n    // Primary sort: by date (newest first)\r\n    if (dateB.getTime() !== dateA.getTime()) {\r\n      return dateB - dateA;\r\n    }\r\n    \r\n    // Secondary sort: by ID descending (most recent payment first when dates are the same)\r\n    const idA = a.id || a.paymentId || a.payment_id || 0;\r\n    const idB = b.id || b.paymentId || b.payment_id || 0;\r\n    return idB - idA;\r\n  });\r\n\r\n  if (allPayments.length === 0) {\r\n    return yPos;\r\n  }\r\n\r\n  pdf.setFontSize(11);\r\n  pdf.setFont('helvetica', 'bold');\r\n  pdf.text('Complete Payment History', margin, yPos);\r\n  yPos += 8;\r\n\r\n  // Table headers\r\n  pdf.setFontSize(9);\r\n  pdf.setFont('helvetica', 'bold');\r\n\r\n  // Adjusted column positions for better spacing\r\n  // Receipt No (30mm) | Date (25mm) | Method (28mm) | Ref No (40mm) | Amount (remaining)\r\n  const colX = {\r\n    receiptNo: margin,\r\n    date: margin + 28,\r\n    method: margin + 55,\r\n    refNo: margin + 85,\r\n    amount: pageWidth - margin - 32,  // Increased space from right edge\r\n  };\r\n\r\n  pdf.text('Receipt No', colX.receiptNo, yPos);\r\n  pdf.text('Date', colX.date, yPos);\r\n  pdf.text('Method', colX.method, yPos);\r\n  pdf.text('Ref No', colX.refNo, yPos);\r\n  pdf.text('Amount', colX.amount, yPos, { align: 'right' });\r\n  yPos += 5;\r\n\r\n  // Header underline\r\n  pdf.setLineWidth(0.3);\r\n  pdf.line(margin, yPos, pageWidth - margin, yPos);\r\n  yPos += 5;\r\n\r\n  // Table rows\r\n  pdf.setFont('helvetica', 'normal');\r\n  allPayments.forEach((pmt, idx) => {\r\n    // Use the receipt number from the payment object (from database)\r\n    const receiptNum = generateReceiptNumber(pmt, idx + 1);\r\n    const isCurrentPayment = pmt.id === currentPayment.id;\r\n\r\n    // Highlight current payment\r\n    if (isCurrentPayment) {\r\n      pdf.setFillColor(240, 240, 240);\r\n      pdf.rect(margin - 2, yPos - 4, pageWidth - 2 * margin + 4, 6, 'F');\r\n      pdf.setFont('helvetica', 'bold');\r\n    }\r\n\r\n    pdf.text(receiptNum, colX.receiptNo, yPos);\r\n\r\n    // Format date properly - handle different date formats\r\n    let dateStr = 'N/A';\r\n    try {\r\n      if (pmt.paymentDate) {\r\n        dateStr = formatDateDMY(pmt.paymentDate);\r\n      }\r\n    } catch (e) {\r\n      console.error('Date formatting error:', e);\r\n      dateStr = 'Invalid';\r\n    }\r\n    pdf.text(dateStr, colX.date, yPos);\r\n\r\n    const pmtFormatted = formatPaymentDisplay(pmt);\r\n    const methodText = pmtFormatted.modeLabel.length > 10 ? `${pmtFormatted.modeLabel.substring(0, 8)  }..` : pmtFormatted.modeLabel;\r\n    pdf.text(methodText, colX.method, yPos);\r\n\r\n    // Allow more space for reference numbers (up to 20 characters)\r\n    const refText = (pmt.referenceNumber || '-').substring(0, 20);\r\n    pdf.text(refText, colX.refNo, yPos);\r\n    pdf.text(formatCurrency(pmt.amount), colX.amount, yPos, { align: 'right' });\r\n\r\n    if (isCurrentPayment) {\r\n      pdf.setFont('helvetica', 'normal');\r\n    }\r\n\r\n    yPos += 6;\r\n  });\r\n\r\n  // Bottom line\r\n  pdf.setLineWidth(0.3);\r\n  pdf.line(margin, yPos, pageWidth - margin, yPos);\r\n  yPos += 3;\r\n\r\n  // Note about highlighted row\r\n  pdf.setFontSize(8);\r\n  pdf.setFont('helvetica', 'italic');\r\n  pdf.text('(Highlighted row indicates this receipt\\'s payment)', margin, yPos);\r\n  yPos += 10;\r\n\r\n  return yPos;\r\n};\r\n\r\n/**\r\n * Helper function to add status badge\r\n */\r\nconst addStatusBadge = (pdf, balanceDue, yPos, margin, pageWidth) => {\r\n  pdf.setFontSize(12);\r\n  pdf.setFont('helvetica', 'bold');\r\n\r\n  if (balanceDue <= 0) {\r\n    // FULLY PAID badge\r\n    pdf.setDrawColor(34, 197, 94); // green border\r\n    pdf.setLineWidth(1);\r\n    pdf.rect(pageWidth - margin - 50, yPos - 6, 50, 10);\r\n    pdf.setTextColor(34, 197, 94); // green text\r\n    pdf.text('FULLY PAID', pageWidth - margin - 25, yPos, { align: 'center' });\r\n    pdf.setTextColor(0, 0, 0); // reset to black\r\n  } else {\r\n    // OUTSTANDING badge\r\n    pdf.setDrawColor(239, 68, 68); // red border\r\n    pdf.setLineWidth(1);\r\n    pdf.rect(pageWidth - margin - 60, yPos - 6, 60, 10);\r\n    pdf.setTextColor(239, 68, 68); // red text\r\n    pdf.text('OUTSTANDING', pageWidth - margin - 30, yPos, { align: 'center' });\r\n    pdf.setTextColor(0, 0, 0); // reset to black\r\n  }\r\n\r\n  return yPos + 10;\r\n};\r\n\r\n/**\r\n * Generates a PDF payment receipt for a single payment\r\n * Professional monochrome design following industry best practices\r\n * @param {Object} payment - The payment object\r\n * @param {Object} invoice - The invoice object\r\n * @param {Object} company - The company details\r\n * @param {number} paymentIndex - The index of this payment (for receipt numbering)\r\n */\r\nexport const generatePaymentReceipt = async (payment, invoice, company, paymentIndex = 1) => {\r\n  try {\r\n    // Lazy load jsPDF for code splitting\r\n    const jsPDF = await getJsPDF();\r\n    // A4 size: 210mm x 297mm (standard)\r\n    const pdf = new jsPDF('p', 'mm', 'a4');\r\n    const pageWidth = pdf.internal.pageSize.getWidth();\r\n    const pageHeight = pdf.internal.pageSize.getHeight();\r\n\r\n    const margin = 20;\r\n    let yPos = margin;\r\n\r\n    // Standard font settings - black text only\r\n    pdf.setTextColor(0, 0, 0);\r\n    pdf.setFont('helvetica', 'normal');\r\n\r\n    // ========== HEADER SECTION ==========\r\n    // Receipt Title\r\n    pdf.setFontSize(20);\r\n    pdf.setFont('helvetica', 'bold');\r\n    pdf.text('PAYMENT RECEIPT', pageWidth / 2, yPos, { align: 'center' });\r\n    yPos += 10;\r\n\r\n    // Receipt Number and Date - use payment object for proper receipt number from database\r\n    const receiptNumber = generateReceiptNumber(payment, paymentIndex);\r\n    pdf.setFontSize(10);\r\n    pdf.setFont('helvetica', 'normal');\r\n    const receiptDate = new Date();\r\n    pdf.text(`Receipt No: ${receiptNumber}`, pageWidth / 2, yPos, { align: 'center' });\r\n    yPos += 5;\r\n    pdf.text(`Date: ${formatDateDMY(receiptDate.toISOString().split('T')[0])}`, pageWidth / 2, yPos, { align: 'center' });\r\n    yPos += 12;\r\n\r\n    // Top separator line\r\n    pdf.setDrawColor(0, 0, 0);\r\n    pdf.setLineWidth(0.5);\r\n    pdf.line(margin, yPos, pageWidth - margin, yPos);\r\n    yPos += 10;\r\n\r\n    // ========== FROM SECTION (Company Details) ==========\r\n    pdf.setFontSize(11);\r\n    pdf.setFont('helvetica', 'bold');\r\n    pdf.text('From:', margin, yPos);\r\n    yPos += 6;\r\n\r\n    pdf.setFontSize(10);\r\n    pdf.setFont('helvetica', 'bold');\r\n    pdf.text(normalizeLLC(company?.name || 'Ultimate Steels Building Materials Trading'), margin, yPos);\r\n    yPos += 5;\r\n\r\n    pdf.setFont('helvetica', 'normal');\r\n    if (company.address?.street) {\r\n      pdf.text(company.address.street, margin, yPos);\r\n      yPos += 5;\r\n    }\r\n    if (company.address?.city && company.address?.country) {\r\n      pdf.text(`${company.address.city}, ${company.address.country}`, margin, yPos);\r\n      yPos += 5;\r\n    }\r\n    if (company.phone) {\r\n      pdf.text(`Phone: ${company.phone}`, margin, yPos);\r\n      yPos += 5;\r\n    }\r\n    if (company.email) {\r\n      pdf.text(`Email: ${company.email}`, margin, yPos);\r\n      yPos += 5;\r\n    }\r\n    if (company.vatNumber) {\r\n      pdf.text(`TRN: ${company.vatNumber}`, margin, yPos);\r\n      yPos += 5;\r\n    }\r\n    yPos += 8;\r\n\r\n    // Separator line\r\n    pdf.setLineWidth(0.3);\r\n    pdf.line(margin, yPos, pageWidth - margin, yPos);\r\n    yPos += 10;\r\n\r\n    // ========== RECEIVED FROM SECTION (Customer Details) ==========\r\n    pdf.setFontSize(11);\r\n    pdf.setFont('helvetica', 'bold');\r\n    pdf.text('Received From:', margin, yPos);\r\n    yPos += 6;\r\n\r\n    pdf.setFontSize(10);\r\n    pdf.setFont('helvetica', 'normal');\r\n    pdf.text(titleCase(normalizeLLC(invoice.customer.name)), margin, yPos);\r\n    yPos += 5;\r\n\r\n    if (invoice.customer.address?.street) {\r\n      pdf.text(invoice.customer.address.street, margin, yPos);\r\n      yPos += 5;\r\n    }\r\n    if (invoice.customer.address?.city && invoice.customer.address?.country) {\r\n      pdf.text(`${invoice.customer.address.city}, ${invoice.customer.address.country}`, margin, yPos);\r\n      yPos += 5;\r\n    }\r\n    if (invoice.customer.phone) {\r\n      pdf.text(`Phone: ${invoice.customer.phone}`, margin, yPos);\r\n      yPos += 5;\r\n    }\r\n    if (invoice.customer.email) {\r\n      pdf.text(`Email: ${invoice.customer.email}`, margin, yPos);\r\n      yPos += 5;\r\n    }\r\n    if (invoice.customer.vatNumber) {\r\n      pdf.text(`TRN: ${invoice.customer.vatNumber}`, margin, yPos);\r\n      yPos += 5;\r\n    }\r\n    yPos += 8;\r\n\r\n    // Separator line\r\n    pdf.line(margin, yPos, pageWidth - margin, yPos);\r\n    yPos += 12;\r\n\r\n    // ========== CURRENT PAYMENT DETAILS SECTION ==========\r\n    pdf.setFontSize(11);\r\n    pdf.setFont('helvetica', 'bold');\r\n    pdf.text('Current Payment Received', margin, yPos);\r\n    yPos += 8;\r\n\r\n    // Format payment data\r\n    const formatted = formatPaymentDisplay(payment);\r\n    pdf.setFontSize(10);\r\n    pdf.setFont('helvetica', 'normal');\r\n\r\n    // Two-column layout for payment details\r\n    const labelWidth = 40;\r\n    const col1X = margin;\r\n    const col2X = pageWidth / 2 + 10;\r\n\r\n    // Left column\r\n    let leftY = yPos;\r\n\r\n    // Invoice Reference\r\n    pdf.setFont('helvetica', 'bold');\r\n    pdf.text('Invoice No:', col1X, leftY);\r\n    pdf.setFont('helvetica', 'normal');\r\n    pdf.text(invoice.invoiceNumber, col1X + labelWidth, leftY);\r\n    leftY += 6;\r\n\r\n    // Payment Date\r\n    pdf.setFont('helvetica', 'bold');\r\n    pdf.text('Payment Date:', col1X, leftY);\r\n    pdf.setFont('helvetica', 'normal');\r\n    pdf.text(formatted.formattedDate, col1X + labelWidth, leftY);\r\n    leftY += 6;\r\n\r\n    // Payment Method\r\n    pdf.setFont('helvetica', 'bold');\r\n    pdf.text('Payment Method:', col1X, leftY);\r\n    pdf.setFont('helvetica', 'normal');\r\n    pdf.text(formatted.modeLabel, col1X + labelWidth, leftY);\r\n    leftY += 6;\r\n\r\n    // Reference Number (if available)\r\n    if (payment.referenceNumber) {\r\n      pdf.setFont('helvetica', 'bold');\r\n      pdf.text('Reference No:', col1X, leftY);\r\n      pdf.setFont('helvetica', 'normal');\r\n      pdf.text(payment.referenceNumber, col1X + labelWidth, leftY);\r\n      leftY += 6;\r\n    }\r\n\r\n    // Right column - Amount Received (prominent)\r\n    let rightY = yPos;\r\n    pdf.setFont('helvetica', 'bold');\r\n    pdf.text('Amount Received:', col2X, rightY);\r\n    rightY += 6;\r\n\r\n    pdf.setFontSize(14);\r\n    pdf.setFont('helvetica', 'bold');\r\n    pdf.text(formatted.formattedAmount, col2X, rightY);\r\n    pdf.setFontSize(10);\r\n    pdf.setFont('helvetica', 'normal');\r\n\r\n    yPos = Math.max(leftY, rightY) + 10;\r\n\r\n    // Notes section (if any)\r\n    if (payment.notes) {\r\n      pdf.setFont('helvetica', 'bold');\r\n      pdf.text('Notes:', margin, yPos);\r\n      yPos += 6;\r\n\r\n      pdf.setFont('helvetica', 'normal');\r\n      const noteLines = pdf.splitTextToSize(payment.notes, pageWidth - 2 * margin);\r\n      pdf.text(noteLines, margin, yPos);\r\n      yPos += noteLines.length * 5 + 8;\r\n    } else {\r\n      yPos += 5;\r\n    }\r\n\r\n    // Separator line\r\n    pdf.setLineWidth(0.3);\r\n    pdf.line(margin, yPos, pageWidth - margin, yPos);\r\n    yPos += 12;\r\n\r\n    // ========== PAYMENT HISTORY TABLE ==========\r\n    yPos = addPaymentHistoryTable(pdf, invoice, payment, yPos, margin, pageWidth);\r\n    yPos += 5;\r\n\r\n    // Separator line\r\n    pdf.setLineWidth(0.3);\r\n    pdf.line(margin, yPos, pageWidth - margin, yPos);\r\n    yPos += 12;\r\n\r\n    // ========== INVOICE SUMMARY ==========\r\n    pdf.setFontSize(11);\r\n    pdf.setFont('helvetica', 'bold');\r\n    pdf.text('Invoice Summary', margin, yPos);\r\n    yPos += 8;\r\n\r\n    // Calculate totals\r\n    const invoiceTotal = invoice.total || 0;\r\n    const totalPaid = (invoice.payments || []).filter(p => !p.voided).reduce((sum, p) => sum + (parseFloat(p.amount) || 0), 0);\r\n    const balanceDue = Math.max(0, invoiceTotal - totalPaid);\r\n\r\n    pdf.setFontSize(10);\r\n    pdf.setFont('helvetica', 'normal');\r\n\r\n    // Three-column summary\r\n    const summaryLabelWidth = 35;\r\n\r\n    // Invoice Total\r\n    pdf.setFont('helvetica', 'bold');\r\n    pdf.text('Invoice Total:', margin, yPos);\r\n    pdf.setFont('helvetica', 'normal');\r\n    pdf.text(formatCurrency(invoiceTotal), margin + summaryLabelWidth, yPos);\r\n    yPos += 6;\r\n\r\n    // Total Paid\r\n    pdf.setFont('helvetica', 'bold');\r\n    pdf.text('Total Paid:', margin, yPos);\r\n    pdf.setFont('helvetica', 'normal');\r\n    pdf.text(formatCurrency(totalPaid), margin + summaryLabelWidth, yPos);\r\n    yPos += 6;\r\n\r\n    // Balance Due\r\n    pdf.setFont('helvetica', 'bold');\r\n    pdf.text('Balance Due:', margin, yPos);\r\n    pdf.setFont('helvetica', 'normal');\r\n    pdf.text(formatCurrency(balanceDue), margin + summaryLabelWidth, yPos);\r\n\r\n    // Add status badge on the right\r\n    yPos = addStatusBadge(pdf, balanceDue, yPos, margin, pageWidth);\r\n    yPos += 10;\r\n\r\n    // ========== FOOTER SECTION ==========\r\n    // Ensure we have enough space for footer (need at least 50mm from bottom)\r\n    const footerStartY = pageHeight - 55;\r\n    yPos = Math.max(yPos, footerStartY);\r\n\r\n    // Thank you message\r\n    pdf.setFontSize(10);\r\n    pdf.setFont('helvetica', 'italic');\r\n    pdf.text('Thank you for your payment!', pageWidth / 2, yPos, { align: 'center' });\r\n    yPos += 15;\r\n\r\n    // Signature section\r\n    pdf.setFont('helvetica', 'normal');\r\n    pdf.setFontSize(9);\r\n\r\n    const sigLineLength = 50;\r\n    const sigLineX = pageWidth - margin - sigLineLength;\r\n\r\n    // Signature line\r\n    pdf.setLineWidth(0.3);\r\n    pdf.line(sigLineX, yPos, sigLineX + sigLineLength, yPos);\r\n    yPos += 5;\r\n\r\n    pdf.text('Authorized Signatory', sigLineX + (sigLineLength / 2), yPos, { align: 'center' });\r\n    yPos += 4;\r\n    pdf.setFont('helvetica', 'bold');\r\n    pdf.text(normalizeLLC(company?.name || 'ULTIMATE STEELS'), sigLineX + (sigLineLength / 2), yPos, { align: 'center' });\r\n    yPos += 10;\r\n\r\n    // Bottom disclaimer - positioned relative to signature, not absolute\r\n    pdf.setFont('helvetica', 'normal');\r\n    pdf.setFontSize(8);\r\n\r\n    // Split long text into multiple lines if needed\r\n    const disclaimerText = 'This is a computer-generated receipt and does not require a physical signature.';\r\n    const maxWidth = pageWidth - 2 * margin;\r\n    const disclaimerLines = pdf.splitTextToSize(disclaimerText, maxWidth);\r\n    pdf.text(disclaimerLines, pageWidth / 2, yPos, { align: 'center' });\r\n\r\n    // Save the PDF\r\n    const fileName = `Payment_Receipt_${receiptNumber}.pdf`;\r\n    pdf.save(fileName);\r\n\r\n    return { success: true, fileName, receiptNumber };\r\n  } catch (error) {\r\n    console.error('Error generating payment receipt:', error);\r\n    return { success: false, error: error.message };\r\n  }\r\n};\r\n\r\n/**\r\n * Prints a payment receipt (opens PDF in browser print dialog)\r\n * Professional monochrome design following industry best practices\r\n * @param {Object} payment - The payment object\r\n * @param {Object} invoice - The invoice object\r\n * @param {Object} company - The company details\r\n * @param {number} paymentIndex - The index of this payment (for receipt numbering)\r\n */\r\nexport const printPaymentReceipt = async (payment, invoice, company, paymentIndex = 1) => {\r\n  try {\r\n    // Lazy load jsPDF for code splitting\r\n    const jsPDF = await getJsPDF();\r\n    // A4 size: 210mm x 297mm (standard)\r\n    const pdf = new jsPDF('p', 'mm', 'a4');\r\n    const pageWidth = pdf.internal.pageSize.getWidth();\r\n    const pageHeight = pdf.internal.pageSize.getHeight();\r\n\r\n    const margin = 20;\r\n    let yPos = margin;\r\n\r\n    // Standard font settings - black text only\r\n    pdf.setTextColor(0, 0, 0);\r\n    pdf.setFont('helvetica', 'normal');\r\n\r\n    // ========== HEADER SECTION ==========\r\n    // Receipt Title\r\n    pdf.setFontSize(20);\r\n    pdf.setFont('helvetica', 'bold');\r\n    pdf.text('PAYMENT RECEIPT', pageWidth / 2, yPos, { align: 'center' });\r\n    yPos += 10;\r\n\r\n    // Receipt Number and Date - use payment object for proper receipt number from database\r\n    const receiptNumber = generateReceiptNumber(payment, paymentIndex);\r\n    pdf.setFontSize(10);\r\n    pdf.setFont('helvetica', 'normal');\r\n    const receiptDate = new Date();\r\n    pdf.text(`Receipt No: ${receiptNumber}`, pageWidth / 2, yPos, { align: 'center' });\r\n    yPos += 5;\r\n    pdf.text(`Date: ${formatDateDMY(receiptDate.toISOString().split('T')[0])}`, pageWidth / 2, yPos, { align: 'center' });\r\n    yPos += 12;\r\n\r\n    // Top separator line\r\n    pdf.setDrawColor(0, 0, 0);\r\n    pdf.setLineWidth(0.5);\r\n    pdf.line(margin, yPos, pageWidth - margin, yPos);\r\n    yPos += 10;\r\n\r\n    // ========== FROM SECTION (Company Details) ==========\r\n    pdf.setFontSize(11);\r\n    pdf.setFont('helvetica', 'bold');\r\n    pdf.text('From:', margin, yPos);\r\n    yPos += 6;\r\n\r\n    pdf.setFontSize(10);\r\n    pdf.setFont('helvetica', 'bold');\r\n    pdf.text(normalizeLLC(company?.name || 'Ultimate Steels Building Materials Trading'), margin, yPos);\r\n    yPos += 5;\r\n\r\n    pdf.setFont('helvetica', 'normal');\r\n    if (company.address?.street) {\r\n      pdf.text(company.address.street, margin, yPos);\r\n      yPos += 5;\r\n    }\r\n    if (company.address?.city && company.address?.country) {\r\n      pdf.text(`${company.address.city}, ${company.address.country}`, margin, yPos);\r\n      yPos += 5;\r\n    }\r\n    if (company.phone) {\r\n      pdf.text(`Phone: ${company.phone}`, margin, yPos);\r\n      yPos += 5;\r\n    }\r\n    if (company.email) {\r\n      pdf.text(`Email: ${company.email}`, margin, yPos);\r\n      yPos += 5;\r\n    }\r\n    if (company.vatNumber) {\r\n      pdf.text(`TRN: ${company.vatNumber}`, margin, yPos);\r\n      yPos += 5;\r\n    }\r\n    yPos += 8;\r\n\r\n    // Separator line\r\n    pdf.setLineWidth(0.3);\r\n    pdf.line(margin, yPos, pageWidth - margin, yPos);\r\n    yPos += 10;\r\n\r\n    // ========== RECEIVED FROM SECTION (Customer Details) ==========\r\n    pdf.setFontSize(11);\r\n    pdf.setFont('helvetica', 'bold');\r\n    pdf.text('Received From:', margin, yPos);\r\n    yPos += 6;\r\n\r\n    pdf.setFontSize(10);\r\n    pdf.setFont('helvetica', 'normal');\r\n    pdf.text(titleCase(normalizeLLC(invoice.customer.name)), margin, yPos);\r\n    yPos += 5;\r\n\r\n    if (invoice.customer.address?.street) {\r\n      pdf.text(invoice.customer.address.street, margin, yPos);\r\n      yPos += 5;\r\n    }\r\n    if (invoice.customer.address?.city && invoice.customer.address?.country) {\r\n      pdf.text(`${invoice.customer.address.city}, ${invoice.customer.address.country}`, margin, yPos);\r\n      yPos += 5;\r\n    }\r\n    if (invoice.customer.phone) {\r\n      pdf.text(`Phone: ${invoice.customer.phone}`, margin, yPos);\r\n      yPos += 5;\r\n    }\r\n    if (invoice.customer.email) {\r\n      pdf.text(`Email: ${invoice.customer.email}`, margin, yPos);\r\n      yPos += 5;\r\n    }\r\n    if (invoice.customer.vatNumber) {\r\n      pdf.text(`TRN: ${invoice.customer.vatNumber}`, margin, yPos);\r\n      yPos += 5;\r\n    }\r\n    yPos += 8;\r\n\r\n    // Separator line\r\n    pdf.line(margin, yPos, pageWidth - margin, yPos);\r\n    yPos += 12;\r\n\r\n    // ========== CURRENT PAYMENT DETAILS SECTION ==========\r\n    pdf.setFontSize(11);\r\n    pdf.setFont('helvetica', 'bold');\r\n    pdf.text('Current Payment Received', margin, yPos);\r\n    yPos += 8;\r\n\r\n    // Format payment data\r\n    const formatted = formatPaymentDisplay(payment);\r\n    pdf.setFontSize(10);\r\n    pdf.setFont('helvetica', 'normal');\r\n\r\n    // Two-column layout for payment details\r\n    const labelWidth = 40;\r\n    const col1X = margin;\r\n    const col2X = pageWidth / 2 + 10;\r\n\r\n    // Left column\r\n    let leftY = yPos;\r\n\r\n    // Invoice Reference\r\n    pdf.setFont('helvetica', 'bold');\r\n    pdf.text('Invoice No:', col1X, leftY);\r\n    pdf.setFont('helvetica', 'normal');\r\n    pdf.text(invoice.invoiceNumber, col1X + labelWidth, leftY);\r\n    leftY += 6;\r\n\r\n    // Payment Date\r\n    pdf.setFont('helvetica', 'bold');\r\n    pdf.text('Payment Date:', col1X, leftY);\r\n    pdf.setFont('helvetica', 'normal');\r\n    pdf.text(formatted.formattedDate, col1X + labelWidth, leftY);\r\n    leftY += 6;\r\n\r\n    // Payment Method\r\n    pdf.setFont('helvetica', 'bold');\r\n    pdf.text('Payment Method:', col1X, leftY);\r\n    pdf.setFont('helvetica', 'normal');\r\n    pdf.text(formatted.modeLabel, col1X + labelWidth, leftY);\r\n    leftY += 6;\r\n\r\n    // Reference Number (if available)\r\n    if (payment.referenceNumber) {\r\n      pdf.setFont('helvetica', 'bold');\r\n      pdf.text('Reference No:', col1X, leftY);\r\n      pdf.setFont('helvetica', 'normal');\r\n      pdf.text(payment.referenceNumber, col1X + labelWidth, leftY);\r\n      leftY += 6;\r\n    }\r\n\r\n    // Right column - Amount Received (prominent)\r\n    let rightY = yPos;\r\n    pdf.setFont('helvetica', 'bold');\r\n    pdf.text('Amount Received:', col2X, rightY);\r\n    rightY += 6;\r\n\r\n    pdf.setFontSize(14);\r\n    pdf.setFont('helvetica', 'bold');\r\n    pdf.text(formatted.formattedAmount, col2X, rightY);\r\n    pdf.setFontSize(10);\r\n    pdf.setFont('helvetica', 'normal');\r\n\r\n    yPos = Math.max(leftY, rightY) + 10;\r\n\r\n    // Notes section (if any)\r\n    if (payment.notes) {\r\n      pdf.setFont('helvetica', 'bold');\r\n      pdf.text('Notes:', margin, yPos);\r\n      yPos += 6;\r\n\r\n      pdf.setFont('helvetica', 'normal');\r\n      const noteLines = pdf.splitTextToSize(payment.notes, pageWidth - 2 * margin);\r\n      pdf.text(noteLines, margin, yPos);\r\n      yPos += noteLines.length * 5 + 8;\r\n    } else {\r\n      yPos += 5;\r\n    }\r\n\r\n    // Separator line\r\n    pdf.setLineWidth(0.3);\r\n    pdf.line(margin, yPos, pageWidth - margin, yPos);\r\n    yPos += 12;\r\n\r\n    // ========== PAYMENT HISTORY TABLE ==========\r\n    yPos = addPaymentHistoryTable(pdf, invoice, payment, yPos, margin, pageWidth);\r\n    yPos += 5;\r\n\r\n    // Separator line\r\n    pdf.setLineWidth(0.3);\r\n    pdf.line(margin, yPos, pageWidth - margin, yPos);\r\n    yPos += 12;\r\n\r\n    // ========== INVOICE SUMMARY ==========\r\n    pdf.setFontSize(11);\r\n    pdf.setFont('helvetica', 'bold');\r\n    pdf.text('Invoice Summary', margin, yPos);\r\n    yPos += 8;\r\n\r\n    // Calculate totals\r\n    const invoiceTotal = invoice.total || 0;\r\n    const totalPaid = (invoice.payments || []).filter(p => !p.voided).reduce((sum, p) => sum + (parseFloat(p.amount) || 0), 0);\r\n    const balanceDue = Math.max(0, invoiceTotal - totalPaid);\r\n\r\n    pdf.setFontSize(10);\r\n    pdf.setFont('helvetica', 'normal');\r\n\r\n    // Three-column summary\r\n    const summaryLabelWidth = 35;\r\n\r\n    // Invoice Total\r\n    pdf.setFont('helvetica', 'bold');\r\n    pdf.text('Invoice Total:', margin, yPos);\r\n    pdf.setFont('helvetica', 'normal');\r\n    pdf.text(formatCurrency(invoiceTotal), margin + summaryLabelWidth, yPos);\r\n    yPos += 6;\r\n\r\n    // Total Paid\r\n    pdf.setFont('helvetica', 'bold');\r\n    pdf.text('Total Paid:', margin, yPos);\r\n    pdf.setFont('helvetica', 'normal');\r\n    pdf.text(formatCurrency(totalPaid), margin + summaryLabelWidth, yPos);\r\n    yPos += 6;\r\n\r\n    // Balance Due\r\n    pdf.setFont('helvetica', 'bold');\r\n    pdf.text('Balance Due:', margin, yPos);\r\n    pdf.setFont('helvetica', 'normal');\r\n    pdf.text(formatCurrency(balanceDue), margin + summaryLabelWidth, yPos);\r\n\r\n    // Add status badge on the right\r\n    yPos = addStatusBadge(pdf, balanceDue, yPos, margin, pageWidth);\r\n    yPos += 10;\r\n\r\n    // ========== FOOTER SECTION ==========\r\n    // Ensure we have enough space for footer (need at least 50mm from bottom)\r\n    const footerStartY = pageHeight - 55;\r\n    yPos = Math.max(yPos, footerStartY);\r\n\r\n    // Thank you message\r\n    pdf.setFontSize(10);\r\n    pdf.setFont('helvetica', 'italic');\r\n    pdf.text('Thank you for your payment!', pageWidth / 2, yPos, { align: 'center' });\r\n    yPos += 15;\r\n\r\n    // Signature section\r\n    pdf.setFont('helvetica', 'normal');\r\n    pdf.setFontSize(9);\r\n\r\n    const sigLineLength = 50;\r\n    const sigLineX = pageWidth - margin - sigLineLength;\r\n\r\n    // Signature line\r\n    pdf.setLineWidth(0.3);\r\n    pdf.line(sigLineX, yPos, sigLineX + sigLineLength, yPos);\r\n    yPos += 5;\r\n\r\n    pdf.text('Authorized Signatory', sigLineX + (sigLineLength / 2), yPos, { align: 'center' });\r\n    yPos += 4;\r\n    pdf.setFont('helvetica', 'bold');\r\n    pdf.text(normalizeLLC(company?.name || 'ULTIMATE STEELS'), sigLineX + (sigLineLength / 2), yPos, { align: 'center' });\r\n    yPos += 10;\r\n\r\n    // Bottom disclaimer - positioned relative to signature, not absolute\r\n    pdf.setFont('helvetica', 'normal');\r\n    pdf.setFontSize(8);\r\n\r\n    // Split long text into multiple lines if needed\r\n    const disclaimerText = 'This is a computer-generated receipt and does not require a physical signature.';\r\n    const maxWidth = pageWidth - 2 * margin;\r\n    const disclaimerLines = pdf.splitTextToSize(disclaimerText, maxWidth);\r\n    pdf.text(disclaimerLines, pageWidth / 2, yPos, { align: 'center' });\r\n\r\n    // Open print dialog instead of saving\r\n    pdf.autoPrint();\r\n    window.open(pdf.output('bloburl'), '_blank');\r\n\r\n    return { success: true, receiptNumber };\r\n  } catch (error) {\r\n    console.error('Error printing payment receipt:', error);\r\n    return { success: false, error: error.message };\r\n  }\r\n};\r\n\r\n/**\r\n * Generates receipts for all payments in an invoice\r\n * @param {Object} invoice - The invoice object with payments\r\n * @param {Object} company - The company details\r\n */\r\nexport const generateAllPaymentReceipts = async (invoice, company) => {\r\n  if (!invoice.payments || invoice.payments.length === 0) {\r\n    return { success: false, error: 'No payments found for this invoice' };\r\n  }\r\n\r\n  const results = [];\r\n  for (let i = 0; i < invoice.payments.length; i++) {\r\n    const payment = invoice.payments[i];\r\n    const result = await generatePaymentReceipt(payment, invoice, company, i + 1);\r\n    results.push(result);\r\n  }\r\n\r\n  return { success: true, results };\r\n};\r\n","usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\utils\\paymentUtils.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\utils\\pdfGenerator.js","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'formatCurrency' is defined but never used. Allowed unused vars must match /^_/u.","line":28,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":28,"endColumn":17},{"ruleId":"no-unused-vars","severity":1,"message":"'formatDate' is defined but never used. Allowed unused vars must match /^_/u.","line":29,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":29,"endColumn":13},{"ruleId":"no-unused-vars","severity":1,"message":"'calculateTotalTRN' is defined but never used. Allowed unused vars must match /^_/u.","line":32,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":32,"endColumn":20},{"ruleId":"no-unused-vars","severity":1,"message":"'formatDateDMY' is defined but never used. Allowed unused vars must match /^_/u.","line":36,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":36,"endColumn":16},{"ruleId":"no-unused-vars","severity":1,"message":"'visibility' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":73,"column":49,"nodeType":"Identifier","messageId":"unusedVar","endLine":73,"endColumn":59},{"ruleId":"no-unused-vars","severity":1,"message":"'table' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":73,"column":61,"nodeType":"Identifier","messageId":"unusedVar","endLine":73,"endColumn":66},{"ruleId":"no-unused-vars","severity":1,"message":"'formatting' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":73,"column":68,"nodeType":"Identifier","messageId":"unusedVar","endLine":73,"endColumn":78},{"ruleId":"no-unused-vars","severity":1,"message":"'labels' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":73,"column":80,"nodeType":"Identifier","messageId":"unusedVar","endLine":73,"endColumn":86},{"ruleId":"no-unused-vars","severity":1,"message":"'setTextLight' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":90,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":90,"endColumn":21},{"ruleId":"no-unused-vars","severity":1,"message":"'setPrimaryColor' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":91,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":91,"endColumn":24},{"ruleId":"no-unused-vars","severity":1,"message":"'tableStartY' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":365,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":365,"endColumn":20},{"ruleId":"no-unused-vars","severity":1,"message":"'invoice' is defined but never used. Allowed unused args must match /^_/u.","line":781,"column":31,"nodeType":"Identifier","messageId":"unusedVar","endLine":781,"endColumn":38},{"ruleId":"no-unused-vars","severity":1,"message":"'company' is defined but never used. Allowed unused args must match /^_/u.","line":781,"column":40,"nodeType":"Identifier","messageId":"unusedVar","endLine":781,"endColumn":47},{"ruleId":"no-unused-vars","severity":1,"message":"'container' is defined but never used. Allowed unused args must match /^_/u.","line":785,"column":24,"nodeType":"Identifier","messageId":"unusedVar","endLine":785,"endColumn":33}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":14,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * @deprecated This frontend PDF generator is DEPRECATED.\r\n *\r\n * MIGRATION NOTICE:\r\n * -----------------\r\n * PDF generation has been unified using React SSR + Puppeteer on the backend.\r\n * This ensures pixel-perfect consistency between preview and PDF download.\r\n *\r\n * For PDF downloads, use the backend API endpoints instead:\r\n * - POST /api/invoices/:id/pdf\r\n * - POST /api/quotations/:id/pdf\r\n * - POST /api/purchase-orders/:id/pdf\r\n * - POST /api/credit-notes/:id/pdf\r\n * - POST /api/delivery-notes/:id/pdf\r\n * - POST /api/payments/:id/receipt-pdf\r\n * - POST /api/customers/:id/statement-pdf\r\n *\r\n * The backend uses React SSR to render the SAME React components used for preview,\r\n * ensuring the PDF matches what users see on screen.\r\n *\r\n * This file is kept for backwards compatibility but will be removed in a future version.\r\n *\r\n * @see steelapprnp/services/pdfService.js\r\n * @see steelapprnp/templates/ssrRenderer.js\r\n */\r\n\r\nimport {\r\n  formatCurrency,\r\n  formatDate,\r\n  calculateTRN,\r\n  calculateSubtotal,\r\n  calculateTotalTRN,\r\n  calculateTotal,\r\n  titleCase,\r\n  formatNumber,\r\n  formatDateDMY,\r\n  calculateDiscountedTRN,\r\n  getCompanyImages,\r\n  toUAEDateProfessional,\r\n  toUAEPaymentDateTime,\r\n  TIMEZONE_DISCLAIMER,\r\n} from './invoiceUtils';\r\nimport { mergeTemplateSettings } from '../constants/defaultTemplateSettings';\r\n\r\n/**\r\n * Convert hex color to RGB array\r\n * @param {string} hex - Hex color (e.g., \"#5B6DB5\")\r\n * @returns {number[]} RGB array [r, g, b]\r\n */\r\nconst hexToRgb = (hex) => {\r\n  const result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\r\n  return result\r\n    ? [\r\n      parseInt(result[1], 16),\r\n      parseInt(result[2], 16),\r\n      parseInt(result[3], 16),\r\n    ]\r\n    : [0, 0, 0];\r\n};\r\n\r\n/**\r\n * @deprecated Use backend API endpoint instead: POST /api/invoices/:id/pdf\r\n */\r\nexport const generateInvoicePDF = async (invoice, company) => {\r\n  const { jsPDF } = await import('jspdf');\r\n  const pdf = new jsPDF('p', 'mm', 'a4');\r\n\r\n  // Get company images from company profile\r\n  const { logoUrl: logoCompany, sealUrl: sealImage } = getCompanyImages(company);\r\n\r\n  // Get template settings (merge company settings with defaults)\r\n  const templateSettings = mergeTemplateSettings(company?.settings?.invoiceTemplate || {});\r\n  const { colors, layout, typography, branding, visibility, table, formatting, labels } = templateSettings;\r\n\r\n  // Page dimensions\r\n  const pageWidth = pdf.internal.pageSize.getWidth();\r\n  const pageHeight = pdf.internal.pageSize.getHeight();\r\n  const margin = layout.marginLeft;\r\n\r\n  // Color scheme from settings\r\n  const primaryColor = hexToRgb(colors.primary);\r\n  const primaryBlue = hexToRgb(colors.primary); // Alias for primaryColor\r\n  const textPrimaryColor = hexToRgb(colors.textPrimary);\r\n  const textSecondaryColor = hexToRgb(colors.textSecondary);\r\n  const textLightColor = hexToRgb(colors.textLight);\r\n\r\n  // Helper functions for colors\r\n  const setTextPrimary = () => pdf.setTextColor(...textPrimaryColor);\r\n  const setTextSecondary = () => pdf.setTextColor(...textSecondaryColor);\r\n  const setTextLight = () => pdf.setTextColor(...textLightColor);\r\n  const setPrimaryColor = () => pdf.setTextColor(...primaryColor);\r\n  const setBlack = () => pdf.setTextColor(0, 0, 0);\r\n  const setDarkGray = () => pdf.setTextColor(80, 80, 80);\r\n\r\n  let currentY = layout.marginTop;\r\n\r\n  // ==================== HEADER SECTION ====================\r\n  // Company name and info (left side)\r\n  if (branding.companyNameInHeader) {\r\n    pdf.setFontSize(typography.fontSize.xlarge);\r\n    pdf.setFont(typography.fontFamily, 'bold');\r\n    setTextPrimary();\r\n    const companyName = company?.name || 'Ultimate Steels Building Materials Trading';\r\n    pdf.text(companyName, margin, currentY);\r\n    currentY += layout.lineSpacing + 1;\r\n  }\r\n\r\n  // Company address and contact\r\n  pdf.setFontSize(typography.fontSize.base);\r\n  pdf.setFont(typography.fontFamily, 'normal');\r\n  setTextSecondary();\r\n\r\n  const compAddr = company?.address || {};\r\n  if (compAddr.street) {\r\n    pdf.text(compAddr.street, margin, currentY);\r\n    currentY += 4;\r\n  }\r\n\r\n  const cityCountry = [compAddr.city, compAddr.country].filter(Boolean).join(', ');\r\n  if (cityCountry) {\r\n    pdf.text(cityCountry, margin, currentY);\r\n    currentY += 4;\r\n  }\r\n\r\n  if (company?.phone) {\r\n    pdf.text(`Mobile: ${company.phone}`, margin, currentY);\r\n    currentY += 4;\r\n  }\r\n\r\n  if (company?.email) {\r\n    pdf.text(`Email: ${company.email}`, margin, currentY);\r\n    currentY += 4;\r\n  }\r\n\r\n  // VAT Registration\r\n  pdf.setFont('helvetica', 'bold');\r\n  pdf.text('VAT Reg No: 104858252000003', margin, currentY);\r\n  currentY += 2;\r\n\r\n  // Add logo on the right side of header (maintain aspect ratio)\r\n  try {\r\n    // Load image to get actual dimensions\r\n    const img = new Image();\r\n    img.src = logoCompany;\r\n\r\n    // Set max dimensions\r\n    const maxLogoWidth = 50;\r\n    const maxLogoHeight = 15;\r\n\r\n    // Calculate aspect ratio\r\n    let logoWidth = maxLogoWidth;\r\n    let logoHeight = (img.height / img.width) * logoWidth;\r\n\r\n    // If height exceeds max, scale down based on height\r\n    if (logoHeight > maxLogoHeight) {\r\n      logoHeight = maxLogoHeight;\r\n      logoWidth = (img.width / img.height) * logoHeight;\r\n    }\r\n\r\n    const logoX = pageWidth - margin - logoWidth;\r\n    pdf.addImage(logoCompany, 'PNG', logoX, margin, logoWidth, logoHeight);\r\n  } catch {\r\n    // Logo loading failed - continue without logo\r\n  }\r\n\r\n  currentY += 3;\r\n\r\n  // Horizontal line separator\r\n  pdf.setDrawColor(91, 109, 181);\r\n  pdf.setLineWidth(0.5);\r\n  pdf.line(margin, currentY, pageWidth - margin, currentY);\r\n  currentY += 5;\r\n\r\n  // ==================== INVOICE TITLE BANNER ====================\r\n  // Determine invoice title based on status\r\n  const invoiceTitle = invoice.status === 'draft' ? 'DRAFT INVOICE' :\r\n    invoice.status === 'proforma' ? 'PROFORMA INVOICE' :\r\n      'TAX INVOICE';\r\n\r\n  // Draw title banner (6mm height - industry standard for A4)\r\n  const titleBannerHeight = 6;\r\n  pdf.setFillColor(...primaryColor);\r\n  pdf.rect(margin, currentY, pageWidth - 2 * margin, titleBannerHeight, 'F');\r\n\r\n  // Add centered title text (use template fontSize.title - 10pt industry standard)\r\n  pdf.setFontSize(typography.fontSize.title);\r\n  pdf.setFont('helvetica', 'bold');\r\n  pdf.setTextColor(255, 255, 255);\r\n  const titleWidth = pdf.getTextWidth(invoiceTitle);\r\n  const titleX = (pageWidth - titleWidth) / 2;\r\n  pdf.text(invoiceTitle, titleX, currentY + 4.2);\r\n\r\n  currentY += titleBannerHeight + 4;\r\n\r\n  // ==================== INVOICE TO & INVOICE INFO SECTION ====================\r\n  const leftColX = margin;\r\n  const rightColX = pageWidth / 2 + 5;\r\n  const invoiceInfoStartY = currentY;\r\n\r\n  // LEFT SIDE - Invoice To\r\n  pdf.setFontSize(typography.fontSize.large);\r\n  pdf.setFont('helvetica', 'bold');\r\n  setBlack();\r\n  pdf.text('Invoice To:', leftColX, currentY);\r\n  currentY += 5;\r\n\r\n  pdf.setFontSize(typography.fontSize.base);\r\n  pdf.setFont('helvetica', 'normal');\r\n  const cust = invoice.customer || {};\r\n  const custAddr = cust.address || {};\r\n\r\n  if (cust.name) {\r\n    pdf.text(titleCase(cust.name), leftColX, currentY);\r\n    currentY += 4;\r\n  }\r\n\r\n  if (custAddr.street) {\r\n    pdf.text(custAddr.street, leftColX, currentY);\r\n    currentY += 4;\r\n  }\r\n\r\n  const custCityCountry = [custAddr.city, custAddr.country].filter(Boolean).join(', ');\r\n  if (custCityCountry) {\r\n    pdf.text(custCityCountry, leftColX, currentY);\r\n    currentY += 4;\r\n  }\r\n\r\n  if (cust.email) {\r\n    pdf.setFont('helvetica', 'bold');\r\n    pdf.text(`Email: `, leftColX, currentY);\r\n    pdf.setFont('helvetica', 'normal');\r\n    pdf.text(cust.email, leftColX + 11, currentY);\r\n    currentY += 4;\r\n  }\r\n\r\n  if (cust.phone) {\r\n    pdf.text(`Phone: ${cust.phone}`, leftColX, currentY);\r\n    currentY += 4;\r\n  }\r\n\r\n  if (cust.vatNumber) {\r\n    pdf.text(`TRN: ${cust.vatNumber}`, leftColX, currentY);\r\n  }\r\n\r\n  // RIGHT SIDE - Invoice Info Box with Blue Header\r\n  let rightY = invoiceInfoStartY;\r\n  const boxWidth = pageWidth - rightColX - margin;\r\n  const boxHeaderHeight = 7;\r\n\r\n  // Blue header box\r\n  pdf.setFillColor(...primaryBlue);\r\n  pdf.rect(rightColX, rightY, boxWidth, boxHeaderHeight, 'F');\r\n\r\n  pdf.setFontSize(typography.fontSize.large);\r\n  pdf.setFont('helvetica', 'bold');\r\n  pdf.setTextColor(255, 255, 255);\r\n  pdf.text('Invoice No:', rightColX + 2, rightY + 5);\r\n\r\n  // Invoice number (right aligned in blue box)\r\n  const invNum = invoice.invoiceNumber || '';\r\n  const invNumWidth = pdf.getTextWidth(invNum);\r\n  pdf.text(invNum, rightColX + boxWidth - invNumWidth - 2, rightY + 5);\r\n\r\n  rightY += boxHeaderHeight + 1;\r\n\r\n  // Invoice details in white box with border\r\n  const detailsStartY = rightY;\r\n  pdf.setFillColor(255, 255, 255);\r\n  pdf.setDrawColor(...primaryBlue);\r\n\r\n  // Invoice Date - Professional format\r\n  pdf.setFontSize(typography.fontSize.base);\r\n  setBlack();\r\n  pdf.setFont('helvetica', 'bold');\r\n  pdf.text('Invoice Date:', rightColX + 2, rightY + 4);\r\n  pdf.setFont('helvetica', 'normal');\r\n  const invoiceDateStr = toUAEDateProfessional(invoice.date || new Date());\r\n  const invoiceDateWidth = pdf.getTextWidth(invoiceDateStr);\r\n  pdf.text(invoiceDateStr, rightColX + boxWidth - invoiceDateWidth - 2, rightY + 4);\r\n  rightY += 6;\r\n\r\n  // Issued Date/Time - Split into two rows for better readability\r\n  // Row 1: \"Issued:\" with just the date\r\n  const issuedDateTime = invoice.createdAt || invoice.date || new Date();\r\n  const issuedDateStr = toUAEDateProfessional(issuedDateTime);\r\n  pdf.setFont('helvetica', 'bold');\r\n  pdf.text('Issued:', rightColX + 2, rightY + 4);\r\n  pdf.setFont('helvetica', 'normal');\r\n  const issuedDateWidth = pdf.getTextWidth(issuedDateStr);\r\n  pdf.text(issuedDateStr, rightColX + boxWidth - issuedDateWidth - 2, rightY + 4);\r\n  rightY += 5;\r\n\r\n  // Row 2: Time portion on separate line (right-aligned)\r\n  // Extract time from the full datetime format\r\n  const issuedDateObj = new Date(issuedDateTime);\r\n  const timeFormatter = new Intl.DateTimeFormat('en-GB', {\r\n    hour: 'numeric',\r\n    minute: '2-digit',\r\n    hour12: true,\r\n    timeZone: 'Asia/Dubai',\r\n  });\r\n  const timeStr = `${timeFormatter.format(issuedDateObj).toUpperCase()  } GST (UTC+4)`;\r\n  const timeStrWidth = pdf.getTextWidth(timeStr);\r\n  pdf.setFontSize(typography.fontSize.small);\r\n  setTextSecondary();\r\n  pdf.text(timeStr, rightColX + boxWidth - timeStrWidth - 2, rightY + 3);\r\n  rightY += 5;\r\n\r\n  // Reset font settings for next rows\r\n  pdf.setFontSize(typography.fontSize.base);\r\n  setBlack();\r\n\r\n  // SO (Sales Order)\r\n  if (invoice.customerPurchaseOrderNumber) {\r\n    pdf.setFont('helvetica', 'bold');\r\n    pdf.text('SO:', rightColX + 2, rightY + 4);\r\n    pdf.setFont('helvetica', 'normal');\r\n    pdf.text(invoice.customerPurchaseOrderNumber, rightColX + boxWidth - 20, rightY + 4);\r\n    rightY += 6;\r\n  }\r\n\r\n  // Order Date - Professional format\r\n  if (invoice.customerPurchaseOrderDate) {\r\n    pdf.setFont('helvetica', 'bold');\r\n    pdf.text('Order Date:', rightColX + 2, rightY + 4);\r\n    pdf.setFont('helvetica', 'normal');\r\n    const orderDateStr = toUAEDateProfessional(invoice.customerPurchaseOrderDate);\r\n    const orderDateWidth = pdf.getTextWidth(orderDateStr);\r\n    pdf.text(orderDateStr, rightColX + boxWidth - orderDateWidth - 2, rightY + 4);\r\n    rightY += 6;\r\n  }\r\n\r\n  // Due Date - Professional format (if available)\r\n  if (invoice.dueDate) {\r\n    pdf.setFont('helvetica', 'bold');\r\n    pdf.text('Due Date:', rightColX + 2, rightY + 4);\r\n    pdf.setFont('helvetica', 'normal');\r\n    const dueDateStr = toUAEDateProfessional(invoice.dueDate);\r\n    const dueDateWidth = pdf.getTextWidth(dueDateStr);\r\n    pdf.text(dueDateStr, rightColX + boxWidth - dueDateWidth - 2, rightY + 4);\r\n    rightY += 6;\r\n  }\r\n\r\n  // Draw border around the details box\r\n  const detailsBoxHeight = rightY - detailsStartY;\r\n  pdf.setDrawColor(...primaryBlue);\r\n  pdf.setLineWidth(0.3);\r\n  pdf.rect(rightColX, invoiceInfoStartY + boxHeaderHeight, boxWidth, detailsBoxHeight);\r\n\r\n  currentY = Math.max(currentY, rightY) + 5;\r\n\r\n  // ==================== CURRENCY INFO (Compact one-liner) ====================\r\n  if (invoice.currency && invoice.currency !== 'AED') {\r\n    pdf.setFontSize(8);\r\n    pdf.setFont('helvetica', 'italic');\r\n    pdf.setTextColor(100, 100, 100); // Gray text\r\n    pdf.text(`Exchange Rate: 1 ${invoice.currency} = ${formatNumber(invoice.exchangeRate || 1)} AED`, margin, currentY + 3);\r\n    \r\n    // Reset text color\r\n    setTextPrimary();\r\n    currentY += 6;\r\n  }\r\n\r\n  // ==================== TABLE SECTION (UAE VAT Compliant) ====================\r\n  const tableStartY = currentY;\r\n\r\n  // Table column configuration - Updated for UAE VAT compliance\r\n  // Matches preview proportions: 4%, 44%, 6%, 10%, 10%, 16%, 10%\r\n  const tableWidth = pageWidth - 2 * margin;\r\n  const colWidths = {\r\n    sr: tableWidth * 0.04,           // 4% - Sr. No\r\n    description: tableWidth * 0.44,  // 44% - Description\r\n    quantity: tableWidth * 0.06,     // 6% - Quantity\r\n    unitPrice: tableWidth * 0.10,    // 10% - Unit Price\r\n    netAmt: tableWidth * 0.10,       // 10% - Net Amount\r\n    vat: tableWidth * 0.16,          // 16% - VAT (combined amount and rate)\r\n    total: tableWidth * 0.10,         // 10% - Total with VAT\r\n  };\r\n\r\n  // Table header with blue background (6mm height - industry standard)\r\n  const tableHeaderHeight = 6;\r\n  pdf.setFillColor(...primaryColor);\r\n  pdf.rect(margin, currentY, pageWidth - 2 * margin, tableHeaderHeight, 'F');\r\n\r\n  pdf.setFontSize(typography.fontSize.tableHeader);\r\n  pdf.setFont('helvetica', 'bold');\r\n  pdf.setTextColor(255, 255, 255);\r\n\r\n  let colX = margin + 2;\r\n  pdf.text('Sr.', colX, currentY + 4.2);\r\n  colX += colWidths.sr;\r\n  pdf.text('Description', colX, currentY + 4.2);\r\n  colX += colWidths.description;\r\n  pdf.text('Qty', colX + colWidths.quantity / 2, currentY + 4.2, { align: 'center' });\r\n  colX += colWidths.quantity;\r\n  pdf.text('Unit Price', colX + colWidths.unitPrice / 2, currentY + 4.2, { align: 'center' });\r\n  colX += colWidths.unitPrice;\r\n  pdf.text('Net Amt', colX + colWidths.netAmt - 2, currentY + 4.2, { align: 'right' });\r\n  colX += colWidths.netAmt;\r\n  pdf.text('VAT', colX + colWidths.vat - 2, currentY + 4.2, { align: 'right' });\r\n  colX += colWidths.vat;\r\n  pdf.text('Total', colX + colWidths.total - 2, currentY + 4.2, { align: 'right' });\r\n\r\n  currentY += tableHeaderHeight;\r\n\r\n  // Table rows\r\n  const items = invoice.items || [];\r\n  pdf.setFont('helvetica', 'normal');\r\n  setBlack();\r\n\r\n  items.forEach((item, index) => {\r\n    // Check if we need a new page\r\n    if (currentY > pageHeight - 60) {\r\n      pdf.addPage();\r\n      currentY = margin;\r\n    }\r\n\r\n    const rowHeight = 7;\r\n\r\n    // Alternating row colors (very light gray for even rows)\r\n    if (index % 2 === 0) {\r\n      pdf.setFillColor(250, 250, 250);\r\n      pdf.rect(margin, currentY, pageWidth - 2 * margin, rowHeight, 'F');\r\n    }\r\n\r\n    colX = margin + 2;\r\n\r\n    pdf.setFontSize(8);\r\n    setTextPrimary();\r\n\r\n    // Sr. number\r\n    pdf.text(String(index + 1), colX, currentY + 5);\r\n    colX += colWidths.sr;\r\n\r\n    // Description\r\n    const desc = item.name || '';\r\n    const descLines = pdf.splitTextToSize(desc, colWidths.description - 4);\r\n    pdf.setFont('helvetica', 'bold');\r\n    pdf.text(descLines[0] || '', colX, currentY + 5);\r\n    pdf.setFont('helvetica', 'normal');\r\n    colX += colWidths.description;\r\n\r\n    // Quantity\r\n    pdf.text(String(item.quantity || 0), colX + colWidths.quantity / 2, currentY + 5, { align: 'center' });\r\n    colX += colWidths.quantity;\r\n\r\n    // Unit Price\r\n    pdf.text(formatNumber(item.rate || 0), colX + colWidths.unitPrice - 2, currentY + 5, { align: 'right' });\r\n    colX += colWidths.unitPrice;\r\n\r\n    // Net Amount (excluding VAT)\r\n    const amountNum = parseFloat(item.amount) || 0;\r\n    pdf.text(formatNumber(amountNum), colX + colWidths.netAmt - 2, currentY + 5, { align: 'right' });\r\n    colX += colWidths.netAmt;\r\n\r\n    // VAT (combined amount and rate)\r\n    const vatRate = item.vatRate || 0;\r\n    const vatAmount = calculateTRN(amountNum, vatRate);\r\n    const vatText = `${formatNumber(vatAmount)} (${vatRate > 0 ? `${vatRate}%` : '0%'})`;\r\n    pdf.text(vatText, colX + colWidths.vat - 2, currentY + 5, { align: 'right' });\r\n    colX += colWidths.vat;\r\n\r\n    // Total (including VAT)\r\n    const totalWithVAT = amountNum + vatAmount;\r\n    pdf.setFont('helvetica', 'bold');\r\n    pdf.text(formatNumber(totalWithVAT), colX + colWidths.total - 2, currentY + 5, { align: 'right' });\r\n    pdf.setFont('helvetica', 'normal');\r\n\r\n    currentY += rowHeight;\r\n  });\r\n\r\n  // Bottom border of table\r\n  pdf.setDrawColor(200, 200, 200);\r\n  pdf.setLineWidth(0.3);\r\n  pdf.line(margin, currentY, pageWidth - margin, currentY);\r\n\r\n  currentY += 5;\r\n\r\n  // ==================== TOTALS SECTION ====================\r\n  const totalsX = pageWidth - margin - 60;\r\n\r\n  const subtotalVal = calculateSubtotal(items);\r\n  const discountPerc = parseFloat(invoice.discountPercentage) || 0;\r\n  const discountFlat = parseFloat(invoice.discountAmount) || 0;\r\n  const discountVal = invoice.discountType === 'percentage'\r\n    ? (subtotalVal * discountPerc) / 100\r\n    : discountFlat;\r\n  const vatVal = calculateDiscountedTRN(\r\n    items,\r\n    invoice.discountType,\r\n    invoice.discountPercentage,\r\n    invoice.discountAmount,\r\n  );\r\n  const additionalCharges =\r\n    (parseFloat(invoice.packingCharges) || 0) +\r\n    (parseFloat(invoice.freightCharges) || 0) +\r\n    (parseFloat(invoice.loadingCharges) || 0) +\r\n    (parseFloat(invoice.otherCharges) || 0);\r\n  const totalVal = calculateTotal(\r\n    Math.max(0, subtotalVal - discountVal) + additionalCharges,\r\n    vatVal,\r\n  );\r\n\r\n  pdf.setFontSize(typography.fontSize.base);\r\n  pdf.setFont('helvetica', 'normal');\r\n  setBlack();\r\n\r\n  // SubTotal\r\n  pdf.text('SubTotal', totalsX, currentY);\r\n  pdf.text(`AED ${formatNumber(subtotalVal)}`, pageWidth - margin, currentY, { align: 'right' });\r\n  currentY += 5;\r\n\r\n  // Discount (if applicable)\r\n  if (discountVal > 0) {\r\n    pdf.text('Discount', totalsX, currentY);\r\n    pdf.text(`- AED ${formatNumber(discountVal)}`, pageWidth - margin, currentY, { align: 'right' });\r\n    currentY += 5;\r\n  }\r\n\r\n  // VAT\r\n  pdf.text('VAT', totalsX, currentY);\r\n  pdf.text(`AED ${formatNumber(vatVal)}`, pageWidth - margin, currentY, { align: 'right' });\r\n  currentY += 5;\r\n\r\n  // TOTAL (bold)\r\n  pdf.setFont('helvetica', 'bold');\r\n  pdf.setFontSize(typography.fontSize.large);\r\n  pdf.text('TOTAL', totalsX, currentY);\r\n  pdf.text(`AED ${formatNumber(totalVal)}`, pageWidth - margin, currentY, { align: 'right' });\r\n  currentY += 8;\r\n\r\n  // ==================== BALANCE DUE (from payments array) ====================\r\n  // Calculate total paid from payments array (industry standard - no separate advance field)\r\n  const totalPaidFromPayments = (invoice.payments || []).reduce((sum, p) => sum + (parseFloat(p.amount) || 0), 0);\r\n  if (totalPaidFromPayments > 0) {\r\n    // Draw separator line\r\n    pdf.setLineWidth(0.2);\r\n    pdf.setDrawColor(200, 200, 200);\r\n    pdf.line(totalsX, currentY, pageWidth - margin, currentY);\r\n    currentY += 4;\r\n\r\n    // Show payments received\r\n    pdf.setFont('helvetica', 'normal');\r\n    pdf.setFontSize(typography.fontSize.base);\r\n    pdf.setTextColor(34, 139, 34); // Green color for payments\r\n    pdf.text('Less: Payments Received', totalsX, currentY);\r\n    pdf.text(`- AED ${formatNumber(totalPaidFromPayments)}`, pageWidth - margin, currentY, { align: 'right' });\r\n    currentY += 6;\r\n\r\n    // Calculate and show balance due\r\n    const balanceDue = Math.max(0, totalVal - totalPaidFromPayments);\r\n    pdf.setLineWidth(0.5);\r\n    pdf.setDrawColor(...primaryColor);\r\n    pdf.line(totalsX, currentY, pageWidth - margin, currentY);\r\n    currentY += 5;\r\n\r\n    pdf.setFont('helvetica', 'bold');\r\n    pdf.setFontSize(typography.fontSize.large);\r\n    pdf.setTextColor(...textPrimaryColor);\r\n    pdf.text('Balance Due', totalsX, currentY);\r\n    pdf.text(`AED ${formatNumber(balanceDue)}`, pageWidth - margin, currentY, { align: 'right' });\r\n    currentY += 10;\r\n  }\r\n\r\n  // ==================== PAYMENT HISTORY SECTION (Optional) ====================\r\n  // Only show if there are payments\r\n  if (invoice.payments && invoice.payments.length > 0) {\r\n    pdf.setFontSize(typography.fontSize.large);\r\n    pdf.setFont('helvetica', 'bold');\r\n    setBlack();\r\n    pdf.text('Payment History', margin, currentY);\r\n    currentY += 6;\r\n\r\n    // Payment table header (6mm height - consistent with main table)\r\n    pdf.setFillColor(...primaryBlue);\r\n    pdf.rect(margin, currentY, pageWidth - 2 * margin, tableHeaderHeight, 'F');\r\n\r\n    pdf.setFontSize(typography.fontSize.tableHeader);\r\n    pdf.setTextColor(255, 255, 255);\r\n\r\n    const payColWidths = {\r\n      sr: 15,\r\n      date: 35,\r\n      method: 40,\r\n      ref: 50,\r\n      amount: 35,\r\n    };\r\n\r\n    colX = margin + 2;\r\n    pdf.text('Sr.', colX, currentY + 4.2);\r\n    colX += payColWidths.sr;\r\n    pdf.text('Date', colX, currentY + 4.2);\r\n    colX += payColWidths.date;\r\n    pdf.text('Method', colX, currentY + 4.2);\r\n    colX += payColWidths.method;\r\n    pdf.text('Ref.', colX, currentY + 4.2);\r\n    colX += payColWidths.ref;\r\n    pdf.text('Amount', colX + payColWidths.amount - 2, currentY + 4.2, { align: 'right' });\r\n\r\n    currentY += tableHeaderHeight;\r\n\r\n    // Payment rows\r\n    pdf.setFont('helvetica', 'normal');\r\n    setBlack();\r\n\r\n    invoice.payments.forEach((payment, index) => {\r\n      if (index % 2 === 0) {\r\n        pdf.setFillColor(250, 250, 250);\r\n        pdf.rect(margin, currentY, pageWidth - 2 * margin, 6, 'F');\r\n      }\r\n\r\n      colX = margin + 2;\r\n      pdf.text(String(index + 1), colX, currentY + 4);\r\n      colX += payColWidths.sr;\r\n      // Use professional payment datetime format with GST indicator\r\n      pdf.text(toUAEPaymentDateTime(payment.date || new Date()), colX, currentY + 4);\r\n      colX += payColWidths.date;\r\n      pdf.text(payment.method || '', colX, currentY + 4);\r\n      colX += payColWidths.method;\r\n      pdf.text(payment.reference || '', colX, currentY + 4);\r\n      colX += payColWidths.ref;\r\n      pdf.text(`AED ${formatNumber(payment.amount || 0)}`, colX + payColWidths.amount - 2, currentY + 4, { align: 'right' });\r\n\r\n      currentY += 6;\r\n    });\r\n\r\n    currentY += 5;\r\n  }\r\n\r\n  // ==================== FOOTER SECTION ====================\r\n  pdf.setFontSize(typography.fontSize.base);\r\n  pdf.setFont('helvetica', 'normal');\r\n  setDarkGray();\r\n\r\n  // Payment Terms\r\n  if (invoice.terms) {\r\n    pdf.text('\\u2022 Payment Term: ', margin, currentY);\r\n    const termsText = pdf.splitTextToSize(invoice.terms, pageWidth - margin - 40);\r\n    pdf.text(termsText[0] || '', margin + 26, currentY);\r\n    currentY += 5;\r\n  }\r\n\r\n  // Notes/Comments\r\n  if (invoice.notes) {\r\n    pdf.text('\\u2022 Comment: ', margin, currentY);\r\n    const notesText = pdf.splitTextToSize(invoice.notes, pageWidth - margin - 40);\r\n    pdf.text(notesText[0] || '', margin + 20, currentY);\r\n    currentY += 5;\r\n  }\r\n\r\n  // Place of Supply (Warehouse) - UAE VAT Compliance\r\n  if (invoice.warehouseName || invoice.warehouseCode || invoice.warehouseCity) {\r\n    const warehouseInfo = [invoice.warehouseName, invoice.warehouseCode, invoice.warehouseCity].filter(Boolean).join(', ');\r\n    pdf.text('\\u2022 Place of Supply (Warehouse): ', margin, currentY);\r\n    pdf.text(warehouseInfo, margin + 45, currentY);\r\n    currentY += 5;\r\n  }\r\n\r\n  currentY += 2;\r\n\r\n  // Tax Notes Section - UAE VAT Compliance (highlighted)\r\n  if (invoice.taxNotes) {\r\n    const taxNotesLines = pdf.splitTextToSize(invoice.taxNotes, pageWidth - 2 * margin - 8);\r\n    const taxNotesHeight = Math.max(14, 6 + (taxNotesLines.length * 4));\r\n\r\n    // Light yellow background box (bg-yellow-50)\r\n    pdf.setFillColor(254, 252, 232);\r\n    pdf.rect(margin, currentY, pageWidth - 2 * margin, taxNotesHeight, 'F');\r\n\r\n    // Thick left border (border-yellow-500)\r\n    pdf.setDrawColor(234, 179, 8);\r\n    pdf.setLineWidth(2);\r\n    pdf.line(margin, currentY, margin, currentY + taxNotesHeight);\r\n\r\n    // Reset line width\r\n    pdf.setLineWidth(0.3);\r\n\r\n    pdf.setFontSize(typography.fontSize.base);\r\n    pdf.setFont('helvetica', 'bold');\r\n    pdf.setTextColor(113, 63, 18); // text-yellow-900\r\n    pdf.text('Tax Notes:', margin + 3, currentY + 5);\r\n\r\n    pdf.setFont('helvetica', 'normal');\r\n    pdf.setFontSize(typography.fontSize.small);\r\n    pdf.setTextColor(133, 77, 14); // text-yellow-800\r\n    pdf.text(taxNotesLines, margin + 3, currentY + 10);\r\n\r\n    // Reset text color\r\n    setTextPrimary();\r\n\r\n    currentY += taxNotesHeight + 2;\r\n  }\r\n\r\n  currentY += 4;\r\n\r\n  // ==================== FOOTER SPACE CHECK ====================\r\n  // Ensure we have enough space for signature/seal section + contact footer\r\n  const footerRequiredSpace = 50; // Minimum space needed for seal + signature + contact info\r\n  const availableSpace = pageHeight - currentY - layout.marginBottom;\r\n\r\n  if (availableSpace < footerRequiredSpace) {\r\n    pdf.addPage();\r\n    currentY = layout.marginTop;\r\n  }\r\n\r\n  // ==================== SIGNATURE AND SEAL SECTION ====================\r\n  const signatureY = currentY;\r\n\r\n  // Company Seal/Stamp - Left Side\r\n  try {\r\n    const sealSize = 20; // 20mm x 20mm seal\r\n    pdf.addImage(sealImage, 'PNG', margin, signatureY, sealSize, sealSize);\r\n\r\n    // Seal label\r\n    pdf.setFontSize(8);\r\n    setDarkGray();\r\n    pdf.text('Company Seal', margin + sealSize + 3, signatureY + 5);\r\n    pdf.setFontSize(7);\r\n    pdf.text('Ultimate Steels', margin + sealSize + 3, signatureY + 9);\r\n    pdf.text('Building Materials', margin + sealSize + 3, signatureY + 12);\r\n    pdf.text('Trading LLC', margin + sealSize + 3, signatureY + 15);\r\n  } catch (error) {\r\n    // Fallback: just show text if seal image fails\r\n    pdf.setDrawColor(60);\r\n    pdf.rect(margin, signatureY, 20, 20);\r\n    pdf.setFontSize(8);\r\n    setDarkGray();\r\n    pdf.text('Company Seal', margin + 2, signatureY + 5);\r\n  }\r\n\r\n  // Authorized Signatory - Right Side\r\n  const signatoryX = pageWidth - margin - 60;\r\n  pdf.setFontSize(typography.fontSize.base);\r\n  setBlack();\r\n  pdf.setFont('helvetica', 'bold');\r\n  pdf.text('Authorized Signatory', signatoryX, signatureY + 5);\r\n\r\n  // Signature line\r\n  pdf.setDrawColor(0);\r\n  pdf.setLineWidth(0.3);\r\n  pdf.line(signatoryX, signatureY + 16, signatoryX + 55, signatureY + 16);\r\n\r\n  // Company name under signature\r\n  pdf.setFontSize(typography.fontSize.small);\r\n  setDarkGray();\r\n  pdf.text('ULTIMATE STEELS', signatoryX + 5, signatureY + 19);\r\n  pdf.text('BUILDING MATERIALS TRADING', signatoryX, signatureY + 22);\r\n\r\n  currentY = signatureY + 24;\r\n\r\n  // Bottom footer line\r\n  const footerY = currentY;\r\n  pdf.setDrawColor(91, 109, 181);\r\n  pdf.setLineWidth(0.5);\r\n  pdf.line(margin, footerY, pageWidth - margin, footerY);\r\n\r\n  // Contact information\r\n  pdf.setFontSize(typography.fontSize.small);\r\n  setDarkGray();\r\n  const contactInfo = `Phone: ${company?.phone || '+971 XXX XXX'} | Email: ${company?.email || 'info@example.com'} | Website: www.ultimatesteels.com`;\r\n  const contactWidth = pdf.getTextWidth(contactInfo);\r\n  pdf.text(contactInfo, (pageWidth - contactWidth) / 2, footerY + 3);\r\n\r\n  // Timezone disclaimer - Important for international business\r\n  pdf.setFontSize(6);\r\n  pdf.setFont('helvetica', 'italic');\r\n  const disclaimerWidth = pdf.getTextWidth(TIMEZONE_DISCLAIMER);\r\n  pdf.text(TIMEZONE_DISCLAIMER, (pageWidth - disclaimerWidth) / 2, footerY + 6);\r\n\r\n  // Page number\r\n  pdf.setFont('helvetica', 'normal');\r\n  pdf.setFontSize(typography.fontSize.small);\r\n  pdf.text(`Page: 1 / 1`, pageWidth / 2, footerY + 9, { align: 'center' });\r\n\r\n  // Save the PDF\r\n  pdf.save(`${invoice.invoiceNumber || 'invoice'}.pdf`);\r\n  return true;\r\n};\r\n\r\n// Export placeholder functions for compatibility\r\nconst createInvoiceElement = (invoice, company) => {\r\n  return null;\r\n};\r\n\r\nconst waitForImages = (container) => {\r\n  return Promise.resolve();\r\n};\r\n\r\nexport { createInvoiceElement, waitForImages };\r\n","usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\utils\\poPdfGenerator.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\utils\\productNormalizer.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":13,"column":46,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":13,"endColumn":49,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[462,465],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[462,465],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":13,"column":72,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":13,"endColumn":75,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[488,491],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[488,491],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":23,"column":33,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":23,"endColumn":36,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[782,785],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[782,785],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":23,"column":48,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":23,"endColumn":51,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[797,800],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[797,800],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":30,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":30,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1111,1114],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1111,1114],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":127,"column":48,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":127,"endColumn":51,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6272,6275],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6272,6275],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":127,"column":73,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":127,"endColumn":76,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6297,6300],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6297,6300],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":135,"column":35,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":135,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6583,6586],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6583,6586],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":8,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Frontend Product Data Normalizer\n * CRITICAL: Converts snake_case API fields to camelCase frontend schema\n * FAIL-SAFE: Validates and normalizes product data from API\n */\n\n/**\n * Convert snake_case API response to camelCase Product object\n * @param rawProduct - Raw product data from API (snake_case)\n * @param source - Source of the data for debugging\n * @returns Normalized Product with camelCase fields\n */\nexport function normalizeProduct(rawProduct: any, source = 'unknown'): any | null {\n  if (!rawProduct || typeof rawProduct !== 'object') {\n    console.error(`Γ¥î [Product Normalizer] Invalid product data from ${source}:`, rawProduct);\n    return null;\n  }\n\n  const errors: string[] = [];\n\n  try {\n    // Helper to safely parse numbers\n    const parseNumber = (value: any, fallback: any = undefined): number | undefined => {\n      if (value === null || value === undefined) return fallback;\n      const parsed = parseFloat(value);\n      return isNaN(parsed) ? fallback : parsed;\n    };\n\n    // Build the normalized Product object (EXPLICIT snake_case ΓåÆ camelCase conversion)\n    const normalized: any = {\n      // Core identifiers\n      id: rawProduct.id || 0,\n      // uniqueName: Technical identifier with origin (source of truth for identity)\n      uniqueName: rawProduct.uniqueName || rawProduct.unique_name || rawProduct.fullName || rawProduct.full_name || '',\n      // displayName: User-friendly name for UI (without origin, user-editable)\n      displayName: rawProduct.displayName || rawProduct.display_name || rawProduct.name || '',\n      // Keep legacy 'name' for backward compatibility, prefer displayName\n      name: rawProduct.displayName || rawProduct.display_name || rawProduct.name || rawProduct.product_name || '',\n      fullName: rawProduct.uniqueName || rawProduct.unique_name || rawProduct.fullName || rawProduct.full_name || rawProduct.name || '',\n      title: rawProduct.title || rawProduct.displayName || rawProduct.display_name || rawProduct.name || '',\n      description: rawProduct.description || undefined,\n      \n      // Category & Classification\n      category: rawProduct.category || undefined,\n      commodity: rawProduct.commodity || undefined,\n      grade: rawProduct.grade || undefined,\n      gradeVariant: rawProduct.gradeVariant || rawProduct.grade_variant || undefined,\n      steelGrade: rawProduct.steelGrade || rawProduct.steel_grade || rawProduct.grade || undefined,\n      \n      // Dimensions\n      thickness: rawProduct.thickness || undefined,\n      thick: rawProduct.thick || rawProduct.thickness || undefined,\n      width: rawProduct.width || undefined,\n      length: rawProduct.length || undefined,\n      size: rawProduct.size || undefined,\n      sizeInch: rawProduct.sizeInch || rawProduct.size_inch || undefined,\n      nbSize: rawProduct.nbSize || rawProduct.nb_size || undefined,\n      diameter: rawProduct.diameter || undefined,\n      od: rawProduct.od || undefined,\n      dimensions: rawProduct.dimensions || undefined,\n      \n      // Finish & Specifications\n      finish: rawProduct.finish || undefined,\n      finishType: rawProduct.finishType || rawProduct.finish_type || undefined,\n      surfaceFinish: rawProduct.surfaceFinish || rawProduct.surface_finish || rawProduct.finish || undefined,\n      specifications: rawProduct.specifications || undefined,\n      specification: rawProduct.specification || rawProduct.specifications || undefined,\n      schedule: rawProduct.schedule || undefined,\n      \n      // Pricing\n      price: parseNumber(rawProduct.price || rawProduct.selling_price || rawProduct.sellingPrice, undefined),\n      sellingPrice: parseNumber(rawProduct.sellingPrice || rawProduct.selling_price || rawProduct.price, undefined),\n      costPrice: parseNumber(rawProduct.costPrice || rawProduct.cost_price, undefined),\n      purchasePrice: parseNumber(rawProduct.purchasePrice || rawProduct.purchase_price, undefined),\n      unitPrice: parseNumber(rawProduct.unitPrice || rawProduct.unit_price, undefined),\n      \n      // Inventory & Stock\n      currentStock: parseNumber(rawProduct.currentStock || rawProduct.current_stock, undefined),\n      minStock: parseNumber(rawProduct.minStock || rawProduct.min_stock, undefined),\n      maxStock: parseNumber(rawProduct.maxStock || rawProduct.max_stock, undefined),\n      quantity: parseNumber(rawProduct.quantity, undefined),\n      unit: rawProduct.unit || undefined,\n      location: rawProduct.location || undefined,\n      \n      // Tax & Compliance\n      hsnCode: rawProduct.hsnCode || rawProduct.hsn_code || undefined,\n      gstRate: parseNumber(rawProduct.gstRate || rawProduct.gst_rate, undefined),\n      \n      // Analytics & Metrics\n      revenue: parseNumber(rawProduct.revenue, undefined),\n      revenueGrowth: parseNumber(rawProduct.revenueGrowth || rawProduct.revenue_growth, undefined),\n      prevRevenue: parseNumber(rawProduct.prevRevenue || rawProduct.prev_revenue, undefined),\n      sales: parseNumber(rawProduct.sales, undefined),\n      orders: parseNumber(rawProduct.orders, undefined),\n      ordersGrowth: parseNumber(rawProduct.ordersGrowth || rawProduct.orders_growth, undefined),\n      prevOrders: parseNumber(rawProduct.prevOrders || rawProduct.prev_orders, undefined),\n      quantityGrowth: parseNumber(rawProduct.quantityGrowth || rawProduct.quantity_growth, undefined),\n      prevQuantity: parseNumber(rawProduct.prevQuantity || rawProduct.prev_quantity, undefined),\n      \n      // Related Data\n      supplier: rawProduct.supplier || undefined,\n      product: rawProduct.product || undefined,\n      image: rawProduct.image || undefined,\n    };\n\n    // Log validation errors if any\n    if (errors.length > 0) {\n      console.warn(`ΓÜá∩╕Å [Product Normalizer] Validation warnings from ${source}:`);\n      errors.forEach(error => console.warn(`   - ${error}`));\n    }\n\n    return normalized;\n    \n  } catch (error) {\n    console.error(`Γ¥î [Product Normalizer] Failed to normalize product from ${source}:`, error);\n    console.error('   Raw data:', rawProduct);\n    return null;\n  }\n}\n\n/**\n * Normalize array of products\n * @param rawProducts - Array of raw product data from API\n * @param source - Source identifier for debugging\n * @returns Array of normalized Product objects\n */\nexport function normalizeProducts(rawProducts: any[], source = 'list'): any[] {\n  if (!Array.isArray(rawProducts)) {\n    console.error(`Γ¥î [Product Normalizer] Expected array, got ${typeof rawProducts}`);\n    return [];\n  }\n\n  return rawProducts\n    .map((product, index) => normalizeProduct(product, `${source}[${index}]`))\n    .filter((product): product is any => product !== null);\n}\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\utils\\purchaseOrderNormalizer.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":13,"column":47,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":13,"endColumn":50,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[491,494],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[491,494],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":13,"column":73,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":13,"endColumn":76,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[517,520],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[517,520],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":23,"column":33,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":23,"endColumn":36,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[809,812],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[809,812],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":23,"column":48,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":23,"endColumn":51,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[824,827],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[824,827],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":30,"column":31,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":30,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1094,1097],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1094,1097],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":50,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":50,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1630,1633],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1630,1633],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":148,"column":49,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":148,"endColumn":52,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6484,6487],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6484,6487],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":148,"column":74,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":148,"endColumn":77,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6509,6512],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6509,6512],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":156,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":156,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6772,6775],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6772,6775],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":9,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Frontend Purchase Order Data Normalizer\n * CRITICAL: Converts snake_case API fields to camelCase frontend schema\n * FAIL-SAFE: Validates and normalizes purchase order data from API\n */\n\n/**\n * Convert snake_case API response to camelCase PurchaseOrder object\n * @param rawPO - Raw purchase order data from API (snake_case)\n * @param source - Source of the data for debugging\n * @returns Normalized PurchaseOrder with camelCase fields\n */\nexport function normalizePurchaseOrder(rawPO: any, source = 'unknown'): any | null {\n  if (!rawPO || typeof rawPO !== 'object') {\n    console.error(`Γ¥î [PurchaseOrder Normalizer] Invalid purchase order data from ${source}:`, rawPO);\n    return null;\n  }\n\n  const errors: string[] = [];\n\n  try {\n    // Helper to safely parse numbers\n    const parseNumber = (value: any, fallback: any = undefined): number | undefined => {\n      if (value === null || value === undefined) return fallback;\n      const parsed = parseFloat(value);\n      return isNaN(parsed) ? fallback : parsed;\n    };\n\n    // Helper to safely parse dates\n    const parseDate = (value: any): string | undefined => {\n      if (!value) return undefined;\n      \n      // Handle Timestamp objects\n      if (value?.seconds) {\n        return new Date(parseInt(value.seconds) * 1000).toISOString();\n      }\n      \n      // Handle string dates\n      if (typeof value === 'string') {\n        const parsed = new Date(value);\n        if (!isNaN(parsed.getTime())) {\n          return parsed.toISOString();\n        }\n      }\n      \n      return undefined;\n    };\n\n    // Build the normalized PurchaseOrder object\n    const normalized: any = {\n      // Core identifiers\n      id: rawPO.id || 0,\n      companyId: rawPO.company_id || rawPO.companyId,\n      poNumber: rawPO.poNumber || rawPO.po_number || '',\n      poDate: parseDate(rawPO.poDate || rawPO.po_date),\n      dueDate: parseDate(rawPO.dueDate || rawPO.due_date),\n      expectedDeliveryDate: parseDate(rawPO.expectedDeliveryDate || rawPO.expected_delivery_date),\n      \n      // Supplier information\n      supplierName: rawPO.supplierName || rawPO.supplier_name || undefined,\n      supplierEmail: rawPO.supplierEmail || rawPO.supplier_email || undefined,\n      supplierPhone: rawPO.supplierPhone || rawPO.supplier_phone || undefined,\n      supplierAddress: rawPO.supplierAddress || rawPO.supplier_address || undefined,\n      supplierTRN: rawPO.supplierTRN || rawPO.supplier_trn || undefined,\n      supplierContactName: rawPO.supplierContactName || rawPO.supplier_contact_name || undefined,\n      supplierContactEmail: rawPO.supplierContactEmail || rawPO.supplier_contact_email || undefined,\n      supplierContactPhone: rawPO.supplierContactPhone || rawPO.supplier_contact_phone || undefined,\n      \n      // Buyer information\n      buyerName: rawPO.buyerName || rawPO.buyer_name || undefined,\n      buyerEmail: rawPO.buyerEmail || rawPO.buyer_email || undefined,\n      buyerPhone: rawPO.buyerPhone || rawPO.buyer_phone || undefined,\n      buyerDepartment: rawPO.buyerDepartment || rawPO.buyer_department || undefined,\n      \n      // Financial\n      subtotal: parseNumber(rawPO.subtotal, 0),\n      vatAmount: parseNumber(rawPO.vatAmount || rawPO.vat_amount, 0),\n      total: parseNumber(rawPO.total, 0),\n      currency: rawPO.currency || 'INR',\n      \n      // Discounts & Charges\n      discountPercentage: parseNumber(rawPO.discountPercentage || rawPO.discount_percentage, undefined),\n      discountAmount: parseNumber(rawPO.discountAmount || rawPO.discount_amount, undefined),\n      discountType: rawPO.discountType || rawPO.discount_type || undefined,\n      shippingCharges: parseNumber(rawPO.shippingCharges || rawPO.shipping_charges, undefined),\n      freightCharges: parseNumber(rawPO.freightCharges || rawPO.freight_charges, undefined),\n      handlingCharges: parseNumber(rawPO.handlingCharges || rawPO.handling_charges, undefined),\n      otherCharges: parseNumber(rawPO.otherCharges || rawPO.other_charges, undefined),\n      \n      // Terms & Conditions\n      terms: rawPO.terms || undefined,\n      paymentTerms: rawPO.paymentTerms || rawPO.payment_terms || undefined,\n      incoterms: rawPO.incoterms || undefined,\n      \n      // Items & Status\n      items: rawPO.items || [],\n      stockStatus: rawPO.stockStatus || rawPO.stock_status || undefined,\n      \n      // Approval workflow (5 fields)\n      approvalStatus: rawPO.approvalStatus || rawPO.approval_status || undefined,\n      approvalDate: parseDate(rawPO.approvalDate || rawPO.approval_date),\n      approvedBy: rawPO.approvedBy || rawPO.approved_by || undefined,\n      approvedAt: parseDate(rawPO.approvedAt || rawPO.approved_at),\n      approvalComments: rawPO.approvalComments || rawPO.approval_comments || undefined,\n      rejectionReason: rawPO.rejection_reason || rawPO.rejectionReason || undefined,\n      \n      // Stock tracking (3 fields)\n      stockReceived: Boolean(rawPO.stock_received || rawPO.stockReceived),\n      stockReceivedDate: parseDate(rawPO.stock_received_date || rawPO.stockReceivedDate),\n      partialReceived: Boolean(rawPO.partial_received || rawPO.partialReceived),\n      \n      // Payment tracking (3 fields)\n      paymentStatus: rawPO.payment_status || rawPO.paymentStatus || undefined,\n      paidAmount: parseNumber(rawPO.paid_amount || rawPO.paidAmount, undefined),\n      outstandingAmount: parseNumber(rawPO.outstanding_amount || rawPO.outstandingAmount, undefined),\n      \n      // Notes\n      notes: rawPO.notes || undefined,\n      \n      // Audit trail\n      createdAt: parseDate(rawPO.created_at || rawPO.createdAt),\n      updatedAt: parseDate(rawPO.updated_at || rawPO.updatedAt),\n      createdBy: rawPO.created_by || rawPO.createdBy || undefined,\n      updatedBy: rawPO.updated_by || rawPO.updatedBy || undefined,\n    };\n\n    // Log validation errors if any\n    if (errors.length > 0) {\n      console.warn(`ΓÜá∩╕Å [PurchaseOrder Normalizer] Validation warnings from ${source}:`);\n      errors.forEach(error => console.warn(`   - ${error}`));\n    }\n\n    return normalized;\n    \n  } catch (error) {\n    console.error(`Γ¥î [PurchaseOrder Normalizer] Failed to normalize purchase order from ${source}:`, error);\n    console.error('   Raw data:', rawPO);\n    return null;\n  }\n}\n\n/**\n * Normalize array of purchase orders\n * @param rawPOs - Array of raw purchase order data from API\n * @param source - Source identifier for debugging\n * @returns Array of normalized PurchaseOrder objects\n */\nexport function normalizePurchaseOrders(rawPOs: any[], source = 'list'): any[] {\n  if (!Array.isArray(rawPOs)) {\n    console.error(`Γ¥î [PurchaseOrder Normalizer] Expected array, got ${typeof rawPOs}`);\n    return [];\n  }\n\n  return rawPOs\n    .map((po, index) => normalizePurchaseOrder(po, `${source}[${index}]`))\n    .filter((po): po is any => po !== null);\n}\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\utils\\quotationPdfGenerator.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\utils\\receiptTemplateGenerator.js","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'formatDate' is defined but never used. Allowed unused vars must match /^_/u.","line":16,"column":26,"nodeType":"Identifier","messageId":"unusedVar","endLine":16,"endColumn":36},{"ruleId":"no-unused-vars","severity":1,"message":"'remarks' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":52,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":52,"endColumn":16}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Receipt Template Generator Utility\n * Handles generation of FTA-compliant receipts from template\n * \n * Usage:\n * const html = generateReceiptHTML(payment, invoice, company, customer);\n * \n * Features:\n * - VAT compliance (Article 18 - Time of Supply for advance payments)\n * - Multi-currency support (AED, USD, EUR, GBP, SAR)\n * - Advance payment VAT notation\n * - FTA Form 201 reconciliation fields\n * - Exchange rate tracking for FX payments\n */\n\nimport { formatCurrency, formatDate } from './invoiceUtils';\n\n/**\n * Generate FTA-compliant receipt HTML\n * @param {Object} payment - Payment record with receipt details\n * @param {Object} invoice - Invoice being paid\n * @param {Object} company - Company details (with TRN)\n * @param {Object} customer - Customer details\n * @param {number} paymentIndex - Sequential index of this payment (1-based)\n * @returns {string} HTML content ready for printing/PDF\n */\nexport const generateReceiptHTML = (payment, invoice, company, customer, paymentIndex = 1) => {\n  // Normalize field names (handle both camelCase and snake_case)\n  const companyName = company?.legalName || company?.legal_name || 'Company Name';\n  const companyTRN = company?.trn || company?.TRN || '';\n  const companyAddress = company?.address || '';\n  const companyPhone = company?.phone || '';\n  const companyEmail = company?.email || '';\n\n  const customerName = customer?.name || customer?.customer_name || 'Customer';\n  const customerTRN = customer?.trn || customer?.TRN || '';\n  const customerAddress = customer?.address || '';\n\n  const invoiceNumber = invoice?.invoiceNumber || invoice?.invoice_number || 'N/A';\n  const invoiceDate = invoice?.invoiceDate || invoice?.invoice_date || '';\n  const invoiceTotal = invoice?.total || invoice?.total_amount || 0;\n  const invoiceExcludingVAT = invoice?.amountExcludingVat || invoice?.amount_excluding_vat || invoiceTotal / 1.05;\n  const invoiceVAT = invoice?.vat || invoice?.vat_amount || invoiceTotal - invoiceExcludingVAT;\n\n  const paymentAmount = payment?.amount || 0;\n  const paymentDate = payment?.paymentDate || payment?.payment_date || new Date().toISOString();\n  const paymentMethod = payment?.paymentMethod || payment?.payment_method || 'N/A';\n  const referenceNumber = payment?.referenceNumber || payment?.reference_number || payment?.reference_no || '';\n  const receiptNumber = payment?.receiptNumber || payment?.receipt_number || 'N/A';\n  const compositeReference = payment?.compositeReference || payment?.composite_reference || '';\n  const isAdvancePayment = payment?.isAdvancePayment || payment?.is_advance_payment || false;\n  const remarks = payment?.remarks || '';\n\n  const currencyCode = payment?.currencyCode || payment?.currency_code || 'AED';\n  const exchangeRate = payment?.exchangeRate || payment?.exchange_rate || 1.0;\n  const amountInAED = payment?.amountInAed || payment?.amount_in_aed || paymentAmount;\n\n  const outstandingBalance = invoice?.outstandingBalance || invoice?.outstanding || 0;\n\n  // Format dates\n  const formattedPaymentDate = new Date(paymentDate).toLocaleDateString('en-US', {\n    year: 'numeric',\n    month: '2-digit',\n    day: '2-digit',\n  });\n\n  const formattedInvoiceDate = invoiceDate\n    ? new Date(invoiceDate).toLocaleDateString('en-US', {\n      year: 'numeric',\n      month: '2-digit',\n      day: '2-digit',\n    })\n    : 'N/A';\n\n  // Determine payment method display\n  let paymentMethodDisplay = paymentMethod;\n  let additionalPaymentDetails = '';\n\n  if (paymentMethod.toLowerCase() === 'cheque') {\n    paymentMethodDisplay = 'ΓÿÉ Cheque';\n    if (referenceNumber) {\n      additionalPaymentDetails = `<tr>\n        <td><strong>Cheque Number:</strong></td>\n        <td>${referenceNumber}</td>\n      </tr>`;\n    }\n  } else if (paymentMethod.toLowerCase() === 'bank_transfer' || paymentMethod.toLowerCase() === 'bank transfer') {\n    paymentMethodDisplay = '≡ƒÅª Bank Transfer';\n    if (referenceNumber) {\n      additionalPaymentDetails = `<tr>\n        <td><strong>Bank Reference/Transaction ID:</strong></td>\n        <td>${referenceNumber}</td>\n      </tr>`;\n    }\n  } else if (paymentMethod.toLowerCase() === 'cash') {\n    paymentMethodDisplay = '≡ƒÆ╡ Cash';\n  } else if (paymentMethod.toLowerCase() === 'credit_card' || paymentMethod.toLowerCase() === 'credit card') {\n    paymentMethodDisplay = '≡ƒÆ│ Credit Card';\n    if (referenceNumber) {\n      additionalPaymentDetails = `<tr>\n        <td><strong>Authorization Number:</strong></td>\n        <td>${referenceNumber}</td>\n      </tr>`;\n    }\n  }\n\n  // Build HTML\n  const html = `\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n  <meta charset=\"UTF-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  <title>Payment Receipt - ${receiptNumber}</title>\n  <style>\n    * {\n      margin: 0;\n      padding: 0;\n      box-sizing: border-box;\n    }\n    \n    body {\n      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\n      line-height: 1.6;\n      color: #333;\n      background: white;\n      padding: 20px;\n    }\n    \n    .receipt-container {\n      max-width: 800px;\n      margin: 0 auto;\n      border: 1px solid #ddd;\n      padding: 30px;\n      background: white;\n    }\n    \n    .receipt-header {\n      text-align: center;\n      border-bottom: 3px solid #000;\n      padding-bottom: 20px;\n      margin-bottom: 30px;\n    }\n    \n    .receipt-header h1 {\n      font-size: 24px;\n      font-weight: bold;\n      margin-bottom: 10px;\n      text-transform: uppercase;\n      letter-spacing: 2px;\n    }\n    \n    .company-details {\n      margin-top: 15px;\n      font-size: 13px;\n    }\n    \n    .company-details p {\n      margin: 3px 0;\n    }\n    \n    .company-name {\n      font-size: 16px;\n      font-weight: bold;\n      margin-bottom: 5px;\n    }\n    \n    .trn-label {\n      font-weight: 600;\n      color: #000;\n    }\n    \n    .section-title {\n      font-size: 14px;\n      font-weight: bold;\n      margin-top: 25px;\n      margin-bottom: 10px;\n      text-transform: uppercase;\n      letter-spacing: 1px;\n      border-bottom: 2px solid #333;\n      padding-bottom: 5px;\n    }\n    \n    table {\n      width: 100%;\n      border-collapse: collapse;\n      margin-bottom: 15px;\n      font-size: 13px;\n    }\n    \n    table tr {\n      border-bottom: 1px solid #eee;\n    }\n    \n    table td {\n      padding: 8px;\n      text-align: left;\n    }\n    \n    table td:last-child {\n      text-align: right;\n    }\n    \n    .amount {\n      text-align: right;\n      font-weight: 600;\n    }\n    \n    .vat-section {\n      border: 2px solid #000;\n      padding: 15px;\n      margin: 20px 0;\n      background-color: #f9f9f9;\n    }\n    \n    .vat-section h3 {\n      font-size: 14px;\n      font-weight: bold;\n      margin-bottom: 10px;\n      text-transform: uppercase;\n    }\n    \n    .vat-highlight {\n      font-weight: 600;\n      color: #d32f2f;\n    }\n    \n    .footer {\n      margin-top: 30px;\n      border-top: 1px solid #ddd;\n      padding-top: 15px;\n      font-size: 11px;\n      text-align: center;\n      color: #666;\n    }\n    \n    .compliance-note {\n      font-size: 10px;\n      font-style: italic;\n      margin-top: 10px;\n      color: #666;\n      line-height: 1.4;\n    }\n    \n    .composite-ref {\n      font-size: 12px;\n      font-family: 'Courier New', monospace;\n      background: #f0f0f0;\n      padding: 5px 8px;\n      border-radius: 3px;\n      word-break: break-all;\n    }\n    \n    .advance-payment-banner {\n      background-color: #fff3cd;\n      border-left: 4px solid #ffc107;\n      padding: 10px;\n      margin-bottom: 15px;\n      font-size: 12px;\n    }\n    \n    .advance-payment-banner strong {\n      color: #856404;\n    }\n    \n    .currency-section {\n      background: #f5f5f5;\n      padding: 10px;\n      border-radius: 3px;\n      margin: 10px 0;\n      font-size: 12px;\n    }\n    \n    @media print {\n      body {\n        padding: 0;\n      }\n      .receipt-container {\n        border: none;\n        margin: 0;\n        padding: 0;\n      }\n    }\n  </style>\n</head>\n<body>\n  <div class=\"receipt-container\">\n    <!-- HEADER -->\n    <div class=\"receipt-header\">\n      <h1>PAYMENT RECEIPT</h1>\n      <div class=\"company-details\">\n        <p class=\"company-name\">${companyName}</p>\n        <p><span class=\"trn-label\">Tax Registration Number (TRN):</span> ${companyTRN}</p>\n        <p>${companyAddress}</p>\n        ${companyPhone ? `<p>Tel: ${companyPhone}</p>` : ''}\n        ${companyEmail ? `<p>Email: ${companyEmail}</p>` : ''}\n      </div>\n    </div>\n\n    <!-- RECEIPT DETAILS -->\n    <div class=\"section-title\">Receipt Information</div>\n    <table>\n      <tr>\n        <td><strong>Receipt Number:</strong></td>\n        <td><strong>${receiptNumber}</strong></td>\n      </tr>\n      <tr>\n        <td><strong>Receipt Date:</strong></td>\n        <td>${formattedPaymentDate}</td>\n      </tr>\n      <tr>\n        <td><strong>Invoice Number (Paid Against):</strong></td>\n        <td><strong>${invoiceNumber}</strong></td>\n      </tr>\n      <tr>\n        <td><strong>Invoice Date:</strong></td>\n        <td>${formattedInvoiceDate}</td>\n      </tr>\n    </table>\n\n    <!-- CUSTOMER DETAILS -->\n    <div class=\"section-title\">Received From (Customer)</div>\n    <table>\n      <tr>\n        <td><strong>Customer Name:</strong></td>\n        <td>${customerName}</td>\n      </tr>\n      <tr>\n        <td><strong>Address:</strong></td>\n        <td>${customerAddress}</td>\n      </tr>\n      ${customerTRN ? `<tr>\n        <td><strong>Customer TRN:</strong></td>\n        <td>${customerTRN}</td>\n      </tr>` : ''}\n    </table>\n\n    <!-- PAYMENT DETAILS -->\n    <div class=\"section-title\">Payment Details</div>\n    <table>\n      <tr>\n        <td><strong>Payment Method:</strong></td>\n        <td>${paymentMethodDisplay}</td>\n      </tr>\n      ${additionalPaymentDetails}\n    </table>\n\n    <!-- ADVANCE PAYMENT BANNER -->\n    ${isAdvancePayment ? `\n    <div class=\"advance-payment-banner\">\n      <strong>ΓÜá∩╕Å ADVANCE PAYMENT RECEIPT</strong>\n      <p style=\"margin-top: 5px;\">\n        This receipt is for advance payment received on <strong>${invoiceNumber}</strong>. \n        VAT on this advance payment will be accounted for upon issue of final invoice per FTA Article 18.\n      </p>\n    </div>\n    ` : ''}\n\n    <!-- VAT SECTION (CRITICAL FOR FTA) -->\n    <div class=\"vat-section\">\n      <h3>VALUE ADDED TAX (VAT) INFORMATION</h3>\n      \n      ${isAdvancePayment ? `\n        <!-- ADVANCE PAYMENT VAT SECTION -->\n        <p style=\"font-weight: 600; margin-bottom: 10px;\">Advance Payment Received</p>\n        <table>\n          <tr>\n            <td>Advance Payment (excluding VAT):</td>\n            <td class=\"amount\">AED ${formatCurrency(paymentAmount / 1.05)}</td>\n          </tr>\n          <tr>\n            <td>VAT at 5%:</td>\n            <td class=\"amount\">AED ${formatCurrency((paymentAmount / 1.05) * 0.05)}</td>\n          </tr>\n          <tr style=\"font-weight: 600; border-top: 2px solid #000;\">\n            <td><strong>Total Amount Received (inc. VAT):</strong></td>\n            <td class=\"amount\"><strong>AED ${formatCurrency(paymentAmount)}</strong></td>\n          </tr>\n        </table>\n        <p style=\"font-size: 11px; margin-top: 10px; font-style: italic; color: #555;\">\n          <em>VAT on this advance payment will be accounted for upon issue of final invoice per FTA Article 18 (Time of Supply). No additional VAT is charged on this receipt.</em>\n        </p>\n      ` : `\n        <!-- REGULAR INVOICE PAYMENT VAT SECTION -->\n        <p style=\"font-weight: 600; margin-bottom: 10px;\">Payment Against Invoice ${invoiceNumber}</p>\n        <table>\n          <tr>\n            <td>Invoice Amount (exc. VAT):</td>\n            <td class=\"amount\">AED ${formatCurrency(invoiceExcludingVAT)}</td>\n          </tr>\n          <tr>\n            <td>VAT on Invoice (5%):</td>\n            <td class=\"amount\">AED ${formatCurrency(invoiceVAT)}</td>\n          </tr>\n          <tr style=\"font-weight: 600;\">\n            <td>Invoice Total (inc. VAT):</td>\n            <td class=\"amount\">AED ${formatCurrency(invoiceTotal)}</td>\n          </tr>\n          <tr style=\"border-top: 2px solid #000; font-weight: 600; background-color: #f0f0f0;\">\n            <td><strong>Payment Received:</strong></td>\n            <td class=\"amount\"><strong>AED ${formatCurrency(paymentAmount)}</strong></td>\n          </tr>\n          <tr>\n            <td>Outstanding Balance:</td>\n            <td class=\"amount\">AED ${formatCurrency(outstandingBalance)}</td>\n          </tr>\n        </table>\n        <p style=\"font-size: 11px; margin-top: 10px; font-style: italic; color: #555;\">\n          <em>No additional VAT is charged on this payment receipt. VAT was accounted for on the original invoice date.</em>\n        </p>\n      `}\n    </div>\n\n    <!-- MULTI-CURRENCY SECTION (if applicable) -->\n    ${currencyCode !== 'AED' ? `\n    <div class=\"currency-section\">\n      <strong>Foreign Currency Payment Details</strong>\n      <table style=\"margin-top: 8px;\">\n        <tr>\n          <td>Payment Currency:</td>\n          <td><strong>${currencyCode}</strong></td>\n        </tr>\n        <tr>\n          <td>Amount in ${currencyCode}:</td>\n          <td class=\"amount\"><strong>${formatCurrency(paymentAmount)}</strong></td>\n        </tr>\n        <tr>\n          <td>Exchange Rate:</td>\n          <td class=\"amount\">1 ${currencyCode} = ${exchangeRate.toFixed(4)} AED</td>\n        </tr>\n        <tr style=\"font-weight: 600; border-top: 1px solid #ddd;\">\n          <td>Amount in AED (for VAT reporting):</td>\n          <td class=\"amount\"><strong>AED ${formatCurrency(amountInAED)}</strong></td>\n        </tr>\n      </table>\n    </div>\n    ` : ''}\n\n    <!-- AUDIT REFERENCE -->\n    <div style=\"margin-top: 20px; padding: 10px; background: #f9f9f9; border-radius: 3px;\">\n      <p style=\"font-size: 12px;\"><strong>Composite Receipt Reference (Audit Trail):</strong></p>\n      <p class=\"composite-ref\">${compositeReference}</p>\n      <p style=\"font-size: 10px; color: #666; margin-top: 5px;\">\n        This reference links the payment to the original invoice for FTA Form 201 reconciliation and audit purposes.\n      </p>\n    </div>\n\n    <!-- FOOTER -->\n    <div class=\"footer\">\n      <p><strong>Payment Receipt #${paymentIndex}</strong> | Issued by Steel ERP System</p>\n      <p>Date/Time: ${new Date().toLocaleString('en-US', { timeZone: 'Asia/Dubai' })}</p>\n      <div class=\"compliance-note\">\n        <p>\n          This receipt is issued in compliance with UAE Federal Law No. 8 of 2017 (VAT Law) and Executive Regulations.\n          Retain this receipt for your accounting records. Receipts must be retained for 5 years per FTA requirements.\n        </p>\n        <p style=\"margin-top: 8px;\">\n          For inquiries, contact: ${companyEmail || companyPhone || companyAddress}\n        </p>\n      </div>\n    </div>\n  </div>\n</body>\n</html>\n  `.trim();\n\n  return html;\n};\n\n/**\n * Generate receipt with minimal processing\n * Useful for quick preview/display\n */\nexport const generateReceiptPreview = (payment, invoice, company, customer) => {\n  return generateReceiptHTML(payment, invoice, company, customer);\n};\n\nexport default {\n  generateReceiptHTML,\n  generateReceiptPreview,\n};\n","usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\utils\\recordUtils.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\utils\\reminderUtils.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\utils\\requestId.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\utils\\safeAccess.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\utils\\statementPdfGenerator.js","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'sealImage' is defined but never used. Allowed unused args must match /^_/u.","line":43,"column":130,"nodeType":"Identifier","messageId":"unusedVar","endLine":43,"endColumn":139}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { formatCurrency, formatDate, getCompanyImages } from './invoiceUtils';\r\nimport { getDocumentTemplateColor } from '../constants/defaultTemplateSettings';\r\n\r\nexport const generateStatementPDF = async ({ customerName, periodStart, periodEnd, items, company }) => {\r\n  try {\r\n    const { jsPDF } = await import('jspdf');\r\n\r\n    // Get company images from company profile\r\n    const { logoUrl, sealUrl } = getCompanyImages(company);\r\n    // Get the template color for statements\r\n    const templateColor = getDocumentTemplateColor('statement', company);\r\n    const element = createStatementElement({ customerName, periodStart, periodEnd, items, company, logoUrl, sealUrl, templateColor });\r\n    document.body.appendChild(element);\r\n\r\n    await waitForImages(element);\r\n    const html2canvas = (await import('html2canvas')).default;\r\n\r\n    const canvas = await html2canvas(element, {\r\n      scale: 2,\r\n      useCORS: true,\r\n      backgroundColor: '#ffffff',\r\n      logging: false,\r\n      removeContainer: true,\r\n    });\r\n\r\n    document.body.removeChild(element);\r\n\r\n    const imgData = canvas.toDataURL('image/png');\r\n    const pdf = new jsPDF('p','mm','a4');\r\n    const pdfWidth = pdf.internal.pageSize.getWidth();\r\n    const pdfHeight = (canvas.height * pdfWidth) / canvas.width;\r\n    pdf.addImage(imgData, 'PNG', 0, 0, pdfWidth, pdfHeight);\r\n\r\n    const fname = `Statement-${(customerName || 'Customer').replace(/[\\\\/:*?\"<>|]/g,'_')}-${periodStart || ''}_to_${periodEnd || ''}.pdf`;\r\n    pdf.save(fname);\r\n    return true;\r\n  } catch (e) {\r\n    console.error('Error generating Statement PDF:', e);\r\n    throw e;\r\n  }\r\n};\r\n\r\nconst createStatementElement = ({ customerName, periodStart, periodEnd, items = [], company = {}, logoUrl: logoCompany, sealUrl: sealImage, templateColor = '#4f46e5' }) => {\r\n  const el = document.createElement('div');\r\n  el.style.cssText = `\r\n    width: 210mm;\r\n    min-height: 297mm;\r\n    padding: 20mm;\r\n    background: white;\r\n    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;\r\n    font-size: 12px;\r\n    line-height: 1.4;\r\n    color: #1e293b;\r\n    position: absolute;\r\n    top: -9999px;\r\n    left: -9999px;\r\n  `;\r\n\r\n  const safe = (v) => (v === null || v === undefined ? '' : v);\r\n  const comp = company || {};\r\n  const compAddr = comp.address || {};\r\n\r\n  const totalInvoiced = items.reduce((s, r) => s + (parseFloat(r.invoiceAmount) || 0), 0);\r\n  const totalReceived = items.reduce((s, r) => s + (parseFloat(r.received) || 0), 0);\r\n  const totalOutstanding = items.reduce((s, r) => s + (parseFloat(r.outstanding) || 0), 0);\r\n\r\n  el.innerHTML = `\r\n    <div style=\"display:flex; justify-content:space-between; margin-bottom:30px; padding-bottom:20px; border-bottom:2px solid #e2e8f0;\">\r\n      <div style=\"flex:1;\">\r\n        <div style=\"margin:0 0 10px 0; display:flex; align-items:center; gap:10px;\">\r\n          <img src=\"${logoCompany}\" alt=\"Company Logo\" crossorigin=\"anonymous\" style=\"max-height:48px; width:auto; object-fit:contain;\" />\r\n        </div>\r\n        <div style=\"margin-top:8px; line-height:1.3;\">\r\n          <p style=\"margin:0; font-size:11px; color:#334155;\"><strong>${safe(comp.name) || 'Company'}</strong></p>\r\n          <p style=\"margin:0; font-size:11px; color:#334155;\">${safe(compAddr.street)}</p>\r\n          <p style=\"margin:0; font-size:11px; color:#334155;\">${safe(compAddr.city)}${compAddr.emirate ? `, ${  compAddr.emirate}` : ''} ${compAddr.poBox || ''}</p>\r\n          <p style=\"margin:0; font-size:11px; color:#334155;\">${safe(compAddr.country)}</p>\r\n          <p style=\"margin:0; font-size:11px; color:#334155;\">Phone: ${safe(comp.phone)}</p>\r\n          <p style=\"margin:0; font-size:11px; color:#334155;\">Email: ${safe(comp.email)}</p>\r\n          <p style=\"margin:0; font-size:11px; color:#334155;\">TRN: ${safe(comp.vatNumber)}</p>\r\n        </div>\r\n      </div>\r\n\r\n      <div style=\"text-align:left;\">\r\n        <div style=\"margin-bottom:6px;\">\r\n          <p style=\"margin:2px 0;\">${safe(customerName) || 'Customer'}</p>\r\n        </div>\r\n        <div style=\"margin-bottom:10px;\">\r\n          <p style=\"margin:2px 0;\"><strong>Period:</strong> ${formatDate(periodStart)} - ${formatDate(periodEnd)}</p>\r\n          <p style=\"margin:2px 0;\"><strong>Generated:</strong> ${formatDate(new Date())}</p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <div style=\"width:100%; background-color:${templateColor}; text-align:center; margin:10px 0 20px 0; padding:15px 0;\">\r\n      <h2 style=\"margin:0; font-size:20px; font-weight:700; letter-spacing:0.5px; color:#ffffff;\">ACCOUNT STATEMENT</h2>\r\n    </div>\r\n\r\n    <div style=\"margin-bottom:20px; display:flex; gap:16px;\">\r\n      <div style=\"flex:1; padding:12px; border:1px solid #000;\">\r\n        <div style=\"font-size:11px; color:#000; font-weight:600;\">Opening Balance:</div>\r\n        <div style=\"font-size:14px; font-weight:700; color:#000;\">${formatCurrency(items[0]?.openingBalance || 0)}</div>\r\n      </div>\r\n      <div style=\"flex:1; padding:12px; border:1px solid #000;\">\r\n        <div style=\"font-size:11px; color:#000; font-weight:600;\">Total Invoiced:</div>\r\n        <div style=\"font-size:14px; font-weight:700; color:#000;\">${formatCurrency(totalInvoiced)}</div>\r\n      </div>\r\n      <div style=\"flex:1; padding:12px; border:1px solid #000;\">\r\n        <div style=\"font-size:11px; color:#000; font-weight:600;\">Total Paid:</div>\r\n        <div style=\"font-size:14px; font-weight:700; color:#000;\">${formatCurrency(totalReceived)}</div>\r\n      </div>\r\n      <div style=\"flex:1; padding:12px; border:1px solid #000;\">\r\n        <div style=\"font-size:11px; color:#000; font-weight:600;\">Closing Balance:</div>\r\n        <div style=\"font-size:14px; font-weight:700; color:#000;\">${formatCurrency(totalOutstanding)}</div>\r\n      </div>\r\n    </div>\r\n\r\n    <div style=\"margin-bottom:30px;\">\r\n      <table style=\"width:100%; border-collapse:collapse; font-size:10px;\">\r\n        <thead>\r\n          <tr style=\"background-color:#f5f5f5; color:#000;\">\r\n            <th style=\"padding:8px 6px; text-align:left; border:1px solid #000; font-weight:600;\">Date</th>\r\n            <th style=\"padding:8px 6px; text-align:left; border:1px solid #000; font-weight:600;\">Type</th>\r\n            <th style=\"padding:8px 6px; text-align:left; border:1px solid #000; font-weight:600;\">Reference</th>\r\n            <th style=\"padding:8px 6px; text-align:left; border:1px solid #000; font-weight:600;\">Description</th>\r\n            <th style=\"padding:8px 6px; text-align:right; border:1px solid #000; font-weight:600;\">Debit</th>\r\n            <th style=\"padding:8px 6px; text-align:right; border:1px solid #000; font-weight:600;\">Credit</th>\r\n            <th style=\"padding:8px 6px; text-align:right; border:1px solid #000; font-weight:600;\">Balance</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          ${items.map((r, idx) => {\r\n    const debit = parseFloat(r.invoiceAmount) || 0;\r\n    const credit = parseFloat(r.received) || 0;\r\n    return `\r\n            <tr ${idx % 2 === 0 ? 'style=\"background-color:#fafafa;\"' : ''}>\r\n              <td style=\"padding:6px; text-align:left; border:1px solid #ccc;\">${formatDate(r.invoiceDate || r.date)}</td>\r\n              <td style=\"padding:6px; text-align:left; border:1px solid #ccc;\">${debit > 0 ? 'Invoice' : 'Payment'}</td>\r\n              <td style=\"padding:6px; text-align:left; border:1px solid #ccc;\">${safe(r.invoiceNo || r.invoiceNumber)}</td>\r\n              <td style=\"padding:6px; text-align:left; border:1px solid #ccc;\">${safe(r.description || `Invoice ${  r.invoiceNo || r.invoiceNumber}`)}</td>\r\n              <td style=\"padding:6px; text-align:right; border:1px solid #ccc;\">${debit > 0 ? formatCurrency(debit) : '-'}</td>\r\n              <td style=\"padding:6px; text-align:right; border:1px solid #ccc;\">${credit > 0 ? formatCurrency(credit) : '-'}</td>\r\n              <td style=\"padding:6px; text-align:right; border:1px solid #ccc; font-weight:600;\">${formatCurrency(r.outstanding || 0)}</td>\r\n            </tr>\r\n          `;\r\n  }).join('')}\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n\r\n    <div style=\"margin-top:60px; border-top:1px solid #ccc; padding-top:20px;\">\r\n      <div style=\"display:flex; justify-content:space-between; align-items:flex-end;\">\r\n        <div style=\"flex:1;\">\r\n          <p style=\"margin:0; font-size:10px; color:#666;\">Generated on ${formatDate(new Date())}</p>\r\n          <p style=\"margin:4px 0 0 0; font-size:9px; color:#999;\">This is a computer-generated statement and does not require a signature.</p>\r\n        </div>\r\n        <div style=\"text-align:center; min-width:180px;\">\r\n          <div style=\"border-bottom:1px solid #000; margin:0 0 8px 0; width:150px; margin-left:auto;\"></div>\r\n          <p style=\"margin:0; font-size:10px; font-weight:600;\">Authorized Signatory</p>\r\n          <p style=\"margin:2px 0 0 0; font-size:10px; font-weight:600;\">${safe(comp.name) || 'Company'}</p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  `;\r\n  return el;\r\n};\r\n\r\nconst waitForImages = (container) => {\r\n  const images = Array.from(container.querySelectorAll('img'));\r\n  if (images.length === 0) return Promise.resolve();\r\n  return Promise.all(images.map(img => new Promise((resolve) => {\r\n    if (img.complete && img.naturalWidth !== 0) return resolve();\r\n    try { img.crossOrigin = img.crossOrigin || 'anonymous'; } catch {\r\n      // Ignore - crossOrigin may be read-only on some browsers\r\n    }\r\n    img.addEventListener('load', resolve, { once: true });\r\n    img.addEventListener('error', resolve, { once: true });\r\n  })));\r\n};\r\n\r\n","usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\utils\\stockUtils.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\utils\\supplierNormalizer.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":13,"column":48,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":13,"endColumn":51,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[470,473],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[470,473],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":13,"column":74,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":13,"endColumn":77,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[496,499],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[496,499],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":22,"column":29,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":22,"endColumn":32,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[779,782],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[779,782],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":34,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":34,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1178,1181],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1178,1181],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":97,"column":50,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":97,"endColumn":53,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4044,4047],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4044,4047],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":97,"column":75,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":97,"endColumn":78,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4069,4072],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4069,4072],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":105,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":105,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4364,4367],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4364,4367],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Frontend Supplier Data Normalizer\n * CRITICAL: Converts snake_case API fields to camelCase frontend schema\n * FAIL-SAFE: Validates and normalizes supplier data from API\n */\n\n/**\n * Convert snake_case API response to camelCase Supplier object\n * @param rawSupplier - Raw supplier data from API (snake_case)\n * @param source - Source of the data for debugging\n * @returns Normalized Supplier with camelCase fields\n */\nexport function normalizeSupplier(rawSupplier: any, source = 'unknown'): any | null {\n  if (!rawSupplier || typeof rawSupplier !== 'object') {\n    console.error(`Γ¥î [Supplier Normalizer] Invalid supplier data from ${source}:`, rawSupplier);\n    return null;\n  }\n\n  const errors: string[] = [];\n\n  // Helper to safely parse dates\n  const parseDate = (value: any): string | undefined => {\n    if (!value) return undefined;\n    if (value?.seconds) return new Date(parseInt(value.seconds) * 1000).toISOString();\n    if (typeof value === 'string') {\n      const parsed = new Date(value);\n      if (!isNaN(parsed.getTime())) return parsed.toISOString();\n    }\n    return undefined;\n  };\n\n  try {\n    // Build the normalized Supplier object\n    const normalized: any = {\n      // Core identifiers\n      id: rawSupplier.id || 0,\n      companyId: rawSupplier.company_id || rawSupplier.companyId,\n      name: rawSupplier.name || rawSupplier.supplier_name || '',\n      \n      // Contact information\n      email: rawSupplier.email || rawSupplier.email_address || undefined,\n      phone: rawSupplier.phone || rawSupplier.phone_number || undefined,\n      contactPerson: rawSupplier.contact_person || rawSupplier.contactPerson || undefined,\n      website: rawSupplier.website || undefined,\n      address: rawSupplier.address || undefined,\n      \n      // Tax & Compliance (6 fields)\n      trn: rawSupplier.trn || rawSupplier.tax_registration_number || undefined,\n      vatNumber: rawSupplier.vat_number || rawSupplier.vatNumber || undefined,\n      businessLicense: rawSupplier.business_license || rawSupplier.businessLicense || undefined,\n      taxId: rawSupplier.tax_id || rawSupplier.taxId || undefined,\n      certifications: rawSupplier.certifications || undefined,  // JSON string\n      isDesignatedZone: rawSupplier.isDesignatedZone || rawSupplier.is_designated_zone || false,\n      \n      // Financial (4 fields)\n      paymentTerms: rawSupplier.payment_terms || rawSupplier.paymentTerms || undefined,\n      creditLimit: rawSupplier.credit_limit || rawSupplier.creditLimit || undefined,\n      currentCredit: rawSupplier.current_credit || rawSupplier.currentCredit || undefined,\n      bankDetails: rawSupplier.bank_details || rawSupplier.bankDetails || undefined,  // JSON string\n      defaultCurrency: rawSupplier.default_currency || rawSupplier.defaultCurrency || 'AED',\n      \n      // Categorization\n      category: rawSupplier.category || undefined,\n      country: rawSupplier.country || undefined,\n      countryId: rawSupplier.country_id || rawSupplier.countryId || undefined,\n      \n      // Status & Audit (3 fields)\n      isActive: rawSupplier.is_active !== undefined ? Boolean(rawSupplier.is_active) : true,\n      createdAt: parseDate(rawSupplier.created_at || rawSupplier.createdAt),\n      updatedAt: parseDate(rawSupplier.updated_at || rawSupplier.updatedAt),\n      \n      // Notes\n      notes: rawSupplier.notes || undefined,\n    };\n\n    // Log validation errors if any\n    if (errors.length > 0) {\n      console.warn(`ΓÜá∩╕Å [Supplier Normalizer] Validation warnings from ${source}:`);\n      errors.forEach(error => console.warn(`   - ${error}`));\n    }\n\n    return normalized;\n    \n  } catch (error) {\n    console.error(`Γ¥î [Supplier Normalizer] Failed to normalize supplier from ${source}:`, error);\n    console.error('   Raw data:', rawSupplier);\n    return null;\n  }\n}\n\n/**\n * Normalize array of suppliers\n * @param rawSuppliers - Array of raw supplier data from API\n * @param source - Source identifier for debugging\n * @returns Array of normalized Supplier objects\n */\nexport function normalizeSuppliers(rawSuppliers: any[], source = 'list'): any[] {\n  if (!Array.isArray(rawSuppliers)) {\n    console.error(`Γ¥î [Supplier Normalizer] Expected array, got ${typeof rawSuppliers}`);\n    return [];\n  }\n\n  return rawSuppliers\n    .map((supplier, index) => normalizeSupplier(supplier, `${source}[${index}]`))\n    .filter((supplier): supplier is any => supplier !== null);\n}\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\utils\\timezone.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\utils\\uuid.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\validation\\payloadSchemas.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\validators\\__tests__\\schemas.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\validators\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]}]},{"filePath":"D:\\Ultimate Steel\\steelapp-fe\\src\\validators\\schemas.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"indent","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]}]}]
